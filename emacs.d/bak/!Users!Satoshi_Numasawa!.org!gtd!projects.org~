-*- mode: org -*-

https://bbank-devs.atlassian.net/browse/RUBYDEV-649


* Project [#A] Machine Lerning
** サイト
*** ML参考
http://qiita.com/daxanya1/items/218f2e3b922142550ef9
http://gihyo.jp/dev/serial/01/machine-learning/0001

*** ML学習
https://www.coursera.org/
http://nnadl-ja.github.io/nnadl_site_ja/

*** python
http://diveintopython3-ja.rdy.jp/

** 数学 / algo
- 線形代数
  プログラミングのための線形代数
  https://www.amazon.co.jp/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AE%E7%B7%9A%E5%BD%A2%E4%BB%A3%E6%95%B0-%E5%B9%B3%E5%B2%A1-%E5%92%8C%E5%B9%B8/dp/4274065782

- 統計
  any?

- 微分積分
  適当に一冊

- 行列, ベクトル

線形回帰
多変数の線形回帰
行列 (octave)
ロジスティック回帰
正規化
ニューラルネットワーク：表現
ニューラルネットワーク：学習
機械学習を適用するためのアドバイス
機械学習システムデザイン
サポートベクターマシン (分類アルゴリズム)
教師無し学習 (K-Meansアルゴリズム)
次元削減 (PCA(主成分分析)アルゴリズム)
アノマリー検出 (異常を検出するアルゴリズム)
レコメンドシステム
大規模機械学習 (Map-Reduce)

** ML
- [X] ゼロから作るDeep Learning ―Pythonで学ぶディープラーニングの理論と実装
  https://www.amazon.co.jp/%E3%82%BC%E3%83%AD%E3%81%8B%E3%82%89%E4%BD%9C%E3%82%8BDeep-Learning-%E2%80%95Python%E3%81%A7%E5%AD%A6%E3%81%B6%E3%83%87%E3%82%A3%E3%83%BC%E3%83%97%E3%83%A9%E3%83%BC%E3%83%8B%E3%83%B3%E3%82%B0%E3%81%AE%E7%90%86%E8%AB%96%E3%81%A8%E5%AE%9F%E8%A3%85-%E6%96%8E%E8%97%A4-%E5%BA%B7%E6%AF%85/dp/4873117585/ref=pd_sim_14_9?ie=UTF8&psc=1&refRID=2R5DFQ29AQXSBT215GGX

- [ ] パターン認識と機械学習
  https://www.amazon.co.jp/%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E8%AA%8D%E8%AD%98%E3%81%A8%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92-%E4%B8%8A-C-M-%E3%83%93%E3%82%B7%E3%83%A7%E3%83%83%E3%83%97/dp/4621061224

- [X] Python機械学習プログラミング 達人データサイエンティストによる理論と実践
  https://www.amazon.co.jp/Python%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0-%E9%81%94%E4%BA%BA%E3%83%87%E3%83%BC%E3%82%BF%E3%82%B5%E3%82%A4%E3%82%A8%E3%83%B3%E3%83%86%E3%82%A3%E3%82%B9%E3%83%88%E3%81%AB%E3%82%88%E3%82%8B%E7%90%86%E8%AB%96%E3%81%A8%E5%AE%9F%E8%B7%B5-impress-top-gear/dp/4844380605

- [ ] 岩波データサイエンス
  https://sites.google.com/site/iwanamidatascience/

- [ ] ITエンジニアのための機械学習理論入門
  https://www.amazon.co.jp/IT%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AE%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92%E7%90%86%E8%AB%96%E5%85%A5%E9%96%80-%E4%B8%AD%E4%BA%95%E6%82%A6%E5%8F%B8-ebook/dp/B016Q22IX2

- [ ] データサイエンティスト養成読本 機械学習入門編
  https://www.amazon.co.jp/%E3%83%87%E3%83%BC%E3%82%BF%E3%82%B5%E3%82%A4%E3%82%A8%E3%83%B3%E3%83%86%E3%82%A3%E3%82%B9%E3%83%88%E9%A4%8A%E6%88%90%E8%AA%AD%E6%9C%AC-%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92%E5%85%A5%E9%96%80%E7%B7%A8-Software-Design-plus/dp/4774176311/ref=pd_sim_14_10?ie=UTF8&psc=1&refRID=P48RF4ZA3PRCW4QMDSA1

** python
- [X] Pythonからはじめる数学入門
  http://www.oreilly.co.jp/books/9784873117683/

- [X] 入門 Python 3
  https://www.amazon.co.jp/dp/4873117380/ref=pd_lpo_sbs_dp_ss_3?pf_rd_p=187205609&pf_rd_s=lpo-top-stripe&pf_rd_t=201&pf_rd_i=4844380605&pf_rd_m=AN1VRQENFRJN5&pf_rd_r=S5AKWMENRCABPGTBTQXC

- [X] 実践 Python 3
  http://www.oreilly.co.jp/books/9784873117393/

- [ ] Effective Python――Pythonプログラムを改良する59項目
  http://www.oreilly.co.jp/books/9784873117560/

- [ ] Pythonによるデータ分析入門 ―NumPy、pandasを使ったデータ処理
  https://www.amazon.co.jp/Python%E3%81%AB%E3%82%88%E3%82%8B%E3%83%87%E3%83%BC%E3%82%BF%E5%88%86%E6%9E%90%E5%85%A5%E9%96%80-%E2%80%95NumPy%E3%80%81pandas%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%83%87%E3%83%BC%E3%82%BF%E5%87%A6%E7%90%86-Wes-McKinney/dp/4873116554/ref=pd_bxgy_14_img_2?ie=UTF8&psc=1&refRID=49TM6QG3XCKC5RNWCB2J

**
https://github.com/oreilly-japan/deep-learning-from-scratch

** ゼロから作るDeep Learning ―Pythonで学ぶディープラーニングの理論と実装
*** github
https://github.com/oreilly-japan/deep-learning-from-scratch
* Project [#A] Mail Tier2
DEADLINE: <2016-10-31 Mon>
CLOCK: [2016-10-13 Thu 07:00]--[2016-10-13 Thu 17:39] => 10:39
CLOCK: [2016-10-05 Wed 11:02]--[2016-10-05 Wed 18:00] =>  6:58
** Meatings
** base
*** base branch
develop/RUBYDEV-710
メール配信第二弾の変更は develop/RUBYDEV-710ブランチにマージしていくので、よろしくお願いします。

*** 各種つながり
**** model
Company -> Project -> MarketingPlan -> MarketingPlanCosutomer

**** 配信基準日へ項目追加
***** allin
****** app/models/mail_delivery_base_date_type.rb
以下へ, 追記. (命名は取得する値の特性で変化する)
customer_status_changed : statusが変動した日
marketing_registered    : 登録した日


----------------------------------------------------------------
  behave_code_master :code, %w(
    customer_status_changed
    sale_state_changed
    product_sold
    person_birthday
    marketing_registered
  )
----------------------------------------------------------------

****** rake
# DBへ値を追加
# TODO 追加した順に List表示されるため, ちょいと考えてみる必要あり
$ bundle exec rake db:seeds:mail_delivery_date_types

***** allin-web
****** src/app/components/mail_delivery/setting/forms/delivery_datetime.slim
# 表示部位を追加

    .field ng-switch="self.resource.mail_delivery_base_date_type"
      form-status-selector-field(
        property="status"
        field-only="true"
        ng-switch-when="customer_status_changed"
      )
      form-entire-sale-state-selector-field(
        property="sale_state"
        field-only="true"
        ng-switch-when="sale_state_changed"
      )
      form-product-selector-field(
        property="product"
        field-only="true"
        ng-switch-when="product_sold"
      )
      form-marketing-selector-field(
        property="marketing_plan"
        field-only="true"
        ng-switch-when="marketing_registered"
      )
****** src/app/assets/locales/ja.json
# 表示文字列変換部
                    "customer_status_changed": "顧客ステータス変更日",
                    "sale_state_changed": "営業ステータス変更日",
                    "product_sold": "売上日",
                    "person_birthday": "誕生日"
                    "person_birthday": "誕生日",
                    "marketing_registered": "集客リスト登録日"
                },
                "probability_type": {
                    "low": "低",
****** src/app/components/mail_delivery/setting/forms/delivery_datetime.js
# for what?
#     selectable_id関係だったか?
        this.$scope.$watch('self.resource.marketing', (newValue, oldValue) => {
            if (newValue === oldValue) return;
            this.resource.base_date_selectable_id = newValue.id;
        });

**** 子項目の値取得し, List表示
allinへAPI追加. もしくは既存のAPIを流用.

***** allin
****** 以下を参考に
# 既に存在している場合は, allin-web 側でAPI指定するのみ
- app/api/sale_state_api.rb
- app/views/api/mail_delivery_setting.rabl
- config/api_restrictions.yml
- config/routes.rb

****** 値をListに出す方法

****** app/models/auto_mail_delivery_setting.rb
%w(customer_status_changed sale_state_changed product_sold).include? mail_delivery_base_date_type.try!(:code)
%w(customer_status_changed sale_state_changed product_sold marketing_registered).include? mail_delivery_base_date_type.try!(:code)

****** app/models/step_mail_delivery_setting.rb
%w(customer_status_changed sale_state_changed product_sold).include?(mail_delivery_base_date_type.try!(:code))
%w(customer_status_changed sale_state_changed product_sold marketing_registered).include?(mail_delivery_base_date_type.try!(:code))

****** app/services/mail_delivery_setting_service.rb
      SaleState.find_by_hex_id(id)
    when "product_sold"
      Product.find_by_hex_id(id)
    when "marketing_registered"
      MarketingPlan.find_by_hex_id(id)
    end
  end

****** lib/mail_delivery.rb
require "mail_delivery/marketing_registered_recipient_extractor"

****** lib/mail_delivery/base_date_recipient_extractor.rb
      # TODO: marketing
      MarketingPlan.find_by_hex_id(id)

****** lib/mail_delivery/marketing_registered_recipient_extractor.rb
# mail address 検索部
****** app/views/api/mail_delivery_setting.rabl
when MarketingPlan
  child :base_date_selectable, object_root: false do
    attribute hex_id: :id
    attribute :display_name
  end
***** allin-web
****** src/lib/resources/marketing.js
# ここでは marketing_plan.js を追加
# API URL を記述する

# src/lib/resources/marketing.js

"use strict";

import { BaseResourceService } from "./base_resource_service";

const COLLECTION_NAME = "marketing_plans";

class Service extends BaseResourceService {
    constructor($resource, serviceDependency, settings) {
        let url = `${settings.url.apiv1}/marketing_plans/:id`;
        let client = $resource(url, {}, {
            update: {
                method: "PUT",
                params: { id: "@id" }
            }
        });
        super(client, serviceDependency);
    }

    getCollectionName() {
        return COLLECTION_NAME;
    }
}

angular.module("allin").service("marketingService", Service);

****** src/lib/components/form/selector/form_marketing_plan_selector_field.js
# 以下, displayProperty部でjsonの読み込む箇所を指定する
"use strict";

import { BaseSelectorDirectiveController } from "./base_selector_directive_controller";
import { SelectorDirectiveBuilder } from "./selector_directive_builder";

angular.module("allin").directive("formMarketingPlanSelectorField", () => {
    return {
        bindToController: Controller.getBindToController({
            allowToBeBlank: "=?"
        }),
        controller: Controller,
        controllerAs: "self",
        link: SelectorDirectiveBuilder.getLinkGenerator(),
        require: ["form-marketing-plan-selector-field", "^?bootstrap-form"],
        restrict: "E",
        scope: {},
        template: SelectorDirectiveBuilder.getTemplateGenerator({
            displayProperty: "description"
        })
    };
});

class Controller extends BaseSelectorDirectiveController {
    constructor($scope, selectorDependency, marketingPlanService) {
        super($scope, selectorDependency, marketingPlanService);
    }

    getDisplayProperty() {
        return "description";
    }
}

**** Mail deliver settingを呼び出す際
表示する名前が格納されている変数をしているする必要がある

***** app/views/api/mail_delivery_setting.rabl
# MarketingPlanでは,
# description

case root_object.base_date_selectable
when MarketingPlan
  child :base_date_selectable, object_root: false do
    attribute hex_id: :id
    attribute :description
  end
when Status
  child :base_date_selectable, object_root: false do
    attribute hex_id: :id
    attribute :name
  end
when SaleState
  child :base_date_selectable, object_root: false do
    attribute hex_id: :id
    attribute :state

    glue :sale_state_group do
      attribute display_name: :group_name
    end
  end
when Product
  child :base_date_selectable, object_root: false do
    attribute hex_id: :id
    attribute :display_name
  end
end

*** 集客案件の読み込み, 通知
**** model bind
- Project
    - MarketingPlan
        - MarketingPlanCustomer

**** required data
- MarketingPlan
    - description : 集客案件名
    - uuid        : customer search

**** find
MarketingPlanCustomer.where(marketing_plan: MarketingPlan.all[0]).each { |plan|
    p plan.customer
}


*** 条件 : recipient_extractor
検索条件

- 月日を基準にする

- 当日
- x日前後
- xヶ月前後
- x週間前後のy曜日
- xヶ月前後のz日



** 環境 / 構築
** 疑問
** 要修正?
** roadmap
*** [2016-10-06 Thu]
- todos
    配信基準日の選択肢(集客ツール)を追加する

- 今後
    上記が終わったらticketもらいにいく

** meating
** todos
*** Todo 配信基準日の選択肢(集客ツール)を追加する
https://bbank-devs.atlassian.net/browse/RUBYDEV-649

**** info
***** base
- 概要
    配信基準日に「集客リスト登録日」を追加する。

- 変更内容
    フロント
   「集客リスト登録日」を選択された場合に、「集客案件」をドロップダウンで選択できるようにする。

- バックエンド
    データ構造について竹中さんに確認する。
***** base
- front / backend 双方作成する

- front : UI
    https://bbank-devs.atlassian.net/browse/RUBYDEV-649

    - 配信基準日
      集客ツールを追加

    - プルダウン
      集客案件名の文面をリスト表示


- front : 日付の取得箇所
    集客ツール -> 案件取得 -> 集客リスト -> 登録日時
    # front 稲葉さんに確認
    # dataのつながりは竹中さんに

- backend
    https://bbank-devs.atlassian.net/wiki/pages/viewpage.action?pageId=55640285&preview=/55640285/55640282/%E3%83%A1%E3%83%BC%E3%83%AB%E9%85%8D%E4%BF%A1%E8%A9%B3%E7%B4%B0%E3%82%AF%E3%83%A9%E3%82%B9%E5%9B%B31.png

***** from inaba san
- 表示のslim
    src/app/components/mail_delivery/setting/forms/delivery_datetime.slim
    // delivery_reference_dateの部分が配信基準日の設定です。

- 動的に表示を変えるのは
    ng-switch-whenを使えば大丈夫だと思います。

- js
    src/app/components/mail_delivery/setting/forms/delivery_datetime.js
    src/app/assets/locales/ja.json

**** Todo stagingなどでのTodo
以下だけで大丈夫?

- seed
   bundle exec rake db:seeds:mail_delivery_date_types

**** Done 集客リスト登録日 extractor作成
CLOSED: [2016-10-18 Tue 13:27]

**** Done model 構造確認
CLOSED: [2016-10-19 Wed 08:41]
MarketingPlanCustomer
MarketingPlan

**** Done 送信試験
CLOSED: [2016-10-19 Wed 08:41]

*** Done 配信基準日 list の通知
CLOSED: [2016-10-13 Thu 08:36]

*** spec
#<AllRecipient
uuid: "\xEF\b
\x00\xAA\x96W\x11\xE6\xB3\"\b\x00'^\xAA|",
 company_id: "(m\"L\x95\xC4\x11\xE6\xB24\b\x00'^\xAA|",
 person_id: "\xEE\x98\x98\x8C\x96W\x11\xE6\xB3\"\b\x00'^\xAA|",
 sourceable_id: "\xEE`\xE4Z\x96W\x11\xE6\xB3\"\b\x00'^\xAA|",
 sourceable_type: "Customer",
 lock_version: 0,
 created_at: 1476921509,
 updated_at: 1476921509,
 deleted_at: nil>

* Project [#A] Allin-chat
DEADLINE: <2016-10-31 Mon>
CLOCK: [2016-10-05 Wed 11:02]--[2016-10-05 Wed 18:00] =>  6:58
** Meatings
Added: [2016-09-20 Tue 11:03]

*** [2016-09-26 Mon]
CLOSED: [2016-09-26 Mon 19:25]
Added: [2016-09-26 Mon 16:35]

webstorm
vivaldi
メッセージを送るだけ

- starくらいはつける
    - 可能であればmention

- channel
   - private / publicで作成可能とする

- messageの返信
    - rocket chat


----------------------
- sample
    model/channel.js
- isPublic
    検索して参加する感じ


----------------------
- paginate
    - pagenate件数 : とりあえず適当に

- star
    - はおいておく


--------------------
- port
    5200

- sample
  https://git.ruby-dev.jp/business_bank_group/allin-chat-proto
  上を参考に実装.


- github
  https://github.com/BusinessBank/allin-chat/tree/master/app
  githubは, ほぼまっさらな状態.

  masterへcommit

- allin-chat以外の修正
  以下へcommit
  https://bbank-devs.atlassian.net/browse/RUBYDEV-663

*** [2016-09-20 Tue]
- 起動する所までのrepositoryを作成 (種となる.こちらから, 別のrepositoryへコピペして適用)
  ヒロタさんが作成

- base を作成して, PR

- ヒロタさんが大枠を作成して, 肉付けしていく
  UI / server side双方担当する予定.

- 締切は10月末
  ヒロタさんは, メール配信と締切がかぶっている.

*** [2016-09-13 Tue]
ヒロタさんが戻らないとすすまないー
*** [2016-07-12 Tue]
**** メール配信
佐藤、廣田

**** SNS
Link Preview

**** chat
沼沢
設計、検討

フルアサイン
160時間目安

**** 難しい所
- チャネルごとの状態管理
- DMでのweb socketの貼り方

**** プロセスは分ける
portは分ければよい

** base
*** 機能base
https://docs.google.com/spreadsheets/d/1uEiI2SFBPv-Z_WgswEhY24NnGe3Z3THCCzRZhmCDbRk/edit#gid=1069237278

** 環境 / 構築
** 疑問
*** [2016-07-12 Tue]
**** Public private channelの違いは?
**** public channelにメンバーを招待できるとは、どんな状態?
**** アーカイブとはどんな状態?
Gmailのアーカイブに似た感じ?
データだけあって、参照のみ可能は?

**** メッセージとは?
chat message

**** 文字装飾?
斜体とか?
boldとか?
**** ダイレクトメッセージ
メンションの使いどころは?
**** 名前付け
@sendaiみたいなgroup名前づけ?

ユーザー毎に、他のユーザーの alias を付けれる?
@s-numasawa(sendai)

**** 全員にメッセージ
channleの通常書き込みは全員当ての用な気がするが
mention?

**** メッセージ非表示
機能的にはどんなもの?
単体メッセージ?
なんらかの集合?

**** login状態は、redisで管理
login状態って?
allinにいる状態?
chatを開いている状態?

skypeみたいに、状態にrankづけする?

** 要修正?
** roadmap
https://docs.google.com/spreadsheets/d/1mwjXQ7hCsbJGpGafFbKSTCxj4IeG2NBPWT03k0rh1KY/edit#gid=1989303704

** meating
** todos
https://github.com/BusinessBank/allin-chat

*** Waiting [API] ChannelのCRUD作成
CLOCK: [2016-10-06 Thu 10:15]--[2016-10-06 Thu 18:16] =>  8:01

https://bbank-devs.atlassian.net/browse/RUBYDEV-645

- [ ] まずは読む
- [ ] model作成

**** Schema
{
    company_id: {
        type: String,
        required: 'company_id is required'
    },
    name: {
        type: String,
        required: 'name is required'
    },
    description: {
        type: String
    },
    account_ids: [{
        type: String,
        required: 'account_ids are required'
    }],
    owner_account_ids: [{
        type: String,
        required: 'owner_account_ids are required'
    }],
    is_public: {
        type: Boolean,
        required: 'is_public is required',
        default: false
    },
    is_direct_message: {
        type: Boolean,
        required: 'is_direct_message is required',
        default: false
    },
    created_by: {
        type: String,
        required: 'created_by is required'
    },
    created_at: {
        type: Date,
        default: Date.now,
        required: 'created_at is required'
    },
    updated_at: {
        type: Date,
        default: Date.now
    }
}

**** Done CRUDの作成（api/v1/channels)
CLOSED: [2016-10-07 Fri 11:17]
***** index(GET: /)
****** command
curl -X GET -H "Authorization:Bearer RF0v0RHpUPmvcdplqcrFNoaO86zMI7UQGy8k7EN79xiRJpo6IAN5umDwpae4ouuUkt8MNLK80DjRuYSx14t7OEUbJyxzAZ8z8WxnXBX5gkQC2FhXicKWVXwictLqqxfN" \
    localhost:5200/api/v1/channels/


curl -X GET -H "Authorization:Bearer w8QizD6E9vk1PsaClxI0Oq5I07oeSBN9XhnFnK8oIyFivsZ2Ehn6gXKYwVHnIDMr8WSU4dnogd2P4yO1guM9dgQPane1lFrEHLZ40PNb3KeSStywgy6FEVgvmuSDEcC0" \
    localhost:5200/api/v1/channels/?is_public=true

curl -X GET -H "Authorization:Bearer w8QizD6E9vk1PsaClxI0Oq5I07oeSBN9XhnFnK8oIyFivsZ2Ehn6gXKYwVHnIDMr8WSU4dnogd2P4yO1guM9dgQPane1lFrEHLZ40PNb3KeSStywgy6FEVgvmuSDEcC0" \
    localhost:5200/api/v1/channels/?is_public=false

curl -X GET -H "Authorization:Bearer w8QizD6E9vk1PsaClxI0Oq5I07oeSBN9XhnFnK8oIyFivsZ2Ehn6gXKYwVHnIDMr8WSU4dnogd2P4yO1guM9dgQPane1lFrEHLZ40PNb3KeSStywgy6FEVgvmuSDEcC0" \
    "localhost:5200/api/v1/channels/?is_public=false&limit=1&offset=1"


curl -X GET -H "Authorization:Bearer w8QizD6E9vk1PsaClxI0Oq5I07oeSBN9XhnFnK8oIyFivsZ2Ehn6gXKYwVHnIDMr8WSU4dnogd2P4yO1guM9dgQPane1lFrEHLZ40PNb3KeSStywgy6FEVgvmuSDEcC0" \
    localhost:5200/api/v1/channels/?is_direct_message=false

curl -X GET -H "Authorization:Bearer w8QizD6E9vk1PsaClxI0Oq5I07oeSBN9XhnFnK8oIyFivsZ2Ehn6gXKYwVHnIDMr8WSU4dnogd2P4yO1guM9dgQPane1lFrEHLZ40PNb3KeSStywgy6FEVgvmuSDEcC0" \
    localhost:5200/api/v1/channels/?is_direct_message=true

****** infos
******* [#A] ページネーション
有り・無しで取得可能（可能であれば）

******* [#A] 自分が参加しているチャンネルのデータを返せるようにする
query.is_direct_message false || 未定義 {
    is_direct_messageがfalseのデータ？
}

******* [#A] オープンなチャンネルのデータを返せるようにする
query.is_public == true {
    is_publicがtrueかつcompany_idが自社のデータ？
}

******* [#D] ダイレクトメッセージのデータを返せるようにする（後回し）
query.is_direct_message がtrueなら、is_direct_messageがtrueのデータ？

****** matrix
|------------+----------------+------------|
|            | public : true  | false      |
|------------+----------------+------------|
| dm : true  | NG (not exist) | DM private |
| dm : false | public         | Private    |
|------------+----------------+------------|

***** create(POST: /)
****** command
curl -v -H "Authorization:Bearer RF0v0RHpUPmvcdplqcrFNoaO86zMI7UQGy8k7EN79xiRJpo6IAN5umDwpae4ouuUkt8MNLK80DjRuYSx14t7OEUbJyxzAZ8z8WxnXBX5gkQC2FhXicKWVXwictLqqxfN" \
    -H "Accept: application/json" -H "Content-type: application/json" -X POST localhost:5200/api/v1/channels/ \
    -d '{
            "is_public"         : "true",
            "is_direct_message" : "false",
            "name"              : "Public01",
            "owner_account_ids" : ["7b5f0e50fdc011e3acbb22000a7c8884"],
            "account_ids"       : ["7b5f0e50fdc011e3acbb22000a7c8884"]
        }'

curl -v -H "Authorization:Bearer RF0v0RHpUPmvcdplqcrFNoaO86zMI7UQGy8k7EN79xiRJpo6IAN5umDwpae4ouuUkt8MNLK80DjRuYSx14t7OEUbJyxzAZ8z8WxnXBX5gkQC2FhXicKWVXwictLqqxfN" \
    -H "Accept: application/json" -H "Content-type: application/json" -X POST localhost:5200/api/v1/channels/ \
    -d '{
            "is_public"         : "true",
            "is_direct_message" : "false",
            "name"              : "Public01",
            "owner_account_ids" : ["7b5f0e50fdc011e3acbb22000a7c8883"],
            "account_ids"       : ["7b5f0e50fdc011e3acbb22000a7c8883","7b5f0e50fdc011e3acbb22000a7c8884"]
        }'

curl -v -H "Authorization:Bearer RF0v0RHpUPmvcdplqcrFNoaO86zMI7UQGy8k7EN79xiRJpo6IAN5umDwpae4ouuUkt8MNLK80DjRuYSx14t7OEUbJyxzAZ8z8WxnXBX5gkQC2FhXicKWVXwictLqqxfN" \
    -H "Accept: application/json" -H "Content-type: application/json" -X POST localhost:5200/api/v1/channels/ \
    -d '{
            "is_public"         : "false",
            "is_direct_message" : "false",
            "name"              : "Public01",
            "owner_account_ids" : ["7b5f0e50fdc011e3acbb22000a7c8883"],
            "account_ids"       : ["7b5f0e50fdc011e3acbb22000a7c8883","7b5f0e50fdc011e3acbb22000a7c8884"]
        }'

curl -v -H "Authorization:Bearer RF0v0RHpUPmvcdplqcrFNoaO86zMI7UQGy8k7EN79xiRJpo6IAN5umDwpae4ouuUkt8MNLK80DjRuYSx14t7OEUbJyxzAZ8z8WxnXBX5gkQC2FhXicKWVXwictLqqxfN" \
    -H "Accept: application/json" -H "Content-type: application/json" -X POST localhost:5200/api/v1/channels/ \
    -d '{
            "is_public"         : "false",
            "is_direct_message" : "true",
            "name"              : "Public01",
            "owner_account_ids" : ["7b5f0e50fdc011e3acbb22000a7c8883"],
            "account_ids"       : ["7b5f0e50fdc011e3acbb22000a7c8883","7b5f0e50fdc011e3acbb22000a7c8884"]
        }'


****** infos
Params
    company_id        user.company_id
    name              body.name
    description       body.description
    account_ids       body.account_ids
    owner_account_ids [user.account_id]
    is_public         body.is_public
    created_by        user.account_id

***** update(PUT: /:id)
****** command
curl -v -H "Authorization:Bearer w8QizD6E9vk1PsaClxI0Oq5I07oeSBN9XhnFnK8oIyFivsZ2Ehn6gXKYwVHnIDMr8WSU4dnogd2P4yO1guM9dgQPane1lFrEHLZ40PNb3KeSStywgy6FEVgvmuSDEcC0" \
    -H "Accept: application/json" -H "Content-type: application/json" \
    -X PUT localhost:5200/api/v1/channels/57f604c575c82e79cc7d3917 \
    -d '{"name":"Public01--------",
         "description":"description---------",
         "owner_account_ids": ["7b732aa2fdc011e3acbb22000a7c8883", "7b732aa2fdc011e3acbb22000a7c8886"],
         "is_public":true}'

curl -v -H "Authorization:Bearer RF0v0RHpUPmvcdplqcrFNoaO86zMI7UQGy8k7EN79xiRJpo6IAN5umDwpae4ouuUkt8MNLK80DjRuYSx14t7OEUbJyxzAZ8z8WxnXBX5gkQC2FhXicKWVXwictLqqxfN" -H "Accept: application/json" -H "Content-type: application/json" \
    -X PUT localhost:5200/api/v1/channels/57f604c575c82e79cc7d3917 \
    -d '{"name":"Public01",
         "description":"description",
         "owner_account_ids": ["7b5f0e50fdc011e3acbb22000a7c8883","7b5f0e50fdc011e3acbb22000a7c8884","7b5f0e50fdc011e3acbb22000a7c8885"],
         "is_public":"true"}'

****** infos
オーナーのみ操作可
ユーザの管理は別のアクションで扱う

- Params
    name              body.name
    description       body.description
    owner_account_ids body.owner_account_ids
    is_public         body.is_public

****** assumption
- owner_account_idsは, 配列に全データが入っていると想定.
  故に, 既存データを上書きする. (過去のデータが消失する)
***** delete(DELETE: /:id)
****** command
curl -v -H "Authorization:Bearer RF0v0RHpUPmvcdplqcrFNoaO86zMI7UQGy8k7EN79xiRJpo6IAN5umDwpae4ouuUkt8MNLK80DjRuYSx14t7OEUbJyxzAZ8z8WxnXBX5gkQC2FhXicKWVXwictLqqxfN" \
    -X DELETE \
    localhost:5200/api/v1/channels/57f604c575c82e79cc7d3917

****** infos
オーナーのみ操作可

***** subscribe(POST: /:id/subscribe)
****** command
- owner
    curl -v -H "Authorization:Bearer qqhVcDLUr86izfDL5xQ1wUR03sUOUajFMmNLtFcQipbafUSSZgSVIMVxjEGdyalYeSKnSU60lxwUHUqJG1aYIfAwAwcsgh51Byxj5aJHeCjZFoXJpJfradoKDa70IaUV" \
         -H "Accept: application/json" -H "Content-type: application/json" \
         -X POST localhost:5200/api/v1/channels/57f604c575c82e79cc7d3917/subscribe \
         -d '{"account_ids":["7b5f0e50fdc011e3acbb22000a7c8889"]}'

- common user
    curl -v -H "Authorization:Bearer RF0v0RHpUPmvcdplqcrFNoaO86zMI7UQGy8k7EN79xiRJpo6IAN5umDwpae4ouuUkt8MNLK80DjRuYSx14t7OEUbJyxzAZ8z8WxnXBX5gkQC2FhXicKWVXwictLqqxfN" \
        -H "Accept: application/json" -H "Content-type: application/json" \
        -X POST localhost:5200/api/v1/channels/57f604c575c82e79cc7d3917/subscribe

****** infos
チャンネルに参加する
オーナーの場合は別ユーザを参加させることが可能

****** assumption
- updated by owner
    - common_usersは配列
    - 存在しなければ追記

- updated by common user
    - common user id は, authenticateから
    - 存在しなければ追記

***** unsubscribe(POST: /:id/unsubscribe)
****** command
- owner
    curl -v -H "Authorization:Bearer qqhVcDLUr86izfDL5xQ1wUR03sUOUajFMmNLtFcQipbafUSSZgSVIMVxjEGdyalYeSKnSU60lxwUHUqJG1aYIfAwAwcsgh51Byxj5aJHeCjZFoXJpJfradoKDa70IaUV" -H "Accept: application/json" -H "Content-type: application/json" \
         -X POST localhost:5200/api/v1/channels/57f5ff1e74b94a7464d2c107/unsubscribe \
         -d '{"account_ids":["7b5f0e50fdc011e3acbb22000a7c8889"]}'

- common user
    curl -v -H "Authorization:Bearer RF0v0RHpUPmvcdplqcrFNoaO86zMI7UQGy8k7EN79xiRJpo6IAN5umDwpae4ouuUkt8MNLK80DjRuYSx14t7OEUbJyxzAZ8z8WxnXBX5gkQC2FhXicKWVXwictLqqxfN" -H "Accept: application/json" -H "Content-type: application/json" \
        -X POST localhost:5200/api/v1/channels/57f604c575c82e79cc7d3917/unsubscribe

****** infos
チャンネルから抜ける
オーナーの場合は別ユーザを退出させることが可能

****** assumption
- updated by owner
    - common_usersは配列
    - 当該account存在がすれば対象を削除

- updated by common user
    - common user id は, authenticateから
    - 当該account存在がすれば対象を削除

**** Done test
CLOSED: [2016-10-06 Thu 17:56]
***** [100%] index
- [X] all       : 取得不可であること
- [X] is_public : true
- [X] is_dm     : true
- [X] is_dm     : false

- [X] pagenate

***** [100%] create
- [X] normal

***** [100%] update
- [X] normal
- [X] other user

***** [100%] delete
- [X] normal
- [X] other user

***** [100%] subscribe
- [X] owner
- [X] other user
- [X] is_public false

***** [100%] unsubscirbe
- [X] owner
- [X] other user

**** spec
**** 質問事項
***** Done owner account id
CLOSED: [2016-10-06 Thu 08:37]
に存在するidは, account idにも書き込む必要があるか?

> フロント側でaccount_idsに突っ込むようにするのでAPI側で特別な対応は不要です。

*** Paused [API] MessageのCRUD作成
CLOSED: [2016-10-06 Thu 18:15]
https://bbank-devs.atlassian.net/browse/RUBYDEV-664

- [ ] まずは読む
- [ ] model作成


*** Done [#A] source一読
CLOSED: [2016-09-29 Thu 09:23] DEADLINE: <2016-09-16 Fri>

*** Done 環境設定
CLOSED: [2016-09-29 Thu 14:25]
- [ ] vagrant port 5200
- [ ] clone


*** [33%] roomの制御
- [X] まずは、room制御の実体験が必要だな
- [ ] 既存のコード見て追う
- [ ] どのroomへ送信するのか (UI側から情報付与すればいいか)

*** [ ] network
- [ ] これは既存の状態でok
- [ ] 他に何か chat 特有の構造が必要か?
- [ ] なんか、ことあるごとに grantしていた様な気がするがパフォーマンス的にどうなんだろう

*** [ ] join : namespace / chanel
- [ ] user情報から company を得る
- [ ] name space [company] へ入る
- [ ] room [user.channels] へ入る
    - [ ] 権限が付与されている room のみ
    - [ ] privateの扱いは?
    - [ ] room listの管理方法は?
    - [ ] 各room / userごとの権限付与の情報はどこへ?
- [ ] 各 room へ messageを送る (json dataで、room情報とmessageが必要 + α)

*** [ ] dispatch
- [ ] 何その api

*** [ ] ping
- [ ] ping interval
- [ ] ping response timeout inteval
- [ ] timeout時の retry間隔と回数。

*** [ ] 構文解析
- [ ] mention
- [ ] インライン
- [ ] 絵文字
     - [ ] 絵文字登録。使える範囲は?company? channel?
     - [ ] 登録に当たっての制限は? how many? which symbols?

*** [ ] room
- [ ] とりあえず slackの挙動を真似る? 見てみよう
- [ ] roomへのinvite / bye
- [ ] roomの管理者?
    - [ ] channelの削除、invite/bye制御などか？

*** [ ] UI デザイン
- [ ] とりあえず、slackをパクろう. で、まずは大枠から

*** [ ] 必要なAPI interface
- [ ] user名取得
    - [ ] user ID
    - [ ] 表示様の名前
    - [ ] avatar?
- [ ] 書き込み
- [ ] 読み込み
- [ ] channel一覧
    - [ ] name
    - [ ] その他情報 (?)
- [ ] 添付ファイル

*** [ ] 検索
- [ ] どんな検索?
- [ ] 全文検索だと…量によっては、うーん勉強が必要だな



*** 環境構築を考える
http://uorat.hatenablog.com/entry/2015/08/30/190613

**** LBは接続時だけ
- web socketは、client/server間で接続されるので、LBは不要
- 接続の最初だけLBを通すのがベター

**** ssl対応
なんかやってたので、対応できると思うが

*** Todo 基礎勉強
**** Done chat、web socket 基礎
CLOSED: [2016-07-13 Wed 15:03] SCHEDULED: <2016-07-13 Wed>
http://www.tettori.net/post/852/

- web socketで serverを立てる
- clientと session をはる
- clientからserverへ、Event name + msgを送る
- serverはevent nameにそった処理を行う (全体通知など)

**** Done socket, socket-io
CLOSED: [2016-07-13 Wed 15:50] SCHEDULED: <2016-07-13 Wed>

**** Done Redis. Pub/Sub.
CLOSED: [2016-07-13 Wed 16:06] SCHEDULED: <2016-07-13 Wed>

http://blog.katty.in/2272
***** https://blog.dakatsuka.jp/2011/06/19/nodejs-redis-pubsub.html
****** code
var sys        = require('sys');
var redis      = require('redis');
var subscriber = redis.createClient(6379, 'localhost');

subscriber.subscribe('hugo channel');
subscriber.on("message", function(channel, message) {
    sys.puts(channel + " :" + message);
});

subscriber.subscribe('huge channel');
subscriber.on("message", function(channel, message) {
    sys.puts(channel + " :" + message);
});

****** 要は
- redisの特定の channel へ subscribeで登録する
- client が、channel へ message を subscribeする
- channelへ登録している、subscriberへ全員へ messageが送信される
**** Done Name space room
CLOSED: [2016-07-13 Wed 17:50]
http://socket.io/docs/rooms-and-namespaces/#

- [X] io.connectで namespace指定. server / client ともに
- [X] 同一name space内でのみ通信可能. (pubsub設定が必要)
      name spaceの判定は、redis?が勝手にしてくれる
- [X] room spaceの指定は必要
      jsonに、msg / room名をつけて送れば、server側で判定可能
**** Done うちの sns appのdispatchって何してるの?
CLOSED: [2016-09-13 Tue 19:17] SCHEDULED: <2016-07-13 Wed>

* Project [#A] SNS | link preview                                     :bb:BB:
DEADLINE: <2016-10-07 Fri>
CLOCK: [2016-09-13 Tue 10:21]--[2016-09-13 Tue 11:18] =>  0:57

** Meatings
** base
** 環境 / 構築
** 疑問
** 要修正?
** roadmap
** todos
*** Todo [#B] update時にもscraping行くように修正.
https://bbank-devs.atlassian.net/browse/RUBYDEV-682

*** Paused [#D] serverが落ちた際の、queueの復旧
CLOSED: [2016-09-29 Thu 14:13]
queue create側が落ちると、resultが得られないみたいだが
うーん、どんな問題が出るだろうか

*** Done [#A] 投稿者によってscraping不可
CLOSED: [2016-09-26 Mon 13:13] SCHEDULED: <2016-09-26 Mon>
CLOCK: [2016-09-26 Mon 09:55]--[2016-09-26 Mon 10:28] =>  0:33

log取得のため, 小針さんへ1度試行していただくように依頼中.

**** from kobari san
- http://bbank.jp
- 沼沢が投稿するとok

**** 調査
- [X] log確認
  { "_id" : ObjectId("57e86c45a70c9366d62236a4"), "contents" : "http://bbank.jp", "group_id" : "__all__", "posted_by" : "8dd29aa46dbf11e688fc060bd67abbd1", "company_id" : "1cfe99164ee511e6a50b060bd67abbd1", "embeds" : [ ], "attachments" : [ ], "comments" : [ ], "likes" : [ ], "updated_at" : ISODate("2016-09-26T00:31:08.970Z"), "created_at" : ISODate("2016-09-26T00:31:01.714Z"), "__v" : 0 }
  { "_id" : ObjectId("57e86c91a70c9366d62236b5"), "contents" : "http://bbank.jp", "group_id" : "__all__", "posted_by" : "8dd29aa46dbf11e688fc060bd67abbd1", "company_id" : "1cfe99164ee511e6a50b060bd67abbd1", "embeds" : [ ], "attachments" : [ ], "comments" : [ ], "likes" : [ ], "updated_at" : ISODate("2016-09-26T00:32:24.041Z"), "created_at" : ISODate("2016-09-26T00:32:17.069Z"), "__v" : 0 }
  { "_id" : ObjectId("57e86ca6a70c9366d62236bf"), "contents" : "http://bbank.jp", "group_id" : "ece7646a6dc011e69149060bd67abbd1", "posted_by" : "8dd29aa46dbf11e688fc060bd67abbd1", "company_id" : "1cfe99164ee511e6a50b060bd67abbd1", "embeds" : [ ], "attachments" : [ ], "comments" : [ ], "likes" : [ ], "updated_at" : ISODate("2016-09-26T00:32:45.680Z"), "created_at" : ISODate("2016-09-26T00:32:38.554Z"), "__v" : 0 }

**** 予想
- 小針さんが, updateをかけている
    - 根拠は, queueが受け取っているdataが, http://.bbank.jp
- 何らかの文字列を受け取った際に, URL解析toolが変なaddressを返す

*** Done [#A] scraping Timeout
CLOSED: [2016-09-28 Wed 17:01] SCHEDULED: <2016-09-26 Mon>
CLOCK: [2016-09-26 Mon 10:30]--[2016-09-26 Mon 13:59] =>  3:29

https://bbank-devs.atlassian.net/browse/RUBYDEV-681

**** [100%] 暫定対処としては
- [X] scraping time out設定
- [X] retry設定
- [X] retry時の待機時間
- [X] 環境変数変更

**** [33%] PR
- [X] 依頼
- [ ] crusibe終了
- [ ] ticket

**** [%] 環境変数設定
maxScrapingURL:       process.env.MAX_SCRAPING_URL      || 1,    // times
ScrapingTimeOut:      process.env.SCRAPING_TIME_OUT     || 4000, // msec
ScrapingRetryTimes:   process.env.SCRAPING_RETRY_TIMES  || 4,    // times
ScrapingBackoffTime:  process.env.SCRAPING_BACKOFF_TIME || 3000

- [ ] staging
- [ ] pre-release
- [ ] production

**** u-n
- [ ] metaphorへ出すか?
- [ ] なぜ yahooで弾かれるのか?

*** Done [#A] 先方へお伝えたへ
CLOSED: [2016-09-23 Fri 15:02]
*** Done [#A] notificationから飛んだ際に, embed, image, fileを表示
CLOSED: [2016-09-23 Fri 15:02] DEADLINE: <2016-09-23 Fri>

https://bbank-devs.atlassian.net/browse/RUBYDEV-672
https://bbank-devs.atlassian.net/browse/RUBYDEV-677

*** Done [#A] spec
CLOSED: [2016-09-23 Fri 13:22]
CLOCK: [2016-09-15 Thu 15:30]--[2016-09-15 Thu 17:10] =>  1:40
CLOCK: [2016-09-15 Thu 10:19]--[2016-09-15 Thu 15:01] =>  4:42

review待ち

https://bbank-devs.atlassian.net/browse/RUBYDEV-627

**** create
- [ ] feed
    - [ ] ref exist on feed
    - [ ] ref exist on embed
    - [ ] embed data (あるURLのdata)
- [ ] comment
    - [ ] ref on comment
    - [ ] ref on embed
    - [ ] embed data (あるURLのdata)
- [ ] feed / comment
    - [ ] ref on feed / comment id
    - [ ] ref on embed (feed and comment)
    - [ ] embed data (2種URLのdata)
**** update
- [ ] feed
    - [ ] ref on feed
    - [ ] ref on embed
    - [ ] embe data
- [ ] comment
    - [ ] ref on feed
    - [ ] ref on embed
    - [ ] embe data

**** delete
- [ ] feed
    - [ ] ref on feed
    - [ ] ref on embed
    - [ ] embe data
- [ ] comment
    - [ ] ref on feed
    - [ ] ref on embed
    - [ ] embe data
- [ ] feed / comment (URL2種)
    - [ ] ref on feed
    - [ ] ref on embed
    - [ ] embe data

*** Done [#A] Commentへの対応
CLOSED: [2016-09-23 Fri 13:22]
https://bbank-devs.atlassian.net/browse/RUBYDEV-620

- [X] feed / comment削除時, 参照削除
- [X] UI : comment delete処理
- [X] UI : comment update処理
- [X] UI : UI調整
- [X] server : bind to comment
- [X] server : ctrl create comment : push to queue
- [X] server : model comment : addEmbed removeEmbed
- [X] server : model comment : add embed property

*** Done [#A] deploy wiki更新
CLOSED: [2016-09-13 Tue 19:13]

*** Done [#A] feed削除時
CLOSED: [2016-09-13 Tue 19:10]
- [X] 関連するembed collectionから削除する.

*** Done [#A] Deploy to prerelease / production
CLOSED: [2016-09-12 Mon 14:37]
月曜07時?
とりあえず, やること確認中

*** Done [#A] worker : link_extractor refactoring + eslint
CLOSED: [2016-09-09 Fri 20:48]
https://bbank-devs.atlassian.net/browse/RUBYDEV-626

- promise化

*** Done [#A] Deploy to staging
CLOSED: [2016-09-12 Mon 14:37] SCHEDULED: <2016-09-09 Fri>

- [X] 各種修正
- [X] rebase

- [X] deploy to ruby-dev
- [X] review依頼
- [X] 竹中さんへ通知

- [X] 修正があれば対応

- [X] sns : merge mst to stg
- [X] allin : cherry-pick mst to stg
- [ ] deploy : allin
- [X] deploy : sns to staging

- [X] stg   : update env var in restart.sh
- [X] pre   : update env var in restart.sh
- [X] prd01 : update env var in restart.sh
- [X] prd02 : update env var in restart.sh

*** Done [#A] UI : 削除処理 design
CLOSED: [2016-09-08 Thu 20:22]
https://bbank-devs.atlassian.net/browse/RUBYDEV-651

- design考える
- ただのバツマークだと味気ない

*** Done [#A] log吐き出し
CLOSED: [2016-09-09 Fri 12:44]
https://bbank-devs.atlassian.net/browse/RUBYDEV-622

- NODE_PATH=app 追加
- npm run 修正
- deploy時のファイル修正も必要
- console.logをlog吐き出しに変更

*** Done [#A] Deploy
CLOSED: [2016-09-09 Fri 18:20]
https://bbank-devs.atlassian.net/browse/RUBYDEV-652

- restart.sh
  環境変数追加

*** Done [#A] 環境変数
CLOSED: [2016-09-09 Fri 10:15]
test/develop以外を、環境変数から読み込めるように設定

*** Done [#A] scraping : 環境変数化にする : scrape cache time
CLOSED: [2016-09-08 Thu 16:12]

*** Done [#A] UI : 文字列切り詰め
CLOSED: [2016-09-08 Thu 19:41]

https://bbank-devs.atlassian.net/browse/RUBYDEV-639

- 末尾に...
- 100文字?

*** Done [#A] scrapingするURL数に制限を
CLOSED: [2016-09-08 Thu 15:07]
https://bbank-devs.atlassian.net/browse/RUBYDEV-623

- 1~3くらいが妥当だろうな
- 環境変数に


*** Done [#A] worker : parse失敗時 / 404
CLOSED: [2016-09-07 Wed 17:54]
- 動作確認
- 他に何か気にする点はあるかな

*** Done [#A] scraping : max retry / timeout時間設定
CLOSED: [2016-09-07 Wed 17:59]
https://bbank-devs.atlassian.net/browse/RUBYDEV-628

*** Done [#A] complete taskの削除
CLOSED: [2016-09-07 Wed 19:09]
https://bbank-devs.atlassian.net/browse/RUBYDEV-621

その他、溜まったログの削除
*** Done [#A] server : main sourceへ書き込み
CLOSED: [2016-09-06 Tue 19:01]
- 当該コードを入れる場所の特定
- create直後に差し込み
    - 必要な情報は?
        - [X] pub/sub情報
        - [X] feed/comment type
        - [X] recordのID
        - [X] group name?

- create時に必ずQueueに追加することになるが..少し考えてみよう
  いずれにせよtext analyzeはするので、裏で動かしたほうがいいか

*** Done [#A] UI : 削除処理
CLOSED: [2016-09-06 Tue 18:52]
https://bbank-devs.atlassian.net/browse/RUBYDEV-619

- [X] nodejs
    - [X] 削除メソッド追加 - feed
    - [X] 参照がなくなったら, embed削除

- [X] angular
    - [X] UI部分の実装
    - [X] 削除通知

- [X] 見直し
    - [X] error箇所

*** Done [#A] UI : update処理の追加
CLOSED: [2016-08-31 Wed 15:22]
CLOCK: [2016-08-31 Wed 10:29]--[2016-08-31 Wed 17:18] =>  6:49

https://bbank-devs.atlassian.net/browse/RUBYDEV-618

おそらく部分update可能なので、方法を調査

- web socket
  - 送信するデータは?
    - とりあえず、updateをかける通知
    - とりあえず、1feed丸ごとupdate
      可能であれば、部分update
  - ID?

- angular側の受付方

*** Done [#A] UI : 画像sizeで表示方法を変更する
CLOSED: [2016-08-31 Wed 20:46] SCHEDULED: <2016-08-31 Wed>
CLOCK: [2016-08-31 Wed 17:18]--[2016-08-31 Wed 20:46] =>  3:28

- [X] how to geometry
- [X] aspect比を保存
- [X] aspect比が一定以上の場合は、horizontal. より下の場合は、vertical

*** Done [#A] UI : Kueのredis対応
https://bbank-devs.atlassian.net/browse/RUBYDEV-642

*** Done [#A] UI : 大筋のembed領域の作成.
CLOSED: [2016-08-30 Tue 17:51]
https://bbank-devs.atlassian.net/browse/RUBYDEV-617

- [X] 領域生成
- [X] デザイン (Facebookを踏襲)

*** Done [#A] 竹中さんへの説明資料まとめ, 作成
CLOSED: [2016-08-18 Thu 18:02]
*** Done [#A] sample UI 作成
CLOSED: [2016-08-18 Thu 09:20] SCHEDULED: <2016-08-17 Wed>

*** Done [#A] worker : bind to feed
CLOSED: [2016-08-17 Wed 16:21]
- [X] feed model修正
- [X] bind

*** Done [#A] server / workerに分ける
CLOSED: [2016-08-15 Mon 18:58]
- server / wokerに分けた際のdataのやり取りは?
  kueを通して可能

- server / workerの役割は?
  - server
    - workerへのtext出力
    - scraping結果があった場合、update処理をかける
  - worker
    - text 解析
    - scraping
    - data保存

- file構成は?
  lib/task
  後はrailsを踏襲

*** Done [#A] server : body parse
CLOSED: [2016-08-15 Mon 18:58]
とりあえず基本
*** Done [#A] server : url 正常化
CLOSED: [2016-08-15 Mon 18:58]
- なんかpackageあるかな
- 全角スペースは半角スペースへreplace
- normalizeを通す
*** Done [#A] server : craete job
CLOSED: [2016-08-16 Tue 17:51]
- kue

*** Done [#A] server : result処理
CLOSED: [2016-08-16 Tue 17:51]
- data形式は, 更新が必要か否かで十分か
- true or false

*** Done [#A] worker : cache check
CLOSED: [2016-08-16 Tue 17:03]
- cacheがあれば、DB上にある対象embedのuuidを得る
- 上記、feed / commentへ紐付ける

*** Done [#A] worker : parse / metaphor
CLOSED: [2016-08-16 Tue 17:03]
- うーん
- いろいろ問題がありそうだが
*** Done [#A] worker : parse結果保存
CLOSED: [2016-08-16 Tue 17:57]
uuidをfeed/commentへ紐付ける

**** embed
***** base
- created_at
  必須

- updated_at
  必須

- [X] site_name
  必須

- [X] url
  必須

- [X] title
  なければ出力しない

- [X] description
  なければ出力しない

- [X] favicon_url
  なければ、http://~/favicon.icoを入れる

- [X] image_url
  dataにあれば使う

***** 未使用
- thumbnail
- embed

*** Done [#A] worker : result
CLOSED: [2016-08-16 Tue 17:47]
- 更新された場合は、true
- 更新不要の場合は、false

*** Done [#A] angularJS : data出力test
CLOSED: [2016-08-09 Tue 13:12] SCHEDULED: <2016-08-09 Tue>

**** body構造
~/programs/allin_test/allin/app/views/groupware/sns/_feeds.html.slim
~/programs/allin_test/allin/app/views/groupware/sns/_feeds_body.html.slim

_feeds.html.slimで、各所呼び出してるっぽい

*** Done [#B] UI : sass refactoring
CLOSED: [2016-09-08 Thu 19:41]
*** Done [#B] cacheにdataがあるか確認処理
CLOSED: [2016-08-16 Tue 18:10]
- cacheにdataがあれば、scrapingにいかない
- そもそも、cache用の領域を持たずに、urlとcreated_atをみにいけばいい.
  hitすれば, もっとも新しい data のuuidを返す

*** Done [#D] worker : comment対応
CLOSED: [2016-09-13 Tue 19:12]
https://bbank-devs.atlassian.net/browse/RUBYDEV-620

- [ ] comment model修正
- [ ] bind

*** Done [#D] worker用のnpm run
CLOSED: [2016-09-13 Tue 19:12]
- deployのあたりみてちょっと考えよう
- なんなら竹中さんに相談を

*** Done [#D] catchのerror周り
CLOSED: [2016-09-13 Tue 19:12]

*** Done comment不具合
CLOSED: [2016-09-26 Mon 19:40] SCHEDULED: <2016-09-23 Fri>

- [X] まずは確認から
- [X] 小針さんへ確認依頼中

*** Done [#G] 4.5 : url調査
CLOSED: [2016-09-13 Tue 19:17] DEADLINE: <2016-06-07 Tue>

- text中のURLの自動link
- と、link先の自動preview

**** meating
***** [2016-06-07 Tue]
- auto linkは実装
- previewは保留
    -- 確認不足な点が多い
    -- client sideで対象siteを読みに行く方が良い(slackなども、そういう動き?)
    -- real timeの情報が欲しい? (facebookなどを参考に動作検証する必要がある.)
**** Done 工数見積もりから
CLOSED: [2016-06-07 Tue 11:11]
- package探査
- 要件もちっと不明だしな
- angularだけで対応できるか? bower周りかな
bower周りかな、まぁ大丈夫だおr

うーん、10日くらいかなー
色々試しが必要だし

**** 要件
- url textをlinkにしたい
- slackみたいに、記事の一部表示、画像

**** 課題
***** cache data
- とりあえず30分dataを保持
- dataの消し方は... cronにするか

- 全dataをDBに保存

***** 本データの持ち方
- textなどは DB
- 画像はどうする? S3に持たせるか

- metaphorのdataの出し方確認
- mongoDBでjsonで型不定で保存できたっけ

***** cache/DBへの保存
metaphorの結果保存時どうするか
面倒なので、cache保存して、cacheから読み出すにすれば簡略化できるか

***** 保存ファイルにはどんな形式があるか / DB構造を考える
とりあえずどんなデータが取れるか実験してみよう

- text
- image
- movie

***** angular
- 専用の表示領域の作成
- blankの場合は非表示に
***** update用のapiが必要
- angular
- nodejs

***** Done 構文解析のmoduleが必要
CLOSED: [2016-08-09 Tue 10:12]
- 探すか

***** 各種packageの使い方学習と調査
- metaphor
- kue
- 構文解析 linkify

***** UI側で表示する際のformat
さて、どうしたものか
ひとまずは、吐き出してくれるhtmlを利用
movie埋め込みとかもできそうなんだが、どうするかな
そこまで考えると面倒そうだ

で、そこを考えるとdataの保存方法はどうするかな
結構量が多いぞ

***** metaphorでdataが得られない際の挙動を確認
- error?
- null? undefined?
***** serverからUIへdataを渡す際のformat
出力方法でいろいろ変わってきそうだな

***** html link 表示削除
編集画面で Xボタンでもつけてやるか
**** Done auto link
CLOSED: [2016-06-15 Wed 12:20]
すぐ対応可能
angularに機能あり。
ただ、試行不足。

- aungularjs reference
  https://docs.angularjs.org/api/ngSanitize/filter/linky

- todos
    - [ ] allin側code修正
    - [ ] 動作test
        - [ ] 書き込みtest
    - [ ] spec追加?

**** research : oembed
***** 名称
https://api.slack.com/docs/unfurling

slackでは [unfurling links]
embedly?

***** security
無条件に何でも読みに行っていいものなのか?

***** 用語
****** og
open graph
http://d.hatena.ne.jp/amachang/20110117/1295233078

****** oembed
https://syncer.jp/oembed-api-matome

***** package
****** metaphor
slackとの出力の照合が必要だが
今の所 nodejs側ではこれが一番良さそう

**** research : link
これに関しては、UI側で生成した方がいい様に思えるが...
うーん

***** angularjs : official function
https://docs.angularjs.org/api/ngSanitize/filter/linky

***** example
~/programs/allin_sns/allin-sns-ops/allin/app/views/groupware/sns/
      span ng-bind-html="feed.contents | linky:'_blank'"

***** background task
参考サイト
http://qiita.com/masato/items/fbe503dbf34e7cfd2fe3

kueが良さそう?
https://github.com/Automattic/kue#processing-jobs

*** Done analyze packge調査
CLOSED: [2016-08-09 Tue 10:12] DEADLINE: <2016-08-09 Tue>

https://github.com/SoapBox/linkifyjs

*** Paused [#B] worker : UTF-8以外のエンコードに対応する
CLOSED: [2016-09-12 Mon 14:39]
https://bbank-devs.atlassian.net/browse/RUBYDEV-641

example
http://www.find-job.net/list/j108426.html

現状無理

*** Paused [#B] [66%] mongo dB : model追記
CLOSED: [2016-09-08 Thu 16:35]
- [X] embed model作成
- [X] feedへ、embed modelへの参照を持たせる
- [ ] commentへ、embed modelへの参照を持たせる
      とりあえず、feedを見てのfeedback待ち



* Project [#B] experiments
Added: [2015-06-17 Wed 10:41]

ELBの実験
単一az subnetのみに属する場合、
上記とは異なるsubnetのEC2 instanceを使用できるか? (自動で追加されるか?)

* Project [#C] aws account初期設定/sercurityの考察
Added: [2015-06-16 火 13:22]
初期設定時、必要な設定

http://recipe.kc-cloud.jp/archives/7973
http://dev.classmethod.jp/cloud/aws/after_get_aws_account/

- cloud tail (操作記録)
- 佐藤氏曰く、共通ssh keyはNG
- 個人accountを作成し、誰がloginしたか分かるように
  active domainなど


* Project [#D] uniqlo repository 整理 / capistrano
Added: [2015-06-29 Mon 15:45]

どれが何をやっているのか把握
capistrano整理

* Project [#D] 死活監視 : scriptまとめ
Added:      [2015-11-05 Thu 16:32]
*** cloudwatch custom metrics | official
**** 公式 custom metrics追加script
- file
  http://aws.amazon.com/code/8720044071969977

- 使い方
  http://docs.aws.amazon.com/ja_jp/AmazonCloudWatch/latest/DeveloperGuide/mon-scripts.html

perl baseっぽい
**** 適当に展開
~/script/aws/

**** CPAN setting
- CPAN install
  http://ll.just4fun.biz/Perl/CPAN/CPAN%E7%92%B0%E5%A2%83%E3%82%92%E6%A7%8B%E7%AF%89%E3%81%99%E3%82%8B.html

- install LWP::Protocol::https

**** 実行
perl ./mon-get-instance-stats.pl --aws-credentail-file ./awscreds

*** custom metrics user
perl /home/ec2-user/aws-scripts-mon/mon-put-instance-data.pl --aws-credential-file=/home/ec2-user/aws-scripts-mon/awscreds --mem-util --mem-used --mem-avail --swap-util --swap-used --disk-path=/dev/xvda1 --disk-space-util --disk-space-used --disk-space-avail

* Project [#D] route 53 フェイルオーバー
Added: [2015-06-25 Thu 17:32]
調べよう
http://docs.aws.amazon.com/ja_jp/ElasticLoadBalancing/latest/DeveloperGuide/configure-dns-failover.html

* Project [#D] server監視設定
Added: [2015-08-25 Tue 00:59]

- [ ] jenkins
  - [ ] cloud watch, notify mail
  - [ ] app 監視, soft要選定
  - [ ] log rotate

- [ ] redmine (未稼働)
  - [ ] cloud watch, notify mail
  - [ ] app 監視, soft要選定
  - [ ] log rotate

- [ ] gitlab + (gitlab aws)
  - [ ] cloud watch, notify mail
  - [ ] app 監視, soft要選定
  - [ ] log rotate

- [ ]ruby-webpage
  - [ ] : zabbix
  - [ ] : munin
  - [ ] : Auto Scale。使用不可。opswork独自の監視機能を用いる。
          App,Instance監視をする。
          癖を見る必要がある。
          練習がてらやろう
  - [ ] : 監視(障害メール)と自動復旧

  - [ ] cloud watch, notify mail
  - [ ] app 監視, soft要選定
  - [ ] log rotate


*** [57%]todos
- [X] : create prd stack
- [X] : jenkins : change stack/app id
- [X] : opsworks: setup/deploy.
- [X] : opsworks: move EIP
- [ ] : opsworks: munin-node start setting
      - regist chkconfig
      - upload
      - restart munin-node
- [ ] : jenkins : change cron setting
- [ ] : sg      : 特定sgのみアクセス許可
- [ ] : munin   : base setting. 正常動作確認
- [ ] : docker  : basic auth setting and make image

* Project [#D] letter_opener_web
Added: [2015-08-07 Fri 19:40]

- mynavi seminar serverへ設定
- かといって、実際に送信されてしまうと怖いので
  セットアップの練習を別環境で行う必要がある。

* Project [#D] RDS and read replica 調査
Added: [2015-06-17 Wed 14:42]

- Master / slaveのフェイルオーバー時間の実験
- read replicaが停止した際は?
  masterを読み行く? 自動であれ?

* Project [#E] bower                                                 :uniqlo:
Added: [2015-06-18 Thu 12:25]

以下を参考に、uniqloのbowerを再考
http://qiita.com/joker1007/items/8d2fa9960f3d53b8cb57


* Done [#A] インフラ冗長化
CLOSED: [2016-09-29 Thu 12:25]
** Meatings
** base
** 環境 / 構築
*** 既存環境
https://bbank-devs.atlassian.net/wiki/display/ALLIN/System+layout

** 疑問
*** 冗長化するのはどれ?
- [X] alli
- [X] sns
- [X] mail server

*** 具体的に冗長化ってどんなイメージ?
*** mail serverってどれだ
** 要修正?
** roadmap
*** base
- 冗長構成の設計＆構築＆テスト
- Allin／SNS／メールサーバ

** meating
** todos
終わったのかな?

* Done [#A] uniqlo security update                                   :uniqlo:
CLOSED: [2016-05-31 Tue 16:21] DEADLINE: <2016-05-31 Tue>
:PROPERTIES:
:ARCHIVE_TIME: 2016-03-22 Tue 13:24
:ARCHIVE_FILE: ~/.org/gtd/todo.org
:ARCHIVE_OLPATH: projects
:ARCHIVE_CATEGORY: todo
:ARCHIVE_TODO: Project
:END:

securiy updateを適用して切り分ける。

** Meatings
*** [2016-03-16 Wed]

** road map
** base
*** road map
https://docs.google.com/spreadsheets/d/1uEiI2SFBPv-Z_WgswEhY24NnGe3Z3THCCzRZhmCDbRk/edit#gid=1069237278

+ [ ] 3/17：feedとcommentのクラス化
    + [ ] 親クラス名の決定
        + [ ] communication
            - [ ] feed
            - [ ] comment
            - [ ] messsage
    + [ ] 親クラスの作成
        - [ ] feedの子クラス化
        - [ ] commentの子クラス化
+ [ ] 3/16〜3/27：テスト
    + [ ] feature
        - [ ] APIテスト
        - [ ] 認証テスト
        - [ ] アクセス制御テスト
    + [ ] モデル
*** 参考サイト
http://dev.classmethod.jp/cloud/cve-2015-7547-aws/

*** Linux packages
まずは内容確認と、依存性確認

- glibc
  https://alas.aws.amazon.com/ALAS-2015-617.html

- 使ってたか? nss
  https://alas.aws.amazon.com/ALAS-2015-608.html

- ntp
  https://alas.aws.amazon.com/ALAS-2015-607.html

- libwmf
  https://alas.aws.amazon.com/ALAS-2015-604.html

- openldap
  https://alas.aws.amazon.com/ALAS-2015-599.html

- libxfont
  https://alas.aws.amazon.com/ALAS-2015-597.html

- usermode, libuesr
  https://alas.aws.amazon.com/ALAS-2015-572.html

- openssl
  https://alas.aws.amazon.com/ALAS-2015-564.html

** env
*** deploy
*** 仮想開発環境 apps environment
server : 1.x.x
db     : 1.x.x
bower  : 1.x.x

*** development
*** staging
*** production

** 疑問
- [ ] title :: msg
- [ ] title :: msg
- [ ] title :: msg
- [ ] title :: msg
- [ ] title :: msg


** todos
*** Done release branchへmerge
CLOSED: [2016-05-31 Tue 12:38] SCHEDULED: <2016-05-30 Mon>

*** Todo deplo 手順書
**** production
- [X] backup

***** [100%] uniqlo-hashtag
- [X] run deploy
  $ cd uniqlo-hashtag
  $ cap production deploy


- [X] ssh to server
  // 踏み台サーバーへ
  $ ssh  alliance@54.65.232.249 -i ~/.ssh/uniqlo_influencer_gateway.pem

  // admin serverへ
  $ ssh mruby@app-admin

  // rails current dirへ
  $ cd /var/rails/influencer/current/

  // image fileの移動
  $ cp -r ./vendor/assets/fonts/* ./public/assets/

***** [100%] uniqlo-hashtag-main
- [X] productionのみの作業
  最低3台へのdeployが必要となる。
  server IP確認方法などは以下ファイルを参照。
  [ deploy_prd_auto_scaling.txt]

  ※ capistranoには基本サーバーのIPのみ記述されている。
  ※ 以下ファイルのIPを書き換えることで、deploy対象serverを変更可能

  ※ ./config/deploy/production.rb
  ※ ----------------------------------------------------------------
  ※ 37行目 : server '10.184.17.202', user: 'www', roles: %w[app web db],
  ※ ----------------------------------------------------------------

- [X] run deploy
  $ cd uniqlo-hashtag-main
  $ cap production deploy


- [X] server上での手動作業なし
  接続する際は以下
  $ ssh members@54.250.223.60 -i ~/.ssh/members_gateway.pem
  $ ssh www@prd_user

- [X] file copy

***** [100%] uniqlo-hashtag-main AS1
- [X] productionのみの作業
  最低3台へのdeployが必要となる。
  server IP確認方法などは以下ファイルを参照。
  [ deploy_prd_auto_scaling.txt]

  ※ capistranoには基本サーバーのIPのみ記述されている。
  ※ 以下ファイルのIPを書き換えることで、deploy対象serverを変更可能

  ※ ./config/deploy/production.rb
  ※ ----------------------------------------------------------------
  ※ 37行目 : server '10.184.17.202', user: 'www', roles: %w[app web db],
  ※ ----------------------------------------------------------------

  10.184.23.124

- [X] run deploy
  $ cd uniqlo-hashtag-main
  $ cap production deploy


- [X] server上での手動作業なし
  接続する際は以下
  $ ssh members@54.250.223.60 -i ~/.ssh/members_gateway.pem
  $ ssh www@prd_user

- [X] file copy

***** [100%] uniqlo-hashtag-main AS2
- [X] productionのみの作業
  最低3台へのdeployが必要となる。
  server IP確認方法などは以下ファイルを参照。
  [ deploy_prd_auto_scaling.txt]

  ※ capistranoには基本サーバーのIPのみ記述されている。
  ※ 以下ファイルのIPを書き換えることで、deploy対象serverを変更可能

  ※ ./config/deploy/production.rb
  ※ ----------------------------------------------------------------
  ※ 37行目 : server '10.184.17.202', user: 'www', roles: %w[app web db],
  ※ ----------------------------------------------------------------

  10.184.18.133


- [X] run deploy
  $ cd uniqlo-hashtag-main
  $ cap production deploy


- [X] server上での手動作業なし
  接続する際は以下
  $ ssh members@54.250.223.60 -i ~/.ssh/members_gateway.pem
  $ ssh www@prd_user

- [X] file copy

***** [100%] uniqlo-hashtag-cron
- [X] run deploy
  $ cd uniqlo-hashtag-cron
  $ cap production deploy


- server上での手動作業
----------------------------------------------------------------
  $ ssh members@54.250.223.60 -i ~/.ssh/members_gateway.pem
  $ ssh ssh www@prd_batch
  $ cd /var/rails/influencer/current/

- [X] basic 認証設定
  $ vim config/settings/production.yml

  user / passを以下へ編集
  ----------------------------------------------------------------
  api_server:
  api_schema: 'http://'
  api_endpoint: <%= ENV['API_ENDPOINT'] %>
  api_basic_auth_user: uniql0inf7uencer
  api_basic_auth_password: uniql0mysty7e
  ----------------------------------------------------------------


- [X] rails 再起動
  $ kill `cat tmp/pids/unicorn.pid`
  $ RAIL_ENV=production bundle exec unicorn_rails -c config/unicorn.rb -E production -D


- [X] twitter daemon再起動
  $ ps aux | grep TwitterStreamingDaemon
  $ 当該PIDを削除
  $ daemonを再起動

  ※ 当daemonは、一分毎に起動状態管理を行なっている。
  ※ 通常、process削除後、自動起動する。
  ※ ただし、Twitter APIのアクセス制限により、
  ※ 数十分access不可となり起動できないケースがある

  // 手動で起動する場合は以下
  RAILS_ENV=production bundle exec rails runner TwitterStreamingDaemon.run run

  // もしくは
  $bash /var/rails/influencer/script/sns/twitter_stream.sh

**** Done AMI /AS group更新作業
CLOSED: [2016-05-31 Tue 16:19]
***** 作業server
admin server

Instance   :  i-b04fa8a8
host       :  prd01-a-tky-admin-influencer-uniqlo
Private IP :  10.184.17.202

***** 1 : ELB(AS)配下のinstance抽出
****** instance ID取得
aws elb describe-instance-health --load-balancer-name prd01-tky-influencer-uniqlo --region ap-northeast-1

****** 対象instanceの Private IPを取得
aws ec2 describe-instances --instance-ids i-2789f185 --region ap-northeast-1|grep PrivateIpAddress
aws ec2 describe-instances --instance-ids i-9a13fc3f --region ap-northeast-1|grep PrivateIpAddress

# instance IDは適宜修正

***** 2 : AMI作成用instanceを起動
- 起動状態確認
  aws ec2 describe-instances --instance-ids i-2744a33f --region ap-northeast-1

- 起動/終了コマンド
  aws ec2 stop-instances --instance-ids i-2744a33f --region ap-northeast-1
  aws ec2 start-instances --instance-ids i-2744a33f --region ap-northeast-1

***** 3 : deploy
Image元instance及び、項番1の全Instanceへdeploy

***** 4 : AS Group作成
# 恐らく、AMI作成とAS group更新を行なっているが
# job更新が即時反映されている
# 恐らく裏でAMI作成など、jobが走っていると予想。

****** AMI作成用Instance stop
aws ec2 stop-instances --instance-ids i-2744a33f --region ap-northeast-1
aws ec2 describe-instances --instance-ids i-2744a33f --region ap-northeast-1
# Statusが「stopped」になってから続行

****** AS group更新
curl -X post -u lifewear:09dbca3c43da1f7d39af9ec9febbd2d6 \
    -s http://jobcontroller.aws.fastretailing.com/jenkins/job/lifewear_infra_update_asg/build \
    --data TOKEN=lifewear-admin

****** Job結果確認
curl -X get -u lifewear:09dbca3c43da1f7d39af9ec9febbd2d6 \
    -s http://jobcontroller.aws.fastretailing.com/jenkins/job/lifewear_infra_update_asg/lastBuild/api/json \
    --data TOKEN=lifewear-admin












**** Done 確認サイト
CLOSED: [2016-05-31 Tue 16:19]
https://admin-lifewear.uniqlo.com/admin/sign_in
https://lifewear.uniqlo.com/form/ja

https://lifewear.uniqlo.com/people/jeans
http://www.uniqlo.com/us/special/lifewear/jeans/
http://www.uniqlo.com/us/special/lifewear/oxfordshirts/
http://www.uniqlo.com/us/special/lifewear/linenshirts/
http://www.uniqlo.com/us/special/lifewear/piquepolo/


**** 1
{
  "actions": [
    {
      "causes": [
        {
          "shortDescription": "Started by user lifewear",
          "userId": "lifewear",
          "userName": "lifewear"
        }
      ]
    },
    {},
    {},
    {}
  ],
  "artifacts": [],
  "building": false,
  "description": null,
  "displayName": "#17",
  "duration": 85,
  "estimatedDuration": 92,
  "executor": null,
  "fullDisplayName": "lifewear_infra_update_asg #17",
  "id": "17",
  "keepLog": false,
  "number": 17,
  "queueId": 39464,
  "result": "SUCCESS",
  "timestamp": 1435202035156,
  "url": "https://jobcontroller.fastretailing.com/jenkins//job/lifewear_infra_update_asg/17/",
  "builtOn": "mng01-jenkins-infra",
  "changeSet": {
    "items": [],
    "kind": null
  },
  "culprits": []
}

**** 2
{
  "actions": [
    {
      "causes": [
        {
          "shortDescription": "Started by user lifewear",
          "userId": "lifewear",
          "userName": "lifewear"
        }
      ]
    },
    {},
    {},
    {}
  ],
  "artifacts": [],
  "building": false,
  "description": null,
  "displayName": "#18",
  "duration": 56,
  "estimatedDuration": 79,
  "executor": null,
  "fullDisplayName": "lifewear_infra_update_asg #18",
  "id": "18",
  "keepLog": false,
  "number": 18,
  "queueId": 1457865,
  "result": "SUCCESS",
  "timestamp": 1464676993763,
  "url": "https://jobcontroller.fastretailing.com/jenkins//job/lifewear_infra_update_asg/18/",
  "builtOn": "mng01-jenkins-infra",
  "changeSet": {
    "items": [],
    "kind": null
  },
  "culprits": []
}

*** Done Gemanasium
CLOSED: [2016-05-26 Thu 15:00] SCHEDULED: <2016-05-26 Thu>

再確認

*** Done Rails
CLOSED: [2016-05-26 Thu 15:00]
4.2.6にしたほうがいい？

*** Done Bug fix : 絞り込みが不正
CLOSED: [2016-05-26 Thu 15:02]

**** 内容
編集時、sns accountがblankの場合、nil値で保存されない。
結果、値が空だが、絞り込み検索に値がありととして出力される。

**** 修正済み
blankの場合、nilへ変換

*** Done Bug fix : 256文字
CLOSED: [2016-05-26 Thu 15:39]

**** desc
uniqlo commentが、256文字入力からエラーとなる。
(想定は100文字以上)

**** 修正内容

*** Done 2.2.5 install
CLOSED: [2016-05-27 Fri 17:26]
- [X] : stg-admin
- [X] : stg-user
- [X] : stg-sns

- [X] : prd-admin
- [X] : prd-user
- [X] : prd-sns

*** Done unWIP
CLOSED: [2016-05-27 Fri 17:56]

*** Done review
CLOSED: [2016-05-30 Mon 11:38]

@y-shibata @m-kubo
お疲れ様です。
以下、security updateのMRになります。
ご確認お願いいたします。

https://git.ruby-dev.jp/uniqlo/uniqlo-hashtag/merge_requests/27
https://git.ruby-dev.jp/uniqlo/uniqlo-hashtag-main/merge_requests/15
https://git.ruby-dev.jp/uniqlo/uniqlo-hashtag-crontab/merge_requests/10


*** Done [#A] update及び、状態確認
CLOSED: [2016-05-30 Mon 11:39]
**** uniqlo-hashtag
***** 対象
|---+----------------------+---------+----------------------------------+-------------------------------------------------------------------------------------------------|
|   | gem                  | current |                            fixed | require                                                                                         |
|---+----------------------+---------+----------------------------------+-------------------------------------------------------------------------------------------------|
| x | ruby                 |   2.2.2 |                            2.2.4 |                                                                                                 |
| x | rails                |   4.2.3 |                          4.2.5.1 |                                                                                                 |
| x | devise               |   3.5.1 |                            3.5.5 |                                                                                                 |
| x | uglifier             |   2.7.1 |                            2.7.2 |                                                                                                 |
| x | nokogiri             | 1.6.6.2 |                          1.6.7.2 | (Required by loofah, rails-dom-testing)                                                         |
| x | actionpack           |   4.2.0 |                4.2.5.1, 4.1.14.1 | (Required by kaminari, rails, railties, rspec-rails, slim-rails, sprockets-rails, actionmailer) |
| x | actionview           |   4.2.0 | 5.0.0.beta1.1, 4.2.5.1, 4.1.14.1 | (Required by rails, actionpack, actionmailer)                                                   |
| x | activemodel          |   4.2.0 | 5.0.0.beta1.1, 4.2.5.1, 4.1.14.1 | (Required by activerecord, email_validator, rails, web-console)                                 |
| x | activerecord         |         |      4.2.5.1, 4.1.14.1, 3.2.22.1 |                                                                                                 |
| x | rails-html-sanitizer |   1.0.2 |                            1.0.3 | (Required by actionview, actionpack)                                                            |
|---+----------------------+---------+----------------------------------+-------------------------------------------------------------------------------------------------|

***** test
- rspec
  OK

- 動作テスト
  以下を元に

***** 手順
bundle update rails
bundle update uglifier
bundle update devise

**** main
***** 対象
|---+----------------------+---------+----------------------------------+-------------------------------------------------------------------------------------------------|
|   | gem                  | current |                            fixed | require                                                                                         |
|---+----------------------+---------+----------------------------------+-------------------------------------------------------------------------------------------------|
|   | ruby                 |   2.2.2 |                            2.2.4 |                                                                                                 |
|   | rails                |   4.2.3 |                            4.2.2 |                                                                                                 |
|   | uglifier             |   2.7.1 |                            2.7.2 |                                                                                                 |
|   | nokogiri             | 1.6.6.2 |                          1.6.7.2 | (Required by loofah, rails-dom-testing)                                                         |
|   | actionpack           |   4.2.0 |                4.2.5.1, 4.1.14.1 | (Required by kaminari, rails, railties, rspec-rails, slim-rails, sprockets-rails, actionmailer) |
|   | actionview           |   4.2.0 | 5.0.0.beta1.1, 4.2.5.1, 4.1.14.1 | (Required by rails, actionpack, actionmailer)                                                   |
|   | activemodel          |   4.2.0 | 5.0.0.beta1.1, 4.2.5.1, 4.1.14.1 | (Required by activerecord, email_validator, rails, web-console)                                 |
|   | activerecord         |         |      4.2.5.1, 4.1.14.1, 3.2.22.1 | (Required by rails)                                                                             |
|   | rails-html-sanitizer |   1.0.2 |                            1.0.3 | (Required by actionview, actionpack)                                                            |
|---+----------------------+---------+----------------------------------+-------------------------------------------------------------------------------------------------|

***** 手順
bundle update rails
bundle update uglifier

**** crontab
***** 対象
|---+----------------------+---------+----------------------------------+-------------------------------------------------------------------------------------------------|
|   | gem                  | current |                            fixed | require                                                                                         |
|---+----------------------+---------+----------------------------------+-------------------------------------------------------------------------------------------------|
|   | ruby                 |   2.2.2 |                            2.2.4 |                                                                                                 |
|   | rails                |   4.2.3 |                            4.2.2 |                                                                                                 |
|   | uglifier             |   2.7.1 |                            2.7.2 |                                                                                                 |
|   | nokogiri             | 1.6.6.2 |                          1.6.7.2 | (Required by loofah, rails-dom-testing)                                                         |
|   | actionpack           |   4.2.0 |                4.2.5.1, 4.1.14.1 | (Required by kaminari, rails, railties, rspec-rails, slim-rails, sprockets-rails, actionmailer) |
|   | actionview           |   4.2.0 | 5.0.0.beta1.1, 4.2.5.1, 4.1.14.1 | (Required by rails, actionpack, actionmailer)                                                   |
|   | activemodel          |   4.2.0 | 5.0.0.beta1.1, 4.2.5.1, 4.1.14.1 | (Required by activerecord, email_validator, rails, web-console)                                 |
|   | activerecord         |         |      4.2.5.1, 4.1.14.1, 3.2.22.1 | (Required by rails)                                                                             |
|   | rails-html-sanitizer |   1.0.2 |                            1.0.3 | (Required by actionview, actionpack)                                                            |
|---+----------------------+---------+----------------------------------+-------------------------------------------------------------------------------------------------|

***** test
****** spec
******* local
|------+-------+-----+------+-------------------------------------|
| ruby | rails | gem | res  |                                     |
|------+-------+-----+------+-------------------------------------|
|      |       |     | fail | 11 examples, 7 failures             |
| *    | *     | *   | fail | 11 examples, 7 failures(same error) |
|------+-------+-----+------+-------------------------------------|

******* gitlab
こちらでは通る
***** 手順
bundle update rails
bundle update uglifier

*** Done [#A] security update 事前準備
CLOSED: [2016-05-30 Mon 11:39]
- update Gemfile Gemfile.lock

- upate deploy.rb
  修正点確認

- PR x3

- 動作確認
  さて、確認資料がないがどうする?
  とりあえず、さっとやるか

*** Done [#A] security update事前準備 : 本番環境
CLOSED: [2016-05-30 Mon 11:39]
- ruby 2.2.5をinstall

*** Todo 責任区分の確認
**** インフラ担当の変更
もともと、NTT dataがインフラ担当していたが、
他担当に引き継がれた様子。

**** 引き継ぎ先
- nnetwork 成田さん
- FR infra team

**** 責任区分
責任区分を全く把握していないので、確認が必要。

***** linux package security関連
nnetworks成田さん曰く、FRインフラチームが担当
> セキュリティ対応は通常、FRインフラチーム様でのご対応としております

*** Todo prd auto-update無効
インフラチーム?へ相談が必要。
恐らく影響あるのは、auto-scale serverだけだと思うが...

*** Todo udpate後
手順考察要考察
**** 1 : $ reboot
rebootした方が早い

**** 2 : 個別に再起動する。プロセスを特定する
updateの前にglibcを使用しているプロセスを確認する
$ lsof | grep 'libc-'

update後にメモリ上の古いglibcを使用しているプロセス確認する
$ lsof -d DEL | grep 'libc-'

*** Done 試験環境でのupdate後のtest
CLOSED: [2016-05-30 Mon 11:39]
[2016-02-25 Thu] テストは途中まで実施。引き続きテストを要する

**** check sheet
https://docs.google.com/spreadsheets/d/1A_uHVZotqVb380-18MI2UN_kEENpqOvqe52RK8ViSoE/edit#gid=0

**** 問題点
- twitter / instagram での絞り込みが動かない
  angularのversionは同一だったが…
  awsへあげて試してみるか

*** Paused [#B] NTT data 問い合わせ
CLOSED: [2016-05-30 Mon 11:37] SCHEDULED: <2016-04-28 Thu>

NTT data中山様に問い合わせ
NTT dataからの返信がない。
2月中は待ちで

返事無いのでみんな放置してる


*** Done dev, stg, prd
CLOSED: [2016-02-18 Thu 16:46]
auto updateが無効か確認していないので
要確認。

全部ON

*** Done dev, stg auto-update無効
CLOSED: [2016-02-18 Thu 16:46]

*** glibc production update - influencer                       :uniqlo:
**** required version | update指針
glibc-common                        x86_64                  2.17-106.166.amzn1                     amzn-updates                   28 M
glibc-devel                         x86_64                  2.17-106.166.amzn1                     amzn-updates                  1.1 M
glibc-headers                       x86_64                  2.17-106.166.amzn1                     amzn-updates                  735 k
nss-softokn-freebl                  x86_64                  3.16.2.3-13.37.amzn1                   amzn-main                     229 k

stg, devで、対象versionへupdateされることを確認済み。(実際にupdateはしていない)
動作は未検証。

他にもglic関連のpackageは存在するが、上記3種のみinstalled。
nssについては、glibcの依存package。
network securityに関連する様子。

**** post | 情報源
http://dev.classmethod.jp/cloud/cve-2015-7547-aws/

- AWS DNS以外を使用している、EC2に影響がある。
- RDSやS3など、AWSのマネージドサービスは影響ありません。

**** update対象
$ yum update glibc


========================================================================================================================================
 Package                             Arch                    Version                                Repository                     Size
========================================================================================================================================
Updating:
 glibc                               x86_64                  2.17-106.166.amzn1                     amzn-updates                  5.7 M
Updating for dependencies:
 glibc-common                        x86_64                  2.17-106.166.amzn1                     amzn-updates                   28 M
 glibc-devel                         x86_64                  2.17-106.166.amzn1                     amzn-updates                  1.1 M
 glibc-headers                       x86_64                  2.17-106.166.amzn1                     amzn-updates                  735 k
 nss-softokn-freebl                  x86_64                  3.16.2.3-13.37.amzn1                   amzn-main                     229 k

**** nss-softokn-freeblとは
https://www.rpmfind.net/linux/rpm2html/search.php?query=nss-softokn-freebl
https://developer.mozilla.org/ja/docs/NSS


*** Paused uniqlo 資料読み返し
CLOSED: [2016-10-18 Tue 08:19] SCHEDULED: <2016-06-03 Wed>

なんか
あまり細かくやらなくていいそうだが


**** are kore
- 連絡は?
- flowは
- 何をupdateするのか
  https://docs.google.com/document/d/1xTOINFyCnxOBohY-NfbHTn71RfNePqbxP7Mwv7z18ro/edit

- どこまでupdateするのか?
- 依存関係は?
- version up 方法
  http://qiita.com/joker1007/items/82db0b5d1a7f2572710b

https://docs.google.com/spreadsheets/d/1st-FQDu98UmNAuZQmzmFN6mKFZInbPZwGeSVN4-uMog/edit#gid=0

* Done [#A] [100%] 静的サイト | S3 + AWSコンソール + サブドメイン :organic_style:
CLOSED: [2015-11-10 Tue 18:49]
Added: [2015-10-22 Thu 10:38]
DEADLINE: <2015-11-10 Tue>

*** 要件
- 昔ながらの手法みたいに、FTPで上げて静的ページを管理したい
- up, deleteなどできればよい
- sub domainで管理したい (元は、sub dirという要件だった)

*** 期限
phase1 releaseの、[2015-11-05 Thu]
遅くとも、[2015-11-09 Mon]の週中

*** Done [100%] S3 bucket 作成
CLOSED: [2015-11-09 Mon 19:59]
- [X] bukect作成

*** Done [100%] S3 / Route3
CLOSED: [2015-11-09 Mon 19:59]
- [X] domain紐付け

*** Done [100%] upload test
CLOSED: [2015-11-09 Mon 19:59]
- [X] ok
*** Done [100%] 動作テスト
CLOSED: [2015-11-09 Mon 19:59]
- [X] 単純html
- [X] link
- [X] css/image読み込み

*** Done account作成
CLOSED: [2015-11-09 Mon 19:21]
専用アカウント

manatuku-s3
zaesaiKaemieL3oo

*** Done 資料作成
https://drive.google.com/drive/folders/0ByHzvhUxlVRLSGF1bldWdHFyMzg

*** Done 提出
CLOSED: [2016-03-30 Wed 10:50]
柴田さんへ報告済み
返答待ち

終わったら、どこかのタイミングでnginxの設定を変更。
先方へ展開?

* Done [#A] AWS : 設定変更                                    :organic_style:
CLOSED: [2015-11-10 Tue 19:01]
Added:      [2015-10-22 Thu 12:01]

*** Done [#A] [100%] AWSサーバの秘密鍵の変更
SCHEDULED: <2015-10-23 Fri> CLOSED: [2015-10-23 Fri 12:21]

- [X] setting : development
- [X] setting : staging
- [X] setting : production

*** Done [#D] [81%] AWSのengraphiaアカウントの削除
SCHEDULED: <2015-10-23 Fri> CLOSED: [2015-11-05 Thu 16:33]

- [X] confirm : AWSログインし、IAMアカウントを確認
      問題なし
      engraphiaのアカウント、10/15にログイン履歴あり
      credencialの利用履歴無し

- [X] question
    - [X] IAMユーザー?
          返答無し

- [X] IAM削除
      10/15にログイン形跡有り
      crediantial keyの利用履歴無し
      以上から問題ないと判断

- [X] IAM作成
       https://organicstyle.signin.aws.amazon.com/console
      ruby-dev
      oon1Eetaezohch8i

- [X] setting : development
      - [X] delete : mail address
            アカウント削除できなかったので、mail address 上書き

      - [X] change : aws ssh key
            - [X] 既存authorized_key backup to ~/backup
            - [X] create new key
            - [X] server stop, AMI, set new key
            - [X] login確認 root
            - [X] login確認 ec2-user
      - [X] change : linux user : ssh key
            - [X] root     : 不要
            - [X] ec2-user : 不要
            - [X] ssh copy to user manatsuku
            - [X] login確認 manatusuku
      - [X] change : linux user
            変更不要

      - [X] change : elastic IP
      - [X] serverへのhttpアクセス確認

      172.31.0.10
      52.68.91.92
      devel.manatuku.com
      keypair
      VPC vpc-8e70a0eb

- [X] setting : staging
      - [X] delete : mail address
            アカウント削除できなかったので、mail address 上書き
      - [X] change : aws ssh key
            - [X] 既存authorized_key backup to ~/backup
            - [X] create new key
            - [X] server stop, AMI, set new key
            - [X] login確認 root
            - [X] login確認 ec2-user
      - [X] change : linux user : ssh key
            - [X] root     : 不要
            - [X] ec2-user : 不要
            - [X] ssh copy to user manatsuku
            - [X] login確認 manatusuku
      - [X] change : linux user
            変更不要
      - [X] change : elastic IP
      - [X] serverへのhttpアクセス確認
      - 元設定
        172.31.16.90
        52.68.118.96

- [X] setting : production
      - [X] delete : mail address
            アカウント削除できなかったので、mail address 上書き

      - [X] change : aws ssh key
            - [X] 既存authorized_key backup to ~/backup
            - [X] create new key
            - [X] server stop, AMI, set new key
            - [X] login確認 root
            - [X] login確認 ec2-user
      - [X] change : linux user : ssh key
            - [X] root     : 不要
            - [X] ec2-user : 不要
            - [X] ssh copy to user manatsuku
            - [X] login確認 manatusuku
      - [X] change : linux user
            変更不要

      - [X] change : elastic IP
      - [X] serverへのhttpアクセス確認

- [X] IAM / ssh key
    - [X] upload : to goole
    - [X] slackで報告

- [X] Basic 認証
    - [X] prd
    - [X] stg
    - [X] dev

- [ ] source修正 : engraphis mail adress
- [ ] AWS : root account
      柴田さんへ相談済み。待ち
**** 要件
本番環境、STG環境から、
既存ベンダーのメールアドレスや、アカウントを削除する。
また、サーバーパスワード等を変更し、既存ベンダーがログイン出来ないようにする

*** Done [#A] [%] 報告
CLOSED: [2015-11-10 Tue 19:01]
全todo消化後、柴田さんに報告

* Done [#A] code climate security                             :organic_style:
CLOSED: [2016-02-01 Mon 19:07]
Added:      [2015-10-28 Wed 13:25]

以下の4項目（7箇所）指摘対応を行う

*** Done [#A] [100%] Denial of Service（2箇所）
CLOSED: [2015-10-28 Wed 16:05]
https://codeclimate.com/repos/55fb81066956804c82001c48/security?warning_type=Denial+of+Service


userからのアクセス(:param)をto_symすることで、overflowする。
問題は、symbolがGCされない事。
2.2以上では、GCされるが、場合によってはGCされないケースもある
http://fiveteesixone.lackland.io/2015/01/21/symbol-gc-ruby-2-2/
https://codeclimate.com/repos/55fb81066956804c82001c48/security?warning_type=Denial+of+Service
http://brakemanscanner.org/docs/warning_types/denial_of_service/

- [X] mail_preview
      columnに入る値が固定のため、whitelistを通した
      // codeclimateのread upのコードを流用

- [X] mail template
      そもそも、mail_templates_pathはどこからも呼ばれていない。
      idは、mail_templateのtable上のidを示すと思われるため、integer以外は無効とした
      // codeclimateのread upのコードを流用

*** Done [#A] [100%] Format Vailidation (1箇所）
CLOSED: [2015-10-28 Wed 16:52]
https://codeclimate.com/repos/55fb81066956804c82001c48/security?warning_type=Format+Validation

- [X] app/models/payment/credit_card.rb
      37行目
      接頭、末尾指定が必要。
      \A 接頭
      \z 末尾

      ^ $ ではNG
      http://qiita.com/kentana20/items/3f37bbc8eb04d9ce927d

*** Done [#B] [%] File Access（2箇所）
CLOSED: [2015-12-14 Mon 13:23] SCHEDULED: <2015-11-03 Tue>
https://codeclimate.com/repos/55fb81066956804c82001c48/security?warning_type=File+Access

- [ ] 1
- [ ] 2

*** Done [#A] [100%] Dynamic Render Path （2箇所）
CLOSED: [2015-11-03 Tue 16:09]
https://codeclimate.com/repos/55fb81066956804c82001c48/security?warning_type=Dynamic+Render+Path

- [X]  app/views/portal/bills/thanks.html.haml
- [X] app/views/portal/purchases/index.html.haml

https://www.owasp.org/index.php/Ruby_on_Rails_Cheatsheet
双方とも、同じ
= render @purchases@
ではなく、eachで描画する必要あり。

理由がいまいち分からない。user inputで特定のtemplate呼び出しが可能らしい?
が、他のhaml fileを参照すると、eachを使用しているため、これに習う。

* Done [#A] テストコード追加                                  :organic_style:
SCHEDULED: <2015-11-02 Mon> CLOSED: [2015-11-03 Tue 16:08]
Added:      [2015-10-28 Wed 13:26]

CodeClimateで、カバレッジが80%以下の対応。80%を上回るようにテストを記載する。
特にクレジット決算のところがかけてない。
https://codeclimate.com/repos/55fb81066956804c82001c48/coverage

*** Done [#A] app/models/payment/transaction/gmo_immediate_continue.rb        23.33%
CLOSED: [2015-11-01 Sun 16:42]
https://codeclimate.com/repos/55fb81066956804c82001c48/coverage/5620b588d55a35365b00ba96

*** Done [#A] app/models/payment/transaction/bank_transfer_continue.rb        30.43%
CLOSED: [2015-11-01 Sun 17:31]
https://codeclimate.com/repos/55fb81066956804c82001c48/coverage/5620b588d55a35365b00ba93

model bank_transferとほぼ同等のため、左記対象のspec流用。
呼び出しmodel部のみを修正 (BankTransfer から BankTransferContinue へ)

元の、bank_transfer へfailケースを追記

*** Done [#A] app/mailers/trainer_mailer.rb        30.77%
CLOSED: [2015-10-28 Wed 22:36]
https://codeclimate.com/repos/55fb81066956804c82001c48/coverage/5620b588d55a35365b00ba87

100%

*** Done [#A] app/controllers/portal/payments_controller.rb        54.55%
CLOSED: [2015-10-31 Sat 17:01]
https://codeclimate.com/repos/55fb81066956804c82001c48/coverage/5620b588d55a35365b00ba78


**** 洗い替え見処理で進めず
 if have_invalid_card
        CustomerMailer.notify_for_invalid_creditcard_solved(current_customer).deliver_later
      end
    end

**** APIErrorへ行く方法が思いつかず
  rescue ActiveRecord::RecordInvalid => e
    @error_messages = e.record.errors.full_messages
    @current_payment = current_customer.payment
    @payment = e.record
    render :new
  rescue SphyGmo::APIError => e
    @error_messages = e.messages
    @current_payment = current_customer.payment
    @payment = Payment.new(payment_params)
    render :new
  end
**** hash :payment_bank_transferを設定するも、:payment_credit_cardに落ちる
  def payment_params
    attrs = case
    when -> { params.has_key? :payment_credit_card }
      :payment_credit_card
    when -> { params.has_key? :payment_bank_transfer }
      :payment_bank_transfer
    else
      :payment
    end
*** Done [#A] app/jobs/base_job.rb        57.14%
CLOSED: [2015-10-31 Sat 12:10]
https://codeclimate.com/repos/55fb81066956804c82001c48/coverage/5620b588d55a35365b00ba82

*** Done [#A] app/controllers/trainer/customers_controller.rb  71.43%
CLOSED: [2015-10-31 Sat 10:27]
https://codeclimate.com/repos/55fb81066956804c82001c48/coverage/5620b588d55a35365b00ba7d

*** Done [#A] app/values/year_month.rb 75%
CLOSED: [2015-10-30 Fri 12:42]
https://codeclimate.com/repos/55fb81066956804c82001c48/coverage/5620b588d55a35365b00ba99

*** Done [#A] app/models/payment/transaction/gmo_monthly.rb 76.0%
CLOSED: [2015-10-30 Fri 14:50]
https://codeclimate.com/repos/55fb81066956804c82001c48/coverage/5620b588d55a35365b00ba97

微妙
csvのステータスコードやら、全体像から詳細まで
さっぱり見えていない

*** Done [#A] app/models/subscription_form.rb 78.13%
CLOSED: [2015-11-03 Tue 16:08]
https://codeclimate.com/repos/55fb81066956804c82001c48/coverage/5620b588d55a35365b00ba98

79%

*** Done [#A] app/decorators/trainer_profile_decorator.rb 80.0%
CLOSED: [2015-11-03 Tue 16:08]
https://codeclimate.com/repos/55fb81066956804c82001c48/coverage/5620b588d55a35365b00ba81

* Done [#A] テストコード再追加                                :organic_style:
CLOSED: [2016-02-01 Mon 19:07]
Added:      [2015-10-28 Wed 13:26]

*** Done [#A] app/controllers/trainer/customers_controller.rb  71.43%
CLOSED: [2016-02-01 Mon 19:07]
https://codeclimate.com/repos/55fb81066956804c82001c48/coverage/5620b588d55a35365b00ba7d

master merge後、全部落ちる様になった

*** Done [#A] app/decorators/trainer_profile_decorator.rb 80.0%
CLOSED: [2016-02-01 Mon 19:07]
https://codeclimate.com/repos/55fb81066956804c82001c48/coverage/5620b588d55a35365b00ba81

分からなかった
* Done [#A] PR出し直し                                        :organic_style:
SCHEDULED: <2015-10-27 Tue> CLOSED: [2015-10-27 Tue 15:34]
Added:      [2015-10-27 Tue 14:29]

rebase して上げ直す
との事だが、rebaseってどうやるんだ

*** gitlab msg
    1 : 講師機能：「顧客一覧」へのリンクを削除
        講師top pageから顧客一覧リンク削除
        顧客一覧へのroute削除
    2 : 講師機能：「注文・売上一覧」の検索条件を削除
        削除項目
            顧客名
            顧客名(カナ)
            電話番号(先頭一致)
            メールアドレス(先頭一致)
        URLへの直接入力すると検索可能。以下、例
            &q[customer_name_cont]=&q[customer_kana_cont]=
    3 : 講師機能：「注文・売上一覧」の一覧から項目を削除
        顧客名
    4 : 講師機能：「入金一覧」の注文・売上一覧から項目を削除
        顧客名
    5 : 講師機能：「入金一覧」の注文・売上一覧から項目を削除
        顧客名
    6 : 顧客情報が記述されたメールのbccから講師アドレスを削除
        講師bccが含まれる、以下3点から削除
            クレジットカード振込完了
            銀行振込承り
            銀行振込完了

*** command
 git cherry-pick 85fc9d1
 git cherry-pick  eae3af4
 git cherry-pick  ebb42f2
 git cherry-pick  cab46d8
 git cherry-pick  f900ccd
 git cherry-pick  88f5c7e
 git cherry-pick  a2da57e
* Done [#A] basic認証                                         :organic_style:
CLOSED: [2015-11-04 Wed 18:11]
Added:      [2015-11-04 Wed 09:46]

*** memo
**** url
http://localhost:3040/kokoroya_1mon1to/index.html

**** 要件
上記の一部URLを公開
**** Done [2016-03-16 Wed 22:46]
CLOSED: [2016-09-29 Thu 12:27]
Added: [2016-03-16 Wed 22:46]
asdfasdf
**** Done test [2016-03-16 Wed 22:46]
CLOSED: [2016-09-29 Thu 12:27]
Added: [2016-03-16 Wed 22:46]
test
**** Done [2016-03-16 Wed 22:48]
CLOSED: [2016-09-29 Thu 12:27]
Added: [2016-03-16 Wed 22:48]
test
**** Done [2016-03-16 Wed 22:48]
CLOSED: [2016-09-29 Thu 12:27]
Added: [2016-03-16 Wed 22:48]
test
*** Done stgでの適用
SCHEDULED: <2015-11-04 Wed> CLOSED: [2015-11-04 Wed 14:40]
*** Done prdへの適用
SCHEDULED: <2015-11-04 Wed> CLOSED: [2015-11-04 Wed 18:11]

NP.Sk+(*#x9W

- [X] backup AMI / RDS
- [X] mysqldump
- [X] deploy (with migrate)
- [X] migrate
- [X] nginx setting
    - [X] basic auth

- [X] クーポン設定

- [X] 動作確認
    - [X] static page
    - [X] クーポン

本番環境へのdeployしました。
ご確認お願い致します。

クーポン
https://manatuku.com/trainers/1/packages/1

static page
https://manatuku.com/kokoroya_1mon1to/

*** Done PR | review待ち
SCHEDULED: <2015-11-04 Wed> CLOSED: [2015-11-04 Wed 17:55]
- [X] どの点をhttpsにするのか確認
- [X] 修正し、PR
- [X] とりあえず、助田さんにassign。説明してないけど

merge確認済み

* Done [#A] domain設定
SCHEDULED: <2015-11-11 Wed> CLOSED: [2015-11-13 Fri 14:23]
Added:      [2015-11-11 Wed 14:01]

- [X] info.manatuku.com IN CNAME organicstyleco.mktoweb.com.
- [X] go.manatuku.com. IN CNAME mkto-ab150060.com.

- [X] manatuku.com. IN TXT "v=spf1 include:mktomail.com ~all"
- [X] m1._domainkey.manatuku.com. IN TXT v=DKIM1;k=rsa;p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCpE/aIAagGowgoNuv6ul33YnBmmF5a53oCyQuxNrLeRWqLg+qP3pzhxbKVyx11YCbq4WWbD6lQSL9eop4QJ9t2asJrWLzURFK5QG4MNtL4nV5hGBfYCc74Ao79cWf9WNSIk4QDmyVwBln10ZRz6ohFq0e3DfF3oKPDRLNp4Fa2kQIDAQAB
txt google._domainkey v=DKIM1; k=rsa; p=MIG***AB

- [ ] info.otogaku.com IN CNAME organicstyleco.mktoweb.com.
- [ ] go.otogaku.com IN CNAME mkto-ab150060.com.
* Done [#B] allin mail自動配信
CLOSED: [2016-09-29 Thu 12:31]
** Meatings
*** [2016-08-10 Wed]
**** ik

**** structure
既存
allin-web3
allin-web4

別のinstanceを別途作成
ELB
batch1
batch2
**** cron
- batch1
    job creater
    job runner
- batch2
    job runner
*** [2016-07-26 Tue]
**** 疑問 / 応答
- [X] 配信対象者となる条件
      従業員 + 顧客全て?
      アドレス帳

- [X] test用のaccあるか?
      柴田さんから頂戴したacc

- [X] やること
    - [X] 1userが複数の会社に所属 / 複数の事業所に所属
          使用通りの通数で送られるか?
          各会社で一通送られるとのこと

    - [X] 重複せずに送信できるか
          複数会社にまたがる場合にのみ、複数送信される

    - [X] 対象外から対象に戻した際の挙動
        送信されないか
        戻したあと対象になるか

    - [X] timingで増減した場合

    - [X] 絞り込んだ人たちへしっかり送られるか. 4種 (車内、社外、)

    - [X] 埋め込み文字

    - [X] 会社が異なって同じメールアドレスを使用すると、二通送られる
         その他のパターンでは重複した場合は、一通送られる

- [X] 自動配信
    - [X] 有効 / 無効
    - [X] 集客 / 見込み客 / 顧客 / リピーターは、顧客は変更できない

- [ ] ステップ配信
    - [ ]
    - [ ]

- [ ] 大量に送った場合のパフォーマンステスト
    - [ ] 本番でやりたい
    - [ ] 竹中さん曰く

*** Done [2016-06-20 Mon]
CLOSED: [2016-06-20 Mon 17:00]
CLOCK: [2016-06-20 Mon 16:00]--[2016-06-20 Mon 17:17] =>  1:17

**** Todos
***** 配信先データの抽出部分を実施する
***** 順番
****** phase1
- 売上日
    - 当日 / x日前後 / x月前後
 - 顧客管理
    - 当日 / x日前後 / x月前後

****** phase2
- 売上日
    - n週間前/後のx曜日
    - nヶ月前/後のx日
 - 顧客管理
    - n週間前/後のx曜日
    - nヶ月前/後のx日

****** phase3
- 営業支援
    - 当日 / x日前後 / x月前後 / n週間後のx曜日 / nヶ月ごのx日

**** ticket
https://bbank-devs.atlassian.net/browse/RUBYDEV-401
https://bbank-devs.atlassian.net/browse/RUBYDEV-403

**** wireframe
https://bbank-devs.atlassian.net/wiki/pages/viewpage.action?pageId=47743196&preview=/47743196/47743195/%E8%87%AA%E5%8B%95%E9%85%8D%E4%BF%A1%E3%83%A1%E3%83%BC%E3%83%AB.pdf

**** 参考PR
https://bbank-devs.atlassian.net/wiki/pages/viewpage.action?pageId=47743196&preview=/47743196/47743195/%E8%87%AA%E5%8B%95%E9%85%8D%E4%BF%A1%E3%83%A1%E3%83%BC%E3%83%AB.pdf

**** 配信先抽出方法の概要
https://bbank-devs.atlassian.net/wiki/pages/viewpage.action?pageId=47743196&preview=/47743196/47743195/%E8%87%AA%E5%8B%95%E9%85%8D%E4%BF%A1%E3%83%A1%E3%83%BC%E3%83%AB.pdf

**** description
- 自動配信
- 配信基準日と配信日

- 売上日から

- 誕生日 : その日
- statusがっっxに変わった時に送る
    - 見込み客から、顧客に変わったひ
    - 営業
- どの商品の売上日


- 月日を基準日にするボタン
  誕生日の時、年を除外する


- ruleがある



- selectable_type
- selectable_id

- use_month_day
   月日を基準にする

- base_data_schedule_type
  当日、x後前
  コメントみればわかる

- base_data_before_or_after
  何日後

- base_date_week_day
  翌週のx曜日

- on_day
  翌月x日


**** status変更日
- LoyaltyHistory
  ranked_at
  で日付が取れる

- Loyalty
  おそらく現在の状態

- customer
  顧客
  個人顧客 = person table
  法人    = contact table

  customer.individual = true 個人
  customer.corporate = true 法人

- recipiant
    mailjob
    loyalityHistory
    person or contact
  の3つを使って配列を作成

**** branch
develop-282からbranchを分けて、developへmerge

lib/mail_delivery

**** spec
特殊らしい

** road map
*** description
- 自動配信
- 配信基準日と配信日

- 売上日から

- 誕生日 : その日
- statusがxに変わった時に送る
    - 見込み客から、顧客に変わった日
    - 営業
- どの商品の売上日

- 月日を基準日にするボタン
  誕生日の時、年を除外する

- ruleがある



- selectable_type
- selectable_id

- use_month_day
   月日を基準にする

- base_data_schedule_type
  当日、x後前
  コメントみればわかる

- base_data_before_or_after
  何日後

- base_date_week_day
  翌週のx曜日

- on_day
  翌月x日


*** 担当
自動配信の配信基準日と配信日
配信先データの抽出部分を実装する

*** phase
**** phase1
- 売上日
    - 当日 / x日前後 / x月前後
 - 顧客管理
    - 当日 / x日前後 / x月前後

**** phase2
- 売上日
    - n週間後のx曜日 / nヶ月ごのx日
 - 顧客管理
    - n週間後のx曜日 / nヶ月ごのx日

**** phase3
- 営業支援
    - 当日 / x日前後 / x月前後 / n週間後のx曜日 / nヶ月ごのx日

*** ticket
https://bbank-devs.atlassian.net/browse/RUBYDEV-401
https://bbank-devs.atlassian.net/browse/RUBYDEV-403

*** wireframe
https://bbank-devs.atlassian.net/wiki/pages/viewpage.action?pageId=47743196&preview=/47743196/47743195/%E8%87%AA%E5%8B%95%E9%85%8D%E4%BF%A1%E3%83%A1%E3%83%BC%E3%83%AB.pdf

*** 参考PR
https://bbank-devs.atlassian.net/wiki/pages/viewpage.action?pageId=47743196&preview=/47743196/47743195/%E8%87%AA%E5%8B%95%E9%85%8D%E4%BF%A1%E3%83%A1%E3%83%BC%E3%83%AB.pdf


*** 配信先抽出方法の概要
https://bbank-devs.atlassian.net/wiki/pages/viewpage.action?pageId=52527113

- executeが呼ばれたら、条件に従いdata抽出
- 配列にして返す

**** RecipientExtractor
  MailDeliveryJobに従いMailDeliveryRecipientの抽出を行うクラス。

**** 責務
- コンストラクタでMailDeliveryJobを受け取る
- "execute"が呼ばれたらMailDeliveryJobに従いArray[MailDeliveryRecipient]を返す
  MailDeliveryJobと紐づくMailDeliverySettingやその親の設定に従い、
  mail_addressable
  base_dateableを抽出
  Array[MailDeliveryRecipient]
  を生成して返す必要がある。

**** sub class
***** SearchedRecipientExtractor
MailDeliverySettingの絞込条件にマッチするRecipientを抽出する(BBG様の絞り込み検索モジュール待ち)

***** UnsubscribeRecipientExtractor
配信停止中のRecipientを抽出する

***** Done [#B] PersonBirthdayRecipientExtractor
CLOSED: [2016-07-26 Tue 20:45]
基準日「誕生日」にマッチするRecipientを抽出する

***** Done [#A] CustomerStatusChangedRecipientExtractor
CLOSED: [2016-07-26 Tue 20:45]
基準日「顧客ステータス変更日」にマッチするRecipientを抽出する

***** Done [#A] ProductSoldRecipientExtractor
CLOSED: [2016-07-26 Tue 20:45]
基準日「売上日」にマッチするRecipientを抽出する

***** Done [#D] SaleStateChangedRecipientExtractor
CLOSED: [2016-07-26 Tue 20:46]
基準日「営業ステータス変更日」にマッチするRecipientを抽出する(仕様の確認が必要)

*** 抽出条件
**** base
***** table
- selectable_type
- selectable_id

- use_month_day
   月日を基準にする

- base_data_schedule_type
  当日、x後前
  コメントみればわかる

- base_data_before_or_after
  何日後

- base_date_week_day
  翌週のx曜日

- on_day
  翌月x日



**** 売上
ある商品の売上日

- その日
- x日前後
- x月前後

**** 顧客ステータス変更日
- 見込み客から、顧客に変わった日
- 営業

***** table
- LoyaltyHistory
  ranked_at
  で日付が取れる

- Loyalty
  おそらく現在の状態

- customer
  顧客
  個人顧客 = person table
  法人    = contact table

  customer.individual = true 個人
  customer.corporate = true 法人

- recipiant
    mailjob
    loyalityHistory
    person or contact
  の3つを使って配列を作成

**** 誕生日
- その日
- x日前後
- x月前後

- 月を基準日にするボタン
  誕生日の時、年を除外するためのボタン

*** branch
develop-282からbranchを分けて、developへmerge

*** source
**** root
lib/mail_delivery

**** file
CustomerStatusChangedRecipientExtractor
ProductSoldRecipientExtractor
PersonBirthdayRecipientExtractor

**** spec
*** spec
特殊らしい
とりあえず、現在のspecが通る様になればokと言ってたが
どこまで作成しているのかみていない。
期待はいしないでおこう

*** rails console
ObjectBasedAccessControl.login_as('kobari@bbank.jp')

** base
*** road map
https://docs.google.com/spreadsheets/d/1uEiI2SFBPv-Z_WgswEhY24NnGe3Z3THCCzRZhmCDbRk/edit#gid=1069237278

+ [ ] 3/17：feedとcommentのクラス化
    + [ ] 親クラス名の決定
        + [ ] communication
            - [ ] feed
            - [ ] comment
            - [ ] messsage
    + [ ] 親クラスの作成
        - [ ] feedの子クラス化
        - [ ] commentの子クラス化
+ [ ] 3/16〜3/27：テスト
    + [ ] feature
        - [ ] APIテスト
        - [ ] 認証テスト
        - [ ] アクセス制御テスト
    + [ ] モデル
        - [ ] feed
        - [ ] comment
        - [ ] attachment
        - [ ] allinAccount
    + [ ] ルート
        - [ ] WebAPI
+ [ ] 3//22：クライアントとの接続シーケンス（dispatch）の追加
+ [ ] 3/22：DBのインデックス設定
+ [ ] 3/22：AttachmentsController証明書の期限
+ [ ] 3/20〜3/22：セキュリティー
    + [ ] SQLインジェクション対応
        - [ ] create
        - [ ] read
        - [ ] update
        - [ ] delete
    + [ ] helmetの設定
    + [ ] crosの設定
    + [ ] 書籍からその他
+ [ ] WSの再接続
    + [ ] クライアント側
        - [ ] 初回接続時、ELBへ接続
        - [ ] disconnectを検出したら、接続先をELBへ戻して接続
    + [ ] サーバサイド
        - [ ] 必要な処理がないか確認する。
+ [ ] AttachmentsControllerの非同期処理の改善
+ [ ] 運用環境での動作確認
    - [ ] 3/22：ELBを使用すると、AngularJSの動作が変になる調査
    - [ ] 3/22〜3/25：プロダクション環境の構築
    - [ ] 3/28〜3/31：プロダクション環境での動作テスト
    - [ ] 4/1〜4/3：運用環境での負荷試験とセキュリティー試験
    - [ ] DBのバックアップは差分バックアップが可能か？

*** 参考サイト
http://gihyo.jp/dev/serial/01/nodejs

とりあえず、vagrantでのinstall方法を確認しつつ
各versionの固定方法。

** env
*** deploy
*** 仮想開発環境 apps environment
server : 1.x.x
db     : 1.x.x
bower  : 1.x.x

*** development
*** staging
*** production

** 疑問
- [ ] title :: msg
- [ ] title :: msg
- [ ] title :: msg
- [ ] title :: msg
- [ ] title :: msg

** info
*** mail jobの中身
必要とする情報

*** 配列objectの中身の作り方 / 型
- コンストラクタでMailDeliveryJobを受け取る

- "execute"が呼ばれたらMailDeliveryJobに従いArray[MailDeliveryRecipient]を返す
  - MailDeliveryJobと紐づくMailDeliverySettingや、その親の設定に従い
  - mail_addressable
  - base_dateableを抽出
  - MailJob?の三つの
  - Array[MailDeliveryRecipient]を生成して返す

*** 抽出条件確認
**** 「顧客ステータス変更日」での抽出方法

起点モデル = LoyaltyHistory"

以下の条件を全て満たす"LoyaltyHistory"を抽出する。
なお、created_atは日時なので「基準日」と「基準日+1日」の範囲で抽出する。

"loyalty_history.created_at"         >= "mail_delivery_setting.base_date"
"loyalty_history.created_at"          < "mail_delivery_setting.base_date + 1.day"
"loyalty_history.status_id"           = "mail_delivery_setting.base_dateable_id"
"loyalty_history.customer.company_id" = "mail_delivery_setting.company_id"

histories = LoyaltyHistory.where(["status_id = ? and ranked_at > ? and ranked_at <= ?", s, time, time+1.day])
histories.each {|history|
    history.loyalty.customer.company_id
}

**** MailBaseDateable
上記で抽出した"loyalty_history"

**** MailAddressable
"loyalty_history.customer.person"
"loyalty_history.customer.contacts"

*** データが取れるか確認
- データ投入
- 作成が必要?

*** テストはどうやって?
*** DB中身確認
**** Customer
***** accounts
ok
***** statuses
ok
***** LoyalityHistory
なし
いけそう

***** Loyality
なし
いけそう
customer_id = Loyalty.where(uuid:LoyaltyHistory.first.loyalty_id)[0].customer_id

***** Customer
なし
いけいそう
Customer.where(uuid:customer_id)

***** Contact
なし

***** Person
ok

Person.where(uuid:Loyalty.first.customer.customerable_id)

***** mail_delivery_recipient

**** Product
***** Product
作成できそう

***** SalesLine
ng
***** SalesDocument
ng
***** Customer
***** Contact
***** Person
*** polymophic
- [ ] ってなに？
    http://o.inchiki.jp/obbr/149

- [ ] allinでのデータ構造がいまいちわからん
    xxxable_id, xxxxable_typeがDB常に存在しない!
    Personをそのまま入れている
    など意味不明な点が多い。

** todos
*** Done [#D] signal | 佐藤さん判断で保留中
CLOSED: [2016-09-02 Fri 11:23] SCHEDULED: <2016-07-02 Sat>
CLOCK: [2016-07-03 Sun 20:40]--[2016-07-03 Sun 22:27] =>  1:47
CLOCK: [2016-07-02 Sat 12:40]--[2016-07-02 Sat 13:53] =>  1:13
CLOCK: [2016-07-02 Sat 10:04]--[2016-07-02 Sat 12:26] =>  2:22
https://bbank-devs.atlassian.net/browse/RUBYDEV-379

**** 要件
allin/lib/mail_delivery.rb
allin/lib/tasks/allin/mail_delivery.rake

signal処理で正常完了させる。
強制終了ではなくさせればok。

**** signal
SIGHUP (= 1, hangup) 端末終了時に発生。元来はモデムの受話器をあげて通信を切ったことから
SIGINT (= 2, interrupt) Control-C による中断
SIGTERM (= 15, termination) kill コマンドでシグナル無指定時に送られるプロセス終了シグナル

**** どう処理するのが適切?
***** exitでただ抜ける
この場合、処理が途中で終わる。

***** 例外を発生させる
勝手に適切に処理してくれる可能性もある。
が、基本動作がさっぱりわかっていない。

*** Done [#A] Mail 配信 QA
CLOSED: [2016-08-08 Mon 17:35] SCHEDULED: <2016-07-25 Mon>
CLOCK: [2016-07-27 Wed 10:32]--[2016-07-27 Wed 20:59] => 10:27

やりながら考えるか

**** 現状
***** 確認済み
- 配信3種がsend grid API送信可能か
- 自動配信 / ステップ配信での、基準日4種で送信可能か (誕生日は詳細)
    - 誕生日のみ月日基準も実施
- UIの簡易確認
- 簡単なうるう年のtest

***** 残
- [ ] 配信停止
      まずは仕様からだな
- [ ] ステップ配信での時系列に送信されるか (パターンを変えて)
- [ ] 各種、月日基準でのテスト ()
- [X] 配信無効状態での送信 (無効、有効期間外)
- [ ] 各UIの動作確認 (現状一部のみ)

- [ ] 自動、ステップの全基準日での、詳細チェック (現状では一部のみ実施)


**** 一斉配信
***** Done UI
****** [100%] 設定 : parent?
- [X] 新規作成 : 各種適切に入力、保存可能か
    - [X] タイトル
    - [X] UTF8のみ選択可能か
    - [X] 差出人アドレス
        - [X] 新規作成可能か
        - [X] 必須項目がブランクの場合、エラーとなり、エラー文言が表示されるか
        - [X] キャンセルボタンで画面が閉じるか. かつ設定は保存されないか
        - [#BUG] 差出人アドレスがプルダウンに表示されるか
            - 新規作成後、別の設定を選択すると、新規作成したアドレスを選択できない. 当該formに何か入力すると、reloadされ選択可能となる
    - [X] 返信先アドレス
    - [X] ヘッダ / フッダテンプレート
        - [X] 新規作成可能か
        - [X] 必須項目がブランクの場合、エラーとなり、エラー文言が表示されるか
        - [X] キャンセルボタンで画面が閉じるか. かつ設定は保存されないか
        - [X] プルダウンから選択したヘッダ / フッダテンプレートが適切に反映されるか
    - [X] [埋込文字選択] ボタン押下で、埋込タグ一覧が表示されるか
    - [X] 必須項目を入力せずに保存した場合、エラーとなり、各種エラー文言が表示されるか
- [X] 設定一覧
    - [X] 設定が一覧として表示されるか。各値が適切に表示されるか
    - [X] 項目を選択後、詳細画面が表示されること。また、各値が適切であること
    - [X] 基本情報、差出人、ヘッダ／フッタ押下で、開閉できるか
    - [X] [配信先 : 配信先数] が表示されること。当該項目押下で、配信先設定画面へ遷移すること
    - [X] [配信メール] が表示され、押下で、配信メール一覧画面へ遷移すること
    - [X] [X] ボタン押下で、詳細画面が閉じるか
    - [X] データ変更後、保存ボタンで変更を保存可能か
    - [X] 詳細画面にてデータ変更された後、保存せずに他の設定を開こうとした場合、画面遷移して良いかモーダルが表示されること。
        - [X] [はい] を選択した場合、変更は破棄され画面遷移すること。
        - [X] [いいえ] を選択した場合、変更は破棄されず、編集中の詳細画面へ戻ること (画面外を選択し場合、いいえと同じ挙動であるか)
- [X] ソート、フィルタリング
    - [X] 項目 : 適切にフィルタリング, ソートされるか (押下後表示される、全検索種を試行すること)
        - [#BUG] 文字コード (検索不可だが、現状UTF8のみなので良い)
            - 自動配信では、文字コード選択可能。一斉配信のみ文字コードのリストが表示されない
        - [X] 差出人アドレス
        - [X] 差出人名
        - [X] 返信先アドレス
        - [Bug?] 配信実績 (data作成後)
              値が出てこない
        - [X] 次回予約済時刻 (data作成後)
        - [X] 検索フォーム (タイトル、氏名、差出人アドレス、差出人名)
            - [#BUG] 今一動きがわからないが、そこそこ動作している
                - [;]で全て抽出される
                - s-numasawa+reply@ruby-dev.jpに対し[repl]でhitするが[reply]ではhit (左記、部分一致はNG。完全一致だとok)
    - [X] 複合条件でフィルタできること (簡易)
    - [#BUG] [;] [0%] [_] など入力し、適切に処理されるか
      ;で全て抽出される
- [X] pagenate (data作成後)
    - [X] 適切にページ移動し、データが表示されるか
- [X] コピー / 削除
    - [X] ある設定をコピー可能か、また内容が適切にコピーされ保存可能か
    - [X] ある設定を削除可能か。削除後、一覧から設定が消えるか
    - [X] 送信実績がある場合、削除できないこと (parent, childともに)
****** [100%] 配信先設定
- [X] list
    - [X] 配信対象全てが表示されるか (アドレス帳の全員)
    - [X] 送信対象 / 対象外が切り替え可能か (対象外は、送信されないこと)

- [X] ソート、フィルタリング
    - [X] 項目 : 適切にフィルタリング, ソートされるか
        - [X] 氏名
        - [X] メールアドレス
        - [X] 種別
        - [X] 顧客担当部門
        - [X] 顧客ステータス
    - [X] [;] [0%] [_] など入力し、適切に処理されるか
        [;]のみエラーとなる

- [X] pagenate
    - [X] 適切にページ移動し、データが表示されるか

****** [100%] 配信メール設定 : children
- [X] 一つの親のみに紐づき、設定が反映されること (送信時に確認)

- [X] 新規作成 : 各種適切に入力、保存可能か
    - [X] 件名
    - [X] textメール本文
    - [X] HTMLメール本文
    - [X] 配信日時
        - [X] カレンダーが表示され、日付押下で適切な値が入力されるか
        - [X] プルダウンから、00:00〜23:45間で15分間隔で設定可能か
    - [X] 配信中止ボタンを有効/無効できるか
    - [X] 必須項目が未入力の場合、エラーとなり、エラー文言が表示されるか
        - [X] 現在時刻から1時間後の時刻を設定すること。反する場合、エラーとなるか

- [X] 設定一覧
    - [X] 各項目、値が適切に表示されるか
    - [X] 項目を選択後、詳細画面が表示されること。また、各値が適切であること

- [X] ソート、フィルタリング
    - [X] 送信ステータスでのフィルタ
        - [X] すべて
        - [X] 中止
        - [X] 送信済み
        - [X] 未送信
    - [X] 項目 : 適切にフィルタリング, ソートされるか
        - [X] 件名
        - [X] 日時
            - [X] start/endが前後した場合は?
                  検索結果0
        - [X] 検索フォーム (件名)
    - [X] [;] [0%] [_] など入力し、適切に処理されるか
        [;] のみすべてが検索された

- [X] pagenate
    - [X] 適切にページ移動し、データが表示されるか
    - [X] [>] [<] で 1page移動されるか
    - [X] [>>] [<<] で 末尾移動されるか

- [X] コピー / 削除
    - [X] ある設定をコピー可能か、また内容が適切にコピーされ保存可能か
    - [X] ある設定を削除可能か。削除後、一覧から設定が消えるか
    - [X] 送信実績がある場合、削除できないこと

***** [100%] 文字数
- [X] タイトル : 128
- [X] footer / header : 65535
- [X] subject   : 128
- [#Bug] txt body  : 65535
    model validationはかかるが、angular側で validationかかっていない
- [#Bug] html body : 65535
    model validationはかかるが、angular側で validationかかっていない

- [X] html/txt bodyへ最大文字数いれて送信できるか? (sendgrid)
- [#Bug] 各種検索フォーム / 各種フィルタフォーム
      大量の文字列入力でエラーになる

***** [100%] 送信
- [X] 24時間の間で、4時間区切り

***** [100%] 本文, header, footer, subject, など
入力した内容が、保存、メールに適切に反映されるか
英数字、全角文字、xss codeなど

- [X] header
- [X] footer
- [X] 本文
- [X] subject

***** [100%] 埋め込みタグ
業種詳細のみ、入力欄なし。

    - [X] 名 %FIRST_NAME%
    - [X] 姓 %LAST_NAME%
    - [X] メイ %FIRST_NAME_KANA%
    - [X] セイ %LAST_NAME_KANA%
    - [X] 国 %COUNTRY%
    - [X] 郵便番号	%POSTAL_CODE%
    - [X] 都道府県/州 %REGION%
    - [X] 市区町村/都市 %LOCALITY%
    - [X] 番地 %STREET_ADDRESS%
    - [X] 建物・番地 %EXTENDED_ADDRESS%
    - [X] TEL	%PHONE%
    - [X] FAX	%FAX%
    - [X] 携帯電話	%MOBILE_PHONE%
    - [X] Email	%EMAIL%

    - [X] 誕生日	%BIRTHDAY%
    - [X] 血液型	%BLOOD_TYPE%

    - [X] 会社名	%COMPANY_NAME%
    - [X] カイシャメイ	%COMPANY_NAME_KANA%
    - [X] 会社名(表示名)	%COMPANY_DISPLAY_NAME%
    - [X] 代表者肩書き	%REPRESENTATIVE_POSITION_TITLE%
    - [X] 代表者名	%REPRESENTATIVE_FIRST_NAME%
    - [X] 代表者姓	%REPRESENTATIVE_LAST_NAME%
    - [X] 会社URL	%COMPANY_URL%
    - [X] 事業説明	%BUSINESS_DESCRIPTION%

    - [#入力欄なし] 業種詳細	%BUSINESS_TYPE_DETAIL%
    - [X] 業種	%BUSINESS_TYPE%

    - [X] 本支店名	%BRANCH_NAME%
    - [X] 本支店名(表示名)	%BRANCH_DISPLAY_NAME%
    - [X] 本支店名(印刷用名称)	%BRANCH_PRINTING_NAME%
    - [X] 本支店名(敬称)	%BRANCH_HONORIFIC_TITLE_NAME%
    - [X] 本支店外部システムID	%BRANCH_EXTERNAL_SYSTEM_ID%
    - [X] 本支店説明	%BRANCH_DESCRIPTION%
    - [X] 本支店タグ	%BRANCH_TAG_NAME%
    - [X] 所属	%AFFILIATION%
    - [X] 役職	%POSITION_TITLE%
    - [X] 敬称	%HONORIFIC_TITLE_NAME%
    - [X] タグ	%TAG_NAME%

    - [X] 以下項目内でのみ、適切に埋込タグが展開されること
        - [X] header
        - [X] footer
        - [X] text body
        - [X] html body
        - [X] 他項目では展開されないこと


***** [100%] 配信停止
- [X] 配信停止として作成
- [X] 配信可として作成したデータを、配信停止とした場合、送信されない事
- [X] 配信可 -> 不可 -> 可 と遷移した場合、送信される事

***** [100%] 削除済みの設定から送信されないこと
- [X] 作成後、即削除して試行
      送信実績がある / 関連データが作成されている場合、削除不可のため

***** [100%] テスト送信
- [X] 不正な address では送信できないこと
- [X] 入力したアドレスへ送信されること
- [X] 受信されたメールの内容が適切であること
- [X] 配信停止アドレスの場合は?
    - [X] 送信可能
- [X] 送信完了済みの設定からは?
    - [X] 送信可能
- [X] 埋め込みタグは展開されないこと

***** [100%] 送信対象が増減した場合
- [X] 増
    結果、即時追加される. (UI上のreloadなど全く行わずに)

- [X] 減
    結果、即時削除される.
    ただし、配信先一覧には残り、メールアドレスだけが削除されている状態

***** [100%] 1userが複数の法人に所属 / 複数の事業所に所属
仕様通りの通数で送られるか?
同一メールアドレスが、複数の会社に存在する。
かつ、当該メールアドレスが、複数事業所に存在する

- [X] 複数会社
    - [X] 各会社1通のみ送信される
    - [X] 埋め込みタグが適切であること
    - [X] どこの事業所のdataが反映されるか?
        - [X] 本店が適用された : 最初に作成されたためか?

- [X] 複数事業所
    - [X] 1通のみ送信される
    - [X] 埋め込みタグが適切であること
    - [X] どこの事業所のdataが反映されるか?
        - [X] 本店が適用された : 最初に作成されたためか?

***** [100%] 複数の会社が同時に送った場合
- bb
    - Address A (2会社/2事業所)
    - Address B

- 追加会社1
    - Address Z

- [X] 適切に送信されるか
    - [X] Address A x2
    - [X] Address B x1
    - [X] Address Z x1

***** [100%] 絞り込んだ対象へ適切に送信されるか
- [X] 送信対象
- [X] 氏名
- [X] メールアドレス
- [X] 種別 | 従業員, 個人顧客, 法人顧客, 先以外
- [X] 顧客担当部門
- [X] 顧客ステータス

- [X] 絞り込み + 無効にした場合、適切に動作するか

**** 自動配信
***** Done UI
****** [100%] 設定
- [X] 新規作成 : 各種適切に入力、保存可能か
    - [X] タイトル
    - [X] UTF8のみ選択可能か
    - [X] 差出人アドレス
        - [X] 新規作成可能か
        - [X] 必須項目がブランクの場合、エラーとなり、エラー文言が表示されるか
        - [X] キャンセルボタンで画面が閉じるか. かつ設定は保存されないか
        - [X] 差出人アドレスがプルダウンに表示されるか
            - 新規作成後、別の設定を選択すると、新規作成したアドレスを選択できない.
    - [X] 返信先アドレス
    - [X] ヘッダ / フッダテンプレート
        - [X] 新規作成可能か
        - [X] 必須項目がブランクの場合、エラーとなり、エラー文言が表示されるか
        - [X] キャンセルボタンで画面が閉じるか. かつ設定は保存されないか
        - [X] プルダウンから選択したヘッダ / フッダテンプレートが適切に反映されるか
    - [X] [埋込文字選択] ボタン押下で、埋込タグ一覧が表示されるか
    - [X] 必須項目を入力せずに保存した場合、エラーとなり、各種エラー文言が表示されるか
- [X] 設定一覧
    - [X] 設定が一覧として表示されるか。各値が適切に表示されるか
    - [X] 項目を選択後、詳細画面が表示されること。また、各値が適切であること
    - [X] 基本情報、差出人、ヘッダ／フッタ押下、本文設定、配信日時で、開閉できるか
    - [X] [配信先 : 配信先数] が表示されること。当該項目押下で、配信先設定画面へ遷移すること
    - [X] [配信メール] が表示され、押下で、配信メール一覧画面へ遷移すること
    - [X] [X] ボタン押下で、詳細画面が閉じるか
    - [X] データ変更後、保存ボタンで変更を保存可能か
    - [X] 詳細画面にてデータ変更された後、保存せずに他の設定を開こうとした場合、画面遷移して良いかモーダルが表示されること。
        - [X] [はい] を選択した場合、変更は破棄され画面遷移すること。
        - [X] [いいえ] を選択した場合、変更は破棄されず、編集中の詳細画面へ戻ること (画面外を選択し場合、いいえと同じ挙動であるか)
    - [X] 有効/無効を切り替えられる事
- [X] ソート、フィルタリング
    - [X] 項目 : 適切にフィルタリング, ソートされるか (押下後表示される、全検索種を試行すること)
        - [X] 配信状況
        - [X] タイトル
        - [X] 文字コード (検索不可だが、現状UTF8のみなので良い)
        - [X] 差出人アドレス
        - [X] 差出人名
        - [X] 返信先アドレス
        - [X] 検索フォーム (タイトル、差出人アドレス、差出人名、返信先アドレス)
            - [X] 今一動きがわからないが、そこそこ動作している
                - [;]で全て抽出される
                - s-numasawa+reply@ruby-dev.jpに対し[repl]でhitするが[reply]ではhit (左記、部分一致はNG。完全一致だとok)
    - [X] 複合条件でフィルタできること (簡易)
    - [X] [;] [0%] [_] など入力し、適切に処理されるか
          [;]ではエラー、もしくは検索結果が前回のものになる
- [X] pagenate (data作成後)
    - [X] 適切にページ移動し、データが表示されるか
- [X] コピー / 削除
    - [X] ある設定をコピー可能か、また内容が適切にコピーされ保存可能か
    - [X] ある設定を削除可能か。削除後、一覧から設定が消えるか
    - [X] 送信実績がある場合、削除できないこと

****** [100%] 配信先設定
- [X] list
    - [X] 配信対象全てが表示されるか
    - [X] 送信対象 / 対象外が切り替え可能か (対象外は、送信されないこと)

- [X] ソート、フィルタリング
    - [X] 項目 : 適切にフィルタリング, ソートされるか
        - [X] 氏名
        - [X] メールアドレス
        - [X] 種別
        - [X] 顧客担当部門
        - [X] 顧客ステータス
    - [X] [;] [0%] [_] など入力し、適切に処理されるか
          [;]ではエラー、もしくは検索結果が前回のものになる

- [X] pagenate
    - [X] 適切にページ移動し、データが表示されるか


***** Done 誕生日
****** Done 年月日
******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前
- [X] 31ヶ月前
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後
- [X] 67ヶ月後
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 48ヶ月前の1日
- [X] 24ヶ月前の1日
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日
- [X] 48ヶ月後の末日
- [X] 99ヶ月後の末日

******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜
******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日
****** Done 月日
******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前  =>  67,31ヶ月の2通
- [X] 31ヶ月前  =>  67,31ヶ月の2通
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後  =>  67,31ヶ月の2通
- [X] 67ヶ月後  =>  67,31ヶ月の2通
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 24ヶ月前の1日
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日
- [X] 99ヶ月後の末日

******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜
******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日
****** [100%] 埋め込みタグ
業種詳細のみ、入力欄なし。

    - [X] 名 %FIRST_NAME%
    - [X] 姓 %LAST_NAME%
    - [X] メイ %FIRST_NAME_KANA%
    - [X] セイ %LAST_NAME_KANA%
    - [X] 国 %COUNTRY%
    - [X] 郵便番号	%POSTAL_CODE%
    - [X] 都道府県/州 %REGION%
    - [X] 市区町村/都市 %LOCALITY%
    - [X] 番地 %STREET_ADDRESS%
    - [X] 建物・番地 %EXTENDED_ADDRESS%
    - [X] TEL	%PHONE%
    - [X] FAX	%FAX%
    - [X] 携帯電話	%MOBILE_PHONE%
    - [X] Email	%EMAIL%

    - [X] 誕生日	%BIRTHDAY%
    - [X] 血液型	%BLOOD_TYPE%

    - [X] 会社名	%COMPANY_NAME%
    - [X] カイシャメイ	%COMPANY_NAME_KANA%
    - [X] 会社名(表示名)	%COMPANY_DISPLAY_NAME%
    - [X] 代表者肩書き	%REPRESENTATIVE_POSITION_TITLE%
    - [X] 代表者名	%REPRESENTATIVE_FIRST_NAME%
    - [X] 代表者姓	%REPRESENTATIVE_LAST_NAME%
    - [X] 会社URL	%COMPANY_URL%
    - [X] 事業説明	%BUSINESS_DESCRIPTION%

    - [#入力欄なし] 業種詳細	%BUSINESS_TYPE_DETAIL%
    - [X] 業種	%BUSINESS_TYPE%

    - [X] 本支店名	%BRANCH_NAME%
    - [X] 本支店名(表示名)	%BRANCH_DISPLAY_NAME%
    - [X] 本支店名(印刷用名称)	%BRANCH_PRINTING_NAME%
    - [X] 本支店名(敬称)	%BRANCH_HONORIFIC_TITLE_NAME%
    - [X] 本支店外部システムID	%BRANCH_EXTERNAL_SYSTEM_ID%
    - [X] 本支店説明	%BRANCH_DESCRIPTION%
    - [X] 本支店タグ	%BRANCH_TAG_NAME%
    - [X] 所属	%AFFILIATION%
    - [X] 役職	%POSITION_TITLE%
    - [X] 敬称	%HONORIFIC_TITLE_NAME%
    - [X] タグ	%TAG_NAME%

    - [X] 以下項目内でのみ、適切に埋込タグが展開されること
        - [X] header
        - [X] footer
        - [X] text body
        - [X] html body
        - [X] 他項目では展開されないこと

***** Done 営業ステータス変更日
****** Done 年月日
******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前
- [X] 31ヶ月前
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後
- [X] 67ヶ月後
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 48ヶ月前の1日
- [X] 24ヶ月前の1日
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日
- [X] 48ヶ月後の末日
- [X] 99ヶ月後の末日

******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜
******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日

****** Done 月日
当年及び、翌年で試行すること

******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前  =>  67,31ヶ月の2通
- [X] 31ヶ月前  =>  67,31ヶ月の2通
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後  =>  67,31ヶ月の2通
- [X] 67ヶ月後  =>  67,31ヶ月の2通
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 48ヶ月前の1日  =>  48ヶ月, 24ヶ月の2通送信 (月指定でmm/ddが同一のため対象となる)
- [X] 24ヶ月前の1日  =>  48ヶ月, 24ヶ月の2通送信 (月指定でmm/ddが同一のため対象となる)
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日  =>  48ヶ月, 24ヶ月の2通送信 (月指定でmm/ddが同一のため対象となる)
- [X] 48ヶ月後の末日  =>  48ヶ月, 24ヶ月の2通送信 (月指定でmm/ddが同一のため対象となる)
- [X] 99ヶ月後の末日

******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜
******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日
****** [100%] 埋め込みタグ
業種詳細のみ、入力欄なし。

    - [X] 名 %FIRST_NAME%
    - [X] 姓 %LAST_NAME%
    - [X] メイ %FIRST_NAME_KANA%
    - [X] セイ %LAST_NAME_KANA%
    - [X] 国 %COUNTRY%
    - [X] 郵便番号	%POSTAL_CODE%
    - [X] 都道府県/州 %REGION%
    - [X] 市区町村/都市 %LOCALITY%
    - [X] 番地 %STREET_ADDRESS%
    - [X] 建物・番地 %EXTENDED_ADDRESS%
    - [X] TEL	%PHONE%
    - [X] FAX	%FAX%
    - [X] 携帯電話	%MOBILE_PHONE%
    - [X] Email	%EMAIL%

    - [X] 誕生日	%BIRTHDAY%
    - [X] 血液型	%BLOOD_TYPE%

    - [X] 会社名	%COMPANY_NAME%
    - [X] カイシャメイ	%COMPANY_NAME_KANA%
    - [X] 会社名(表示名)	%COMPANY_DISPLAY_NAME%
    - [X] 代表者肩書き	%REPRESENTATIVE_POSITION_TITLE%
    - [X] 代表者名	%REPRESENTATIVE_FIRST_NAME%
    - [X] 代表者姓	%REPRESENTATIVE_LAST_NAME%
    - [X] 会社URL	%COMPANY_URL%
    - [X] 事業説明	%BUSINESS_DESCRIPTION%

    - [#入力欄なし] 業種詳細	%BUSINESS_TYPE_DETAIL%
    - [X] 業種	%BUSINESS_TYPE%

    - [X] 本支店名	%BRANCH_NAME%
    - [X] 本支店名(表示名)	%BRANCH_DISPLAY_NAME%
    - [X] 本支店名(印刷用名称)	%BRANCH_PRINTING_NAME%
    - [X] 本支店名(敬称)	%BRANCH_HONORIFIC_TITLE_NAME%
    - [X] 本支店外部システムID	%BRANCH_EXTERNAL_SYSTEM_ID%
    - [X] 本支店説明	%BRANCH_DESCRIPTION%
    - [X] 本支店タグ	%BRANCH_TAG_NAME%
    - [X] 所属	%AFFILIATION%
    - [X] 役職	%POSITION_TITLE%
    - [X] 敬称	%HONORIFIC_TITLE_NAME%
    - [X] タグ	%TAG_NAME%

    - [X] 以下項目内でのみ、適切に埋込タグが展開されること
        - [X] header
        - [X] footer
        - [X] text body
        - [X] html body
        - [X] 他項目では展開されないこと

***** Done 顧客ステータス変更日
****** Done ステータス
CLOSED: [2016-08-04 Thu 18:30]
各ステータスで送信できること

- [X] 見込み客
- [X] 集客
- [X] 顧客
- [X] リビーター
- [X] ファン
- [X] アンバサダー

****** Done 年月日
******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前
- [X] 31ヶ月前
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後
- [X] 67ヶ月後
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 48ヶ月前の1日
- [X] 24ヶ月前の1日
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日
- [X] 48ヶ月後の末日
- [X] 99ヶ月後の末日

******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜
******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日

****** Done 月日
******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前  =>  67,31ヶ月の2通
- [X] 31ヶ月前  =>  67,31ヶ月の2通
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後  =>  67,31ヶ月の2通
- [X] 67ヶ月後  =>  67,31ヶ月の2通
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 48ヶ月前の1日
- [X] 24ヶ月前の1日
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日
- [X] 48ヶ月後の末日
- [X] 99ヶ月後の末日


******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜
******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日
****** [100%] 埋め込みタグ
業種詳細のみ、入力欄なし。

    - [X] 名 %FIRST_NAME%
    - [X] 姓 %LAST_NAME%
    - [X] メイ %FIRST_NAME_KANA%
    - [X] セイ %LAST_NAME_KANA%
    - [X] 国 %COUNTRY%
    - [X] 郵便番号	%POSTAL_CODE%
    - [X] 都道府県/州 %REGION%
    - [X] 市区町村/都市 %LOCALITY%
    - [X] 番地 %STREET_ADDRESS%
    - [X] 建物・番地 %EXTENDED_ADDRESS%
    - [X] TEL	%PHONE%
    - [X] FAX	%FAX%
    - [X] 携帯電話	%MOBILE_PHONE%
    - [X] Email	%EMAIL%

    - [X] 誕生日	%BIRTHDAY%
    - [X] 血液型	%BLOOD_TYPE%

    - [X] 会社名	%COMPANY_NAME%
    - [X] カイシャメイ	%COMPANY_NAME_KANA%
    - [X] 会社名(表示名)	%COMPANY_DISPLAY_NAME%
    - [X] 代表者肩書き	%REPRESENTATIVE_POSITION_TITLE%
    - [X] 代表者名	%REPRESENTATIVE_FIRST_NAME%
    - [X] 代表者姓	%REPRESENTATIVE_LAST_NAME%
    - [X] 会社URL	%COMPANY_URL%
    - [X] 事業説明	%BUSINESS_DESCRIPTION%

    - [#入力欄なし] 業種詳細	%BUSINESS_TYPE_DETAIL%
    - [X] 業種	%BUSINESS_TYPE%

    - [X] 本支店名	%BRANCH_NAME%
    - [X] 本支店名(表示名)	%BRANCH_DISPLAY_NAME%
    - [X] 本支店名(印刷用名称)	%BRANCH_PRINTING_NAME%
    - [X] 本支店名(敬称)	%BRANCH_HONORIFIC_TITLE_NAME%
    - [X] 本支店外部システムID	%BRANCH_EXTERNAL_SYSTEM_ID%
    - [X] 本支店説明	%BRANCH_DESCRIPTION%
    - [X] 本支店タグ	%BRANCH_TAG_NAME%
    - [X] 所属	%AFFILIATION%
    - [X] 役職	%POSITION_TITLE%
    - [X] 敬称	%HONORIFIC_TITLE_NAME%
    - [X] タグ	%TAG_NAME%

    - [X] 以下項目内でのみ、適切に埋込タグが展開されること
        - [X] header
        - [X] footer
        - [X] text body
        - [X] html body
        - [X] 他項目では展開されないこと

***** Done 売上日
****** Done 年月日
******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前
- [X] 31ヶ月前
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後
- [X] 67ヶ月後
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 48ヶ月前の1日
- [X] 24ヶ月前の1日
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日
- [X] 48ヶ月後の末日
- [X] 99ヶ月後の末日

- [X] 売上が取り消しされた場合は?
      取り消し直後から送信されなくなる

******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜
******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日

****** Done 月日
当年及び、翌年で試行すること

******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前
- [X] 31ヶ月前
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後
- [X] 67ヶ月後
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 48ヶ月前の1日
- [X] 24ヶ月前の1日
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日
- [X] 48ヶ月後の末日
- [X] 99ヶ月後の末日


******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜

******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日
****** [100%] 埋め込みタグ
業種詳細のみ、入力欄なし。

    - [X] 名 %FIRST_NAME%
    - [X] 姓 %LAST_NAME%
    - [X] メイ %FIRST_NAME_KANA%
    - [X] セイ %LAST_NAME_KANA%
    - [X] 国 %COUNTRY%
    - [X] 郵便番号	%POSTAL_CODE%
    - [X] 都道府県/州 %REGION%
    - [X] 市区町村/都市 %LOCALITY%
    - [X] 番地 %STREET_ADDRESS%
    - [X] 建物・番地 %EXTENDED_ADDRESS%
    - [X] TEL	%PHONE%
    - [X] FAX	%FAX%
    - [X] 携帯電話	%MOBILE_PHONE%
    - [X] Email	%EMAIL%

    - [X] 誕生日	%BIRTHDAY%
    - [X] 血液型	%BLOOD_TYPE%

    - [X] 会社名	%COMPANY_NAME%
    - [X] カイシャメイ	%COMPANY_NAME_KANA%
    - [X] 会社名(表示名)	%COMPANY_DISPLAY_NAME%
    - [X] 代表者肩書き	%REPRESENTATIVE_POSITION_TITLE%
    - [X] 代表者名	%REPRESENTATIVE_FIRST_NAME%
    - [X] 代表者姓	%REPRESENTATIVE_LAST_NAME%
    - [X] 会社URL	%COMPANY_URL%
    - [X] 事業説明	%BUSINESS_DESCRIPTION%

    - [#入力欄なし] 業種詳細	%BUSINESS_TYPE_DETAIL%
    - [X] 業種	%BUSINESS_TYPE%

    - [X] 本支店名	%BRANCH_NAME%
    - [X] 本支店名(表示名)	%BRANCH_DISPLAY_NAME%
    - [X] 本支店名(印刷用名称)	%BRANCH_PRINTING_NAME%
    - [X] 本支店名(敬称)	%BRANCH_HONORIFIC_TITLE_NAME%
    - [X] 本支店外部システムID	%BRANCH_EXTERNAL_SYSTEM_ID%
    - [X] 本支店説明	%BRANCH_DESCRIPTION%
    - [X] 本支店タグ	%BRANCH_TAG_NAME%
    - [X] 所属	%AFFILIATION%
    - [X] 役職	%POSITION_TITLE%
    - [X] 敬称	%HONORIFIC_TITLE_NAME%
    - [X] タグ	%TAG_NAME%

    - [X] 以下項目内でのみ、適切に埋込タグが展開されること
        - [X] header
        - [X] footer
        - [X] text body
        - [X] html body
        - [X] 他項目では展開されないこと


***** [100%] 文字数
半角 / 全角で試行

- [X] タイトル : 128
- [#BUG] footer / header : 65535
     全角21846文字以上でエラーとなる

- [X] subject   : 128

- [#BUG] txt body  : 65535
    model validationはかかるが、angular側で validationかかっていない
    全角21846文字以上でエラーとなる

- [#BUG] html body : 65535
    model validationはかかるが、angular側で validationかかっていない
    全角21846文字以上でエラーとなる


- [X] html/txt bodyへ最大文字数いれて送信できるか? (sendgrid)
- [X] 各種検索フォーム / 各種フィルタフォーム
      大量の文字列入力でエラーになる

***** [100%] 本文, header, footer, subject, など
入力した内容が、保存、メールに適切に反映されるか
英数字、全角文字、xss codeなど

- [X] header
- [X] footer
- [X] 本文
- [X] subject

***** [100%] 有効期間外
- [X] 有効期間外の場合、送信対象外となるか?

***** [100%] 配信状況
- [X] 配信無効とした場合、送信されないこと
- [X] 配信有効 -> 無効 -> 有効 と遷移した場合、送信される事

***** [100%] 削除済みの設定から送信されないこと
- [X] 作成後、即削除して試行
      送信実績がある / 関連データが作成せれている場合、削除不可のため

***** [100%] テスト送信
stagingで確認

- [X] 不正な address では送信できないこと
- [X] 入力したアドレスへ送信されること
- [X] 受信されたメールの内容が適切であること
- [X] 配信停止及び、個別アドレスが無効の場合は?
    - [X] 送信される
- [X] 送信完了済みの設定からは?
    - [X] 送信される
- [X] 埋め込みタグは展開されないこと

***** [100%] 1userが複数の会社に所属 / 複数の事業所に所属
仕様通りの通数で送られるか?
同一メールアドレスが、複数の会社に存在する。
かつ、当該メールアドレスが、複数事業所に存在する
(2会社/2事業所)

- [X] 誕生日 (各事業所担当者)
    - [X] 2通 (2社の本店. 作成された順?)
    - [X] 埋め込みタグ (各事業所のデータが適切に書き込まれるか)

- [X] 営業ステータス変更日 (各事業所に新規案件)
    - [X] 4通 (各会社/各事業所宛)
    - [X] 埋め込みタグ (各事業所のデータが適切に書き込まれるか)

- [X] 売上 (各事業所に、1売上)
    - [X] 4通 (各会社/各事業所宛)
    - [X] 埋め込みタグ (各事業所のデータが適切に書き込まれるか)

- [X] 顧客ステータス変更日 (各事業所に、1変更)
    - [X] 4通 (各会社/各事業所宛)
    - [X] 埋め込みタグ (各事業所のデータが適切に書き込まれるか)

***** [100%] 複数の会社が同時に送った場合
- bb
    - Address A (2会社/2事業所)
- 追加会社1
    - Address Z


- [X] 誕生日 : 適切に送信されるか
    - [X] Address A x2
    - [X] Address Z x1

- [X] 営業ステータス変更日
    - [X] Address A x4
    - [X] Address Z x1

- [X] 顧客ステータス変更日
    - [X] Address A x4
    - [X] Address Z x1

- [X] 売上日
    - [X] Address A x4
    - [X] Address Z x1

***** [100%] 送信対象が増減した場合
挙動確認

- [X] 増
      増加後、配信先で情報更新する必要あり

- [X] 減
      更新不要

***** [100%] 絞り込んだ対象へ適切に送信されるか
- [X] 氏名
- [X] メールアドレス
- [X] 種別 | 従業員, 個人顧客, 法人顧客, 先以外
- [X] 顧客担当部門
- [X] 顧客ステータス

***** [100%] 配信停止
- [X] 配信停止URL選択後、URLフォームが開く事
- [X] 入力したアドレスには送信されなくなる事
- [X] 配信停止の旨、メールが届く事
- [X] 既に配信済みのメールアドレスの場合、配信停止のお知らせが重複して送信されない事

- [X] systemに登録の無いメールアドレスを入力した場合は?
      送信されない。配信停止した旨のpageは開く

- [X] validation
    - [X] 全角文字
          受け付けられる
    - [X] mail addresのformat外
          受け付けられる
    - [X] <script>alert(document.cookie)</script>
          特に異常は出ず



***** Done うるう年 + 月日指定
****** 誕生日
******* Bug 2/29 誕生日 + 当日
4年一度のみ送信された

******* Done 2000/03/01 誕生日 + １日前
CLOSED: [2016-07-25 Mon 15:40]

送信された日付にチェック

- [ ] 2016/2/28
- [X] 2016/2/29

- [X] 2017/2/28
- [ ] 2017/2/29

- [X] 2018/2/28
- [ ] 2018/2/29

- [ ] 2020/2/28
- [X] 2020/2/29

******* Done 2001/03/01 誕生日 + １日前
CLOSED: [2016-07-25 Mon 15:40]
送信された日付にチェック

- [ ] 2016/2/28
- [X] 2016/2/29

- [X] 2017/2/28
- [ ] 2017/2/29

- [X] 2018/2/28
- [ ] 2018/2/29

- [ ] 2020/2/28
- [X] 2020/2/29

******* Done 2000/02/28 誕生日 + １日後
CLOSED: [2016-07-25 Mon 15:48]
送信された日付にチェック

- [X] 2016/2/29
- [ ] 2016/3/1

- [ ] 2017/2/29
- [X] 2017/3/1

- [ ] 2018/2/29
- [X] 2018/3/1

- [X] 2020/2/29
- [ ] 2020/3/1

******* Done 2001/02/28 誕生日 + １日後
CLOSED: [2016-07-25 Mon 15:50]
送信された日付にチェック

- [未確認] 2016/2/29
- [ ] 2016/3/1

- [ ] 2017/2/29
- [X] 2017/3/1

- [ ] 2018/2/29
- [X] 2018/3/1

- [未確認] 2020/2/29
- [ ] 2020/3/1

****** 営業ステータス変更日
****** 顧客ステータス変更日
****** 売上日
**** ステップ配信
***** Done UI
****** [100%] 設定 : parent?
- [X] 新規作成 : 各種適切に入力、保存可能か
    - [X] タイトル
    - [X] UTF8のみ選択可能か
    - [X] 差出人アドレス
        - [X] 新規作成可能か
        - [X] 必須項目がブランクの場合、エラーとなり、エラー文言が表示されるか
        - [X] キャンセルボタンで画面が閉じるか. かつ設定は保存されないか
        - [X] 差出人アドレスがプルダウンに表示されるか
            - 新規作成後、別の設定を選択すると、新規作成したアドレスを選択できない.
    - [X] 返信先アドレス
    - [X] ヘッダ / フッダテンプレート
        - [X] 新規作成可能か
        - [X] 必須項目がブランクの場合、エラーとなり、エラー文言が表示されるか
        - [X] キャンセルボタンで画面が閉じるか. かつ設定は保存されないか
        - [X] プルダウンから選択したヘッダ / フッダテンプレートが適切に反映されるか
    - [X] [埋込文字選択] ボタン押下で、埋込タグ一覧が表示されるか
    - [X] 必須項目を入力せずに保存した場合、エラーとなり、各種エラー文言が表示されるか
- [X] 設定一覧
    - [X] 設定が一覧として表示されるか。各値が適切に表示されるか
    - [X] 項目を選択後、詳細画面が表示されること。また、各値が適切であること
    - [X] 基本情報、差出人、ヘッダ／フッタ、配信タイミング押下で、開閉できるか
    - [X] [配信先 : 配信先数] が表示されること。当該項目押下で、配信先設定画面へ遷移すること
        - [X] [配信メール] が表示され、押下で、配信メール一覧画面へ遷移すること
    - [X] [X] ボタン押下で、詳細画面が閉じるか
    - [X] データ変更後、保存ボタンで変更を保存可能か
    - [X] 詳細画面にてデータ変更された後、保存せずに他の設定を開こうとした場合、画面遷移して良いかモーダルが表示されること。
        - [X] [はい] を選択した場合、変更は破棄され画面遷移すること。
        - [X] [いいえ] を選択した場合、変更は破棄されず、編集中の詳細画面へ戻ること (画面外を選択し場合、いいえと同じ挙動であるか)
- [X] ソート、フィルタリング
    - [X] 項目 : 適切にフィルタリング, ソートされるか (押下後表示される、全検索種を試行すること)
        - [X] シナリオ名
        - [X] 文字コード
        - [X] 差出人アドレス
        - [X] 差出人名
        - [X] 返信先アドレス
        - [X] 検索フォーム (シナリオ名、差出人アドレス、差出人名、返信先アドレス)
            - [X] 今一動きがわからないが、そこそこ動作している
                - [;]で全て抽出される
                - s-numasawa+reply@ruby-dev.jpに対し[repl]でhitするが[reply]ではhit (左記、部分一致はNG。完全一致だとok)
    - [X] 複合条件でフィルタできること (簡易)
    - [X] [;] [0%] [_] など入力し、適切に処理されるか
        [;]のみエラーになる
- [X] pagenate (data作成後)
    - [X] 適切にページ移動し、データが表示されるか
- [X] コピー / 削除
    - [X] ある設定をコピー可能か、また内容が適切にコピーされ保存可能か
    - [X] ある設定を削除可能か。削除後、一覧から設定が消えるか
    - [X] 送信実績がある場合、削除できないこと

****** [100%] 配信先設定
- [X] list
    - [X] 配信対象全てが表示されるか
    - [X] 送信対象 / 対象外が切り替え可能か (対象外は、送信されないこと)

- [X] ソート、フィルタリング
    - [X] 項目 : 適切にフィルタリング, ソートされるか
        - [X] 氏名
        - [X] メールアドレス
        - [X] 種別
        - [X] 顧客担当部門
        - [X] 顧客ステータス
    - [X] [;] [0%] [_] など入力し、適切に処理されるか
        [;]入力でエラーになる

- [X] pagenate
    - [X] 適切にページ移動し、データが表示されるか

****** [100%] 配信メール設定 : children
- [X] 一つの親のみに紐づき、設定が反映されること (送信時に確認)

- [X] 新規作成 : 各種適切に入力、保存可能か
    - [X] 件名
    - [X] textメール本文
    - [X] HTMLメール本文
    - [X] 配信日時
        - [X] カレンダーが表示され、日付押下で適切な値が入力されるか
        - [X] プルダウンから、00:00〜23:45間で15分間隔で設定可能か

        - [X] 各項目、0〜99まで入力可能である事
        - [X] 各項目、0を入力した場合エラーになる事
        - [#BUG?] 各項目、数値以外を入力した場合エラーになる事

        - [X] 日付は31日まで入力可能である事
        - [X] n月x日付指定は1〜31日以外の数値は入力不可である事
    - [X] 配信中止ボタンを有効/無効できるか
    - [X] 有効期間
        - [X] 日付以外入力できない事
        - [#BUG] start/endの日付が逆転しない事
          逆転した場合、配信対象とならない
    - [X] 必須項目が未入力の場合、エラーとなり、エラー文言が表示されるか

- [X] 設定一覧
    - [X] 各項目、値が適切に表示されるか
    - [X] 項目を選択後、詳細画面が表示されること。また、各値が適切であること

- [X] ソート、フィルタリング
    - [X] 項目 : 適切にフィルタリング, ソートされるか
        - [X] 件名
        - [#BUG] 配信時刻
            プルダウンメニューが、当該箇所ではなく、画面中央付近に表示される

    - [X] [;] [0%] [_] など入力し、適切に処理されるか
        [;]を入力した場合、エラーになる

- [X] pagenate
    - [X] 適切にページ移動し、データが表示されるか
    - [X] [>] [<] で 1page移動されるか
    - [X] [>>] [<<] で 末尾移動されるか

- [X] コピー / 削除
    - [X] ある設定をコピー可能か、また内容が適切にコピーされ保存可能か
    - [X] ある設定を削除可能か。削除後、一覧から設定が消えるか
    - [X] 送信実績がある場合、削除できないこと


***** Done 誕生日
****** Done 年月日
******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前
- [X] 31ヶ月前
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後
- [X] 67ヶ月後
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 48ヶ月前の1日
- [X] 24ヶ月前の1日
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日
- [X] 48ヶ月後の末日
- [X] 99ヶ月後の末日

******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜
******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日
****** Done 月日
******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前
- [X] 31ヶ月前
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後
- [X] 67ヶ月後
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 24ヶ月前の1日
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日
- [X] 99ヶ月後の末日

******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜
******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日
****** [100%] 埋め込みタグ
業種詳細のみ、入力欄なし。

    - [X] 名 %FIRST_NAME%
    - [X] 姓 %LAST_NAME%
    - [X] メイ %FIRST_NAME_KANA%
    - [X] セイ %LAST_NAME_KANA%
    - [X] 国 %COUNTRY%
    - [X] 郵便番号	%POSTAL_CODE%
    - [X] 都道府県/州 %REGION%
    - [X] 市区町村/都市 %LOCALITY%
    - [X] 番地 %STREET_ADDRESS%
    - [X] 建物・番地 %EXTENDED_ADDRESS%
    - [X] TEL	%PHONE%
    - [X] FAX	%FAX%
    - [X] 携帯電話	%MOBILE_PHONE%
    - [X] Email	%EMAIL%

    - [X] 誕生日	%BIRTHDAY%
    - [X] 血液型	%BLOOD_TYPE%

    - [X] 会社名	%COMPANY_NAME%
    - [X] カイシャメイ	%COMPANY_NAME_KANA%
    - [X] 会社名(表示名)	%COMPANY_DISPLAY_NAME%
    - [X] 代表者肩書き	%REPRESENTATIVE_POSITION_TITLE%
    - [X] 代表者名	%REPRESENTATIVE_FIRST_NAME%
    - [X] 代表者姓	%REPRESENTATIVE_LAST_NAME%
    - [X] 会社URL	%COMPANY_URL%
    - [X] 事業説明	%BUSINESS_DESCRIPTION%

    - [#入力欄なし] 業種詳細	%BUSINESS_TYPE_DETAIL%
    - [X] 業種	%BUSINESS_TYPE%

    - [X] 本支店名	%BRANCH_NAME%
    - [X] 本支店名(表示名)	%BRANCH_DISPLAY_NAME%
    - [X] 本支店名(印刷用名称)	%BRANCH_PRINTING_NAME%
    - [X] 本支店名(敬称)	%BRANCH_HONORIFIC_TITLE_NAME%
    - [X] 本支店外部システムID	%BRANCH_EXTERNAL_SYSTEM_ID%
    - [X] 本支店説明	%BRANCH_DESCRIPTION%
    - [X] 本支店タグ	%BRANCH_TAG_NAME%
    - [X] 所属	%AFFILIATION%
    - [X] 役職	%POSITION_TITLE%
    - [X] 敬称	%HONORIFIC_TITLE_NAME%
    - [X] タグ	%TAG_NAME%

    - [X] 以下項目内でのみ、適切に埋込タグが展開されること
        - [X] header
        - [X] footer
        - [X] text body
        - [X] html body
        - [X] 他項目では展開されないこと

***** Done 顧客ステータス変更日
****** [100%] ステータス
各ステータスで送信できること

- [X] 見込み客
- [X] 集客
- [X] 顧客
- [X] リビーター
- [X] ファン
- [X] アンバサダー

****** Done 年月日
******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前
- [X] 31ヶ月前
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後
- [X] 67ヶ月後
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 48ヶ月前の1日
- [X] 24ヶ月前の1日
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日
- [X] 48ヶ月後の末日
- [X] 99ヶ月後の末日

******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜
******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日
****** Done 月日
******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前
- [X] 31ヶ月前
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後
- [X] 67ヶ月後
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 24ヶ月前の1日
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日
- [X] 99ヶ月後の末日

******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜
******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日
****** [100%] 埋め込みタグ
業種詳細のみ、入力欄なし。

    - [X] 名 %FIRST_NAME%
    - [X] 姓 %LAST_NAME%
    - [X] メイ %FIRST_NAME_KANA%
    - [X] セイ %LAST_NAME_KANA%
    - [X] 国 %COUNTRY%
    - [X] 郵便番号	%POSTAL_CODE%
    - [X] 都道府県/州 %REGION%
    - [X] 市区町村/都市 %LOCALITY%
    - [X] 番地 %STREET_ADDRESS%
    - [X] 建物・番地 %EXTENDED_ADDRESS%
    - [X] TEL	%PHONE%
    - [X] FAX	%FAX%
    - [X] 携帯電話	%MOBILE_PHONE%
    - [X] Email	%EMAIL%

    - [X] 誕生日	%BIRTHDAY%
    - [X] 血液型	%BLOOD_TYPE%

    - [X] 会社名	%COMPANY_NAME%
    - [X] カイシャメイ	%COMPANY_NAME_KANA%
    - [X] 会社名(表示名)	%COMPANY_DISPLAY_NAME%
    - [X] 代表者肩書き	%REPRESENTATIVE_POSITION_TITLE%
    - [X] 代表者名	%REPRESENTATIVE_FIRST_NAME%
    - [X] 代表者姓	%REPRESENTATIVE_LAST_NAME%
    - [X] 会社URL	%COMPANY_URL%
    - [X] 事業説明	%BUSINESS_DESCRIPTION%

    - [#入力欄なし] 業種詳細	%BUSINESS_TYPE_DETAIL%
    - [X] 業種	%BUSINESS_TYPE%

    - [X] 本支店名	%BRANCH_NAME%
    - [X] 本支店名(表示名)	%BRANCH_DISPLAY_NAME%
    - [X] 本支店名(印刷用名称)	%BRANCH_PRINTING_NAME%
    - [X] 本支店名(敬称)	%BRANCH_HONORIFIC_TITLE_NAME%
    - [X] 本支店外部システムID	%BRANCH_EXTERNAL_SYSTEM_ID%
    - [X] 本支店説明	%BRANCH_DESCRIPTION%
    - [X] 本支店タグ	%BRANCH_TAG_NAME%
    - [X] 所属	%AFFILIATION%
    - [X] 役職	%POSITION_TITLE%
    - [X] 敬称	%HONORIFIC_TITLE_NAME%
    - [X] タグ	%TAG_NAME%

    - [X] 以下項目内でのみ、適切に埋込タグが展開されること
        - [X] header
        - [X] footer
        - [X] text body
        - [X] html body
        - [X] 他項目では展開されないこと

***** Done 営業ステータス変更日
****** [100%] ステータス
各ステータスで送信できる事

- [X] 新規
- [X] 初回提案
- [X] 提案中
- [X] 最終提案
- [X] 制約
- [X] フォロー
- [X] OUT/見送り

****** Done 年月日
******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前
- [X] 31ヶ月前
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後
- [X] 67ヶ月後
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 48ヶ月前の1日
- [X] 24ヶ月前の1日
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日
- [X] 48ヶ月後の末日
- [X] 99ヶ月後の末日

******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜
******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日
****** Done 月日
******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前
- [X] 31ヶ月前
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後
- [X] 67ヶ月後
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 24ヶ月前の1日
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日
- [X] 99ヶ月後の末日

******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜
******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日
****** [100%] 埋め込みタグ
業種詳細のみ、入力欄なし。

    - [X] 名 %FIRST_NAME%
    - [X] 姓 %LAST_NAME%
    - [X] メイ %FIRST_NAME_KANA%
    - [X] セイ %LAST_NAME_KANA%
    - [X] 国 %COUNTRY%
    - [X] 郵便番号	%POSTAL_CODE%
    - [X] 都道府県/州 %REGION%
    - [X] 市区町村/都市 %LOCALITY%
    - [X] 番地 %STREET_ADDRESS%
    - [X] 建物・番地 %EXTENDED_ADDRESS%
    - [X] TEL	%PHONE%
    - [X] FAX	%FAX%
    - [X] 携帯電話	%MOBILE_PHONE%
    - [X] Email	%EMAIL%

    - [X] 誕生日	%BIRTHDAY%
    - [X] 血液型	%BLOOD_TYPE%

    - [X] 会社名	%COMPANY_NAME%
    - [X] カイシャメイ	%COMPANY_NAME_KANA%
    - [X] 会社名(表示名)	%COMPANY_DISPLAY_NAME%
    - [X] 代表者肩書き	%REPRESENTATIVE_POSITION_TITLE%
    - [X] 代表者名	%REPRESENTATIVE_FIRST_NAME%
    - [X] 代表者姓	%REPRESENTATIVE_LAST_NAME%
    - [X] 会社URL	%COMPANY_URL%
    - [X] 事業説明	%BUSINESS_DESCRIPTION%

    - [#入力欄なし] 業種詳細	%BUSINESS_TYPE_DETAIL%
    - [X] 業種	%BUSINESS_TYPE%

    - [X] 本支店名	%BRANCH_NAME%
    - [X] 本支店名(表示名)	%BRANCH_DISPLAY_NAME%
    - [X] 本支店名(印刷用名称)	%BRANCH_PRINTING_NAME%
    - [X] 本支店名(敬称)	%BRANCH_HONORIFIC_TITLE_NAME%
    - [X] 本支店外部システムID	%BRANCH_EXTERNAL_SYSTEM_ID%
    - [X] 本支店説明	%BRANCH_DESCRIPTION%
    - [X] 本支店タグ	%BRANCH_TAG_NAME%
    - [X] 所属	%AFFILIATION%
    - [X] 役職	%POSITION_TITLE%
    - [X] 敬称	%HONORIFIC_TITLE_NAME%
    - [X] タグ	%TAG_NAME%

    - [X] 以下項目内でのみ、適切に埋込タグが展開されること
        - [X] header
        - [X] footer
        - [X] text body
        - [X] html body
        - [X] 他項目では展開されないこと

***** Done 売上日
****** [100%] 埋め込みタグ
業種詳細のみ、入力欄なし。

    - [X] 名 %FIRST_NAME%
    - [X] 姓 %LAST_NAME%
    - [X] メイ %FIRST_NAME_KANA%
    - [X] セイ %LAST_NAME_KANA%
    - [X] 国 %COUNTRY%
    - [X] 郵便番号	%POSTAL_CODE%
    - [X] 都道府県/州 %REGION%
    - [X] 市区町村/都市 %LOCALITY%
    - [X] 番地 %STREET_ADDRESS%
    - [X] 建物・番地 %EXTENDED_ADDRESS%
    - [X] TEL	%PHONE%
    - [X] FAX	%FAX%
    - [X] 携帯電話	%MOBILE_PHONE%
    - [X] Email	%EMAIL%

    - [X] 誕生日	%BIRTHDAY%
    - [X] 血液型	%BLOOD_TYPE%

    - [X] 会社名	%COMPANY_NAME%
    - [X] カイシャメイ	%COMPANY_NAME_KANA%
    - [X] 会社名(表示名)	%COMPANY_DISPLAY_NAME%
    - [X] 代表者肩書き	%REPRESENTATIVE_POSITION_TITLE%
    - [X] 代表者名	%REPRESENTATIVE_FIRST_NAME%
    - [X] 代表者姓	%REPRESENTATIVE_LAST_NAME%
    - [X] 会社URL	%COMPANY_URL%
    - [X] 事業説明	%BUSINESS_DESCRIPTION%

    - [#入力欄なし] 業種詳細	%BUSINESS_TYPE_DETAIL%
    - [X] 業種	%BUSINESS_TYPE%

    - [X] 本支店名	%BRANCH_NAME%
    - [X] 本支店名(表示名)	%BRANCH_DISPLAY_NAME%
    - [X] 本支店名(印刷用名称)	%BRANCH_PRINTING_NAME%
    - [X] 本支店名(敬称)	%BRANCH_HONORIFIC_TITLE_NAME%
    - [X] 本支店外部システムID	%BRANCH_EXTERNAL_SYSTEM_ID%
    - [X] 本支店説明	%BRANCH_DESCRIPTION%
    - [X] 本支店タグ	%BRANCH_TAG_NAME%
    - [X] 所属	%AFFILIATION%
    - [X] 役職	%POSITION_TITLE%
    - [X] 敬称	%HONORIFIC_TITLE_NAME%
    - [X] タグ	%TAG_NAME%

    - [X] 以下項目内でのみ、適切に埋込タグが展開されること
        - [X] header
        - [X] footer
        - [X] text body
        - [X] html body
        - [X] 他項目では展開されないこと

****** Done 年月日
******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前
- [X] 31ヶ月前
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後
- [X] 67ヶ月後
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 48ヶ月前の1日
- [X] 24ヶ月前の1日
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日
- [X] 48ヶ月後の末日
- [X] 99ヶ月後の末日

******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜
******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日
****** Done 月日
******* [100%] 日
- [X] 99日前
- [X] 50日前
- [X] 7日前
- [X] 当日
- [X] 7日後
- [X] 50日後
- [X] 99日後

******* [100%] 週前後
基本、日曜指定

- [X] 99週間前
- [X] 52週間前 火曜
- [X] 23週間前
- [X] 1週間前
- [X] 1週間後
- [X] 23週間後
- [X] 52週間後 金曜
- [X] 99週間後

******* [100%] 月前後
- [X] 99ヶ月前
- [X] 67ヶ月前
- [X] 31ヶ月前
- [X] 1ヶ月前
- [X] 1ヶ月後
- [X] 31ヶ月後
- [X] 67ヶ月後
- [X] 99ヶ月後

******* [100%] 月前後x日
- [X] 99ヶ月前の1日
- [X] 24ヶ月前の1日
- [X] 1ヶ月前の1日
- [X] 1ヶ月後の末日
- [X] 24ヶ月後の末日
- [X] 99ヶ月後の末日

******* [100%] 曜日
- [X] 日曜
- [X] 月曜
- [X] 火曜
- [X] 水曜
- [X] 木曜
- [X] 金曜
- [X] 土曜
- [ ] 日曜
- [ ] 月曜
- [ ] 火曜
- [ ] 水曜
- [ ] 木曜
- [ ] 金曜
- [ ] 土曜
******* [100%] 月x日
- [X] 1日
- [X] 3日
- [X] 7日
- [X] 13日
- [X] 19日
- [X] 29日
- [X] 31日
****** Done [50%]取り消し / 返品の際の挙動確認
- [X] 取り消し
    - [X] step1
          送信されない
    - [X] step2 (step1は既に送信済み)
          送信されない
- [-] 返品
      エラーで返品不可

***** Done update後
****** Done step1がoffの場合の挙動
- [X] step2から送信されないこと
- [X] 既にstep1が送信されている場合、step1がoffでも後続が送信される事
- [X] step1送信済みかつ、step2を送信する前にstep2がoffになった場合、step3から継続して送信される事.


***** [100%] 文字数
半角 / 全角で試行

- [X] タイトル : 128
- [#BUG] footer / header : 65535
     全角21846文字以上でエラーとなる

- [X] subject   : 128

- [#BUG] txt body  : 65535
    model validationはかかるが、angular側で validationかかっていない
    全角21846文字以上でエラーとなる

- [#BUG] html body : 65535
    model validationはかかるが、angular側で validationかかっていない
    全角21846文字以上でエラーとなる


- [X] html/txt bodyへ最大文字数いれて送信できるか? (sendgrid)
- [X] 各種検索フォーム / 各種フィルタフォーム
      大量の文字列入力でエラーになる

***** [100%] 本文, header, footer, subject, など
入力した内容が、保存、メールに適切に反映されるか
英数字、全角文字、xss codeなど

- [X] header
- [X] footer
- [X] 本文
- [X] subject

***** [100%] 配信タイミング
当日 + 下記いずれか1つのみと組み合わせて使用できること
- [X] x日前後
- [X] xヶ月前後
- [X] x週前後(曜日)
- [X] xヶ月前後 y日

***** [100%] ステップ
- [X] 最終まで到達した設定に、設定が追加された場合、追加ステップは送信対象とならないこと
- [X] 同一の日付は指定できない事
- [X] ステップ途中で、以降の文面を変えた場合、適切に反映される事

***** [100%] 有効期間外の場合、適切に送信対象外となるか
- [X] 有効期間外の場合、送信対象外となるか?

***** [100%] 配信状況 (parent, child)
- [X] parent
    - [X] 配信無効とした場合、送信されないこと
    - [X] 配信有効 -> 無効 -> 有効 と遷移した場合、送信される事

- [X] child
    - [X] 配信無効とした場合、送信されないこと
    - [X] 配信有効 -> 無効 -> 有効 と遷移した場合、送信される事

***** [100%] 削除済みの設定から送信されないこと
- [X] 作成後、即削除して試行
      送信実績がある / 関連データが作成せれている場合、削除不可のため

***** [100%] テスト送信
- [X] 不正な address では送信できないこと
- [X] 入力したアドレスへ送信されること
- [X] 受信されたメールの内容が適切であること
- [X] 配信停止アドレスの場合は?
    - [X] 送信可能
- [X] 送信完了済みの設定からは?
    - [X] 送信可能
- [X] 無効の場合は?
    - [X] 送信可能
- [#BUG] 各ステップで同様の動作であること
    最終ステップでエラーとなる

***** [100%] 1userが複数の会社に所属 / 複数の事業所に所属
仕様通りの通数で送られるか?
同一メールアドレスが、複数の会社に存在する。
かつ、当該メールアドレスが、複数事業所に存在する
(2会社/2事業所)

- [X] 誕生日 (各事業所担当者)
    - [X] 2通 (2社の本店)
    - [X] 埋め込みタグ (各事業所のデータが適切に書き込まれるか)
    - [X] 複数ステップにおいて、上記同様の結果となるか

- [X] 営業ステータス変更日 (各事業所に新規案件)
    - [X] 4通 (各会社/各事業所宛)
    - [X] 埋め込みタグ (各事業所のデータが適切に書き込まれるか)
    - [X] 複数ステップにおいて、上記同様の結果となるか

- [X] 売上 (各事業所に、1売上)
    - [X] 4通 (各会社/各事業所宛)
    - [X] 埋め込みタグ (各事業所のデータが適切に書き込まれるか)
    - [X] 複数ステップにおいて、上記同様の結果となるか

- [X] 顧客ステータス変更日 (各事業所に、1変更)
    - [X] 4通 (各会社/各事業所宛)
    - [X] 埋め込みタグ (各事業所のデータが適切に書き込まれるか)
    - [X] 複数ステップにおいて、上記同様の結果となるか

***** [100%] 複数の会社が同時に送った場合
- bb
    - Address A (2会社/2事業所)

- 追加会社1
    - Address Z

- [X] 誕生日 : 適切に送信されるか
    - [X] Address A x2
    - [X] Address Z x1
    - [X] 複数ステップで同一結果となるか

- [X] 営業ステータス変更日
    - [X] Address A x4
    - [X] Address Z x1
    - [X] 複数ステップで同一結果となるか

- [X] 顧客ステータス変更日
    - [X] Address A x4
    - [X] Address Z x1
    - [X] 複数ステップで同一結果となるか

- [X] 売上日
    - [X] Address A x4
    - [X] Address Z x1
    - [X] 複数ステップで同一結果となるか

***** [100%] 送信対象が増減した場合
挙動確認

- [X] 増
    - [X] 各ステップでの動作
          手動でデータ更新後、追加ユーザーが反映される

    - [X] ステップ開始時、該当とならなかった場合、対象外となる.
          途中で追加された場合は、step nから送られる事はない.

    - [X] 途中でアドレスが変更された際は?
          変更後のアドレスになる. リロード不要

- [X] 減
    - [X] 各ステップでの動作
          即時反映される。リロード不要

    - [X] 途中でユーザーが削除された場合、送信されない

    - [X] 途中でアドレスが変更された際は?
          変更後のアドレスになる. リロード不要

***** [100%] 絞り込んだ対象へ適切に送信されるか
- [X] 氏名
- [X] メールアドレス
- [X] 種別 | 従業員, 個人顧客, 法人顧客, 先以外
- [X] 顧客担当部門
- [X] 顧客ステータス

- [X] 各ステップで同一動作か
- [X] + 加えて、送信対象外とした場合、除外されるか

***** [100%] 配信停止
- [X] 配信停止URL選択後、URLフォームが開く事
- [X] 入力したアドレスには送信されなくなる事
- [X] 配信停止の旨、メールが届く事
- [X] 既に配信済みのメールアドレスの場合、配信停止のお知らせが重複して送信されない事

- [X] systemに登録の無いメールアドレスを入力した場合は?
      送信されない。配信停止した旨のpageは開く

- [X] validation check
    - [X] 全角文字
          受け付けられる
    - [X] mail addresのformat外
          受け付けられる
    - [X] <script>alert(document.cookie)</script>
          特に異常は出ず

***** Done うるう年 + 月日指定
****** 誕生日
******* Bug 2/29 誕生日 + 当日
4年一度のみ送信された

******* Done 2000/03/01 誕生日 + １日前
CLOSED: [2016-07-25 Mon 15:40]

送信された日付にチェック

- [ ] 2016/2/28
- [X] 2016/2/29

- [X] 2017/2/28
- [ ] 2017/2/29

- [X] 2018/2/28
- [ ] 2018/2/29

- [ ] 2020/2/28
- [X] 2020/2/29

******* Done 2001/03/01 誕生日 + １日前
CLOSED: [2016-07-25 Mon 15:40]
送信された日付にチェック

- [ ] 2016/2/28
- [X] 2016/2/29

- [X] 2017/2/28
- [ ] 2017/2/29

- [X] 2018/2/28
- [ ] 2018/2/29

- [ ] 2020/2/28
- [X] 2020/2/29

******* Done 2000/02/28 誕生日 + １日後
CLOSED: [2016-07-25 Mon 15:48]
送信された日付にチェック

- [X] 2016/2/29
- [ ] 2016/3/1

- [ ] 2017/2/29
- [X] 2017/3/1

- [ ] 2018/2/29
- [X] 2018/3/1

- [X] 2020/2/29
- [ ] 2020/3/1

******* Done 2001/02/28 誕生日 + １日後
CLOSED: [2016-07-25 Mon 15:50]
送信された日付にチェック

- [未確認] 2016/2/29
- [ ] 2016/3/1

- [ ] 2017/2/29
- [X] 2017/3/1

- [ ] 2018/2/29
- [X] 2018/3/1

- [未確認] 2020/2/29
- [ ] 2020/3/1

****** 営業ステータス変更日
****** 顧客ステータス変更日
****** 売上日
**** 実送信テスト
***** on Staging
****** 送信対象
以下、計6名以外には送らない
主に、小針氏、沼沢のみに送付 ( filterが効かないので時間がかかるため)

kobari+demo2@bbank.jp
takahashi+demo2@bbank.jp
e.watanabe+demo2@bbank.jp

y-shibata+demo@ruby-dev.jp
s-numasawa+demo@ruby-dev.jp
h-sato+demo@ruby-dev.jp

****** 一斉配信
******* Done 受信
CLOSED: [2016-07-28 Thu 15:02]
4時間ごとに受信されている事を確認

****** 自動配信
******* Done 受信
CLOSED: [2016-08-04 Thu 03:46]
******** [100%] 誕生日
- [X] 2016/07/27を共通誕生日とする。
    - [X] 2016/07/27 15:00 # 1日ずれて届くはず (s-numasawa+demo3@ruby-dev.jp)
    - [X] 2016/07/28 15:00 # 1日ずれて届くはず (s-numasawa+demo3@ruby-dev.jp)
    - [X] 2016/07/29 15:00 # 1日ずれて届くはず (s-numasawa+demo3@ruby-dev.jp)

- [X] 小針さん, 沼沢 : 入力済みの誕生日を起点とする。(1972/6/30)
    - [X] 2016/07/27 15:00 (27日後)
    - [X] 2016/07/28 15:00 (28日後)
    - [X] 2016/07/29 15:00 (29日後)

    - [X] 2016/07/27 15:00 (n週間後の水曜日)
    - [X] 2016/07/28 15:00 (n週間後の木曜日)
    - [X] 2016/07/29 15:00 (n週間後の金曜日)

- [X] 柴田さんのみ : 入力済みの誕生日を起点とする。(1972/5/22)
    - [X] 2016/07/27 15:00 (2ヶ月後の27日)
    - [X] 2016/07/28 15:00 (2ヶ月後の28日)
    - [X] 2016/07/29 15:00 (2ヶ月後の29日)

******** [100%] 顧客ステータス変更日
小針氏、沼沢のみを対象.
顧客となった日, 2016/07/27を変更日とする.
2通送信 (2事業部に関連)

- [X] 2016/07/27 16:00
- [X] 2016/07/28 16:00
- [X] 2016/07/29 16:00

******** [100%] 営業ステータス変更日
小針氏、沼沢のみを対象.

- [X] 2016/07/27に新規案件発生
    - [X] 2016/07/27 17:00
    - [X] 2016/07/28 17:00
    - [X] 2016/07/29 17:00

- [X] 2016/06/27に新規案件発生
    - [X] 2016/07/27 17:00 (1ヶ月後)
    - [X] 2016/07/28 17:00 (1ヶ月後の28日)
    - [X] 2016/07/29 17:00 (4週間後の金曜日)
       設定ミス
       追試ok 5週間後木曜 03:45

******** [100%] 売上日
小針氏、沼沢のみを対象.

- [X] 2016/07/27に売上発生
    - [X] 2016/07/27 19:00
    - [X] 2016/07/28 19:00
    - [X] 2016/07/29 19:00

- [X] 2016/06/27に売上発生
    - [X] 2016/07/27 19:00 (1ヶ月後)
    - [X] 2016/07/28 19:00 (1ヶ月後の28日)
    - [X] 2016/07/29 19:00 (4週間後の金曜日)

****** ステップ配信
******* 受信
******** [100%] 誕生日
- [X] 2016/07/28を共通誕生日とする。
    - [X] 2016/07/28を共通誕生日
        - [X] s-numasawa+demo03@ruby-dev.jp

    - [X] 2016/07/28 14:15
    - [X] 2016/07/29 14:15
    - [X] 2016/07/30 14:15

- [X] 小針さん, 沼沢 (1972/6/28)
    - [X] 2016/06/28 が誕生日のユーザーを作成
        - [X] numasawa+demo02@rub-dev.jp
        - [X] kobari+demo03@ruby-dev.jp

    - [X] 2016/07/28 14:00 (30日後)
    - [X] 2016/07/29 14:00 (31日後)
    - [X] 2016/07/30 14:00 (32日後)

    # 再設定したので1日ずれる
    - [X] 2016/07/29 16:30 (4週間後の金曜日)
    - [X] 2016/07/30 16:30 (4週間後の土曜日)
    - [X] 2016/07/31 16:30 (5週間後の日曜日)

    - [X] 2016/07/28 14:30 (1ヶ月後)

    - [X] 2016/07/28 14:45 (1ヶ月後の28日)
    - [X] 2016/07/29 14:45 (1ヶ月後の29日)
    - [X] 2016/07/30 14:45 (1ヶ月後の30日)

******** [100%] 顧客ステータス変更日
- [X] 元顧客, 2016/07/28を変更日
    - [X] 2016/07/28 19:00
    - [X] 2016/07/29 19:00
    - [X] 2016/07/30 19:00

- [X] 集客, 2016/07/28を変更日
    - [X] 2016/07/28 19:00
    - [X] 2016/07/29 19:00
    - [X] 2016/07/30 19:00

- [X] 見込客, 2016/07/28を変更日
    - [X] 2016/07/28 19:00
    - [X] 2016/07/29 19:00
    - [X] 2016/07/30 19:00

- [X] 顧客, 2016/07/28を変更日
    - [X] 2016/07/28 19:00
    - [X] 2016/07/29 19:00
    - [X] 2016/07/30 19:00


- [X] リピーター, 2016/07/28を変更日
    - [X] 2016/07/28 19:00
    - [X] 2016/07/29 19:00
    - [X] 2016/07/30 19:00

- [X] ファン, 2016/07/28を変更日
    - [X] 2016/07/28 19:00
    - [X] 2016/07/29 19:00
    - [X] 2016/07/30 19:00

- [X] アンバサダー, 2016/07/28を変更日
    - [X] 2016/07/28 19:00
    - [X] 2016/07/29 19:00
    - [X] 2016/07/30 19:00

******** [100%] 営業ステータス変更日
小針氏、沼沢のみを対象.

- [X] 新規問い合わせ : 2016/07/28
    - [X] 2016/07/28 19:15
    - [X] 2016/07/29 19:15
    - [X] 2016/07/30 19:15

- [X] 初回提案 : 2016/07/28
    - [X] 2016/07/28 19:15
    - [X] 2016/07/29 19:15
    - [X] 2016/07/30 19:15

- [X] 見積書作成依頼 : 2016/07/28
    - [X] 2016/07/28 19:15
    - [X] 2016/07/29 19:15
    - [X] 2016/07/30 19:15

- [X] 見積書提出済み : 2016/07/28
    - [X] 2016/07/28 19:15
    - [X] 2016/07/29 19:15
    - [X] 2016/07/30 19:15

- [X] 最終提案 : 2016/07/28
    - [X] 2016/07/28 19:15
    - [X] 2016/07/29 19:15
    - [X] 2016/07/30 19:15

- [X] 成約 : 2016/07/28
    - [X] 2016/07/28 19:15
    - [X] 2016/07/29 19:15
    - [X] 2016/07/30 19:15

- [X] 長期フォロー : 2016/07/28
    - [X] 2016/07/28 19:15
    - [X] 2016/07/29 19:15
    - [X] 2016/07/30 19:15

- [X] OUT : 2016/07/28
    - [X] 2016/07/28 19:15
    - [X] 2016/07/29 19:15
    - [X] 2016/07/30 19:15


- [X] ベストプラクティス : 新規案件作成 : 2016/07/28
    - [X] 2016/07/28 19:15
    - [X] 2016/07/29 19:15
    - [X] 2016/07/30 19:15

- [X] ベストプラクティス : 失注 : 2016/07/28
    - [X] 2016/07/28 19:15
    - [X] 2016/07/29 19:15
    - [X] 2016/07/30 19:15

******** [100%] 売上日
小針氏、沼沢のみを対象.

- [X] 2016/07/29に売上 (当該日付間に有効期間を設ける)
    - [X] 2016/07/29 15:00
    - [X] 2016/07/30 15:00
    - [X] 2016/07/31 15:00

- [X] 2016/06/29に売上
    - [X] 2016/07/29 16:00 (1ヶ月後)

    - [X] 2016/07/29 16:00 (1ヶ月後の29日)
    - [X] 2016/07/30 16:00 (1ヶ月後の30日)
    - [X] 2016/07/31 15:15 (1ヶ月後の31日)

    - [X] 2016/07/29 16:00 (4週間後の金曜日)
    - [X] 2016/07/30 16:00 (4週間後の土曜日)
    - [X] 2016/07/31 16:00 (4週間後の日曜日)

****** Bugs
- staging環境のみ、配信先一覧でfilterをかけると検索結果が0になる
  切り分け結果、タグに数値があると発生する. (localにおいて再現)

***** [100%] 文字数
sendgridから送信した場合
- [X] header + footer + body : それぞれ65535文字入力し、送信可能
     他のBugがあるので、半角でのみ試行
- [#BUG] subject : 128文字入力して送信可能
    全角文字の場合、100文字目付近が文字化けする

***** 社内試験
send grid free accountを用い実送信テストにて確認

- [X] 一斉配信 : 当日12:00 ~ 翌日09:00の間で、30分刻み
- [X] 自動配信 : 当日12:00 ~ 翌日09:00の間で、60分刻み
- [X] ステップ配信 : 当日及び翌日
- [X] 部署内全員を対象
- [X] ダミーデータを混ぜ、送信対象外とする

特段の異常は見受けられず
ただし、13分遅れで到着したメールが2通ほど存在する
要追試

****** 送信情報
To   : it-solution@ruby-dev.jp
From : s-numasawa+allin@ruby-dev.jp

subject
    - allin : 一斉配信 yyyy/mm/dd hh:mm
    - allin : 自動配信
    - allin : ステップ配信

header
----------------------------------------------------------------
this is header
ヘッダー
埋め込みタグ
!@#$%^^&*()_++|~}{":?><,./;'[]`\=-
"javascript:alert('XSS')"
"<script>alert('XSS')</script>"

名	%FIRST_NAME%
姓	%LAST_NAME%
メイ	%FIRST_NAME_KANA%
セイ	%LAST_NAME_KANA%
国	%COUNTRY%
郵便番号	%POSTAL_CODE%
都道府県/州	%REGION%
市区町村/都市	%LOCALITY%
番地	%STREET_ADDRESS%
建物・番地	%EXTENDED_ADDRESS%
TEL	%PHONE%
FAX	%FAX%
携帯電話	%MOBILE_PHONE%
Email	%EMAIL%
誕生日	%BIRTHDAY%
血液型	%BLOOD_TYPE%
会社名	%COMPANY_NAME%
カイシャメイ	%COMPANY_NAME_KANA%
会社名(表示名)	%COMPANY_DISPLAY_NAME%
代表者肩書き	%REPRESENTATIVE_POSITION_TITLE%
代表者名	%REPRESENTATIVE_FIRST_NAME%
代表者姓	%REPRESENTATIVE_LAST_NAME%
会社URL	%COMPANY_URL%
事業説明	%BUSINESS_DESCRIPTION%
業種詳細	%BUSINESS_TYPE_DETAIL%
業種	%BUSINESS_TYPE%
本支店名	%BRANCH_NAME%
本支店名(表示名)	%BRANCH_DISPLAY_NAME%
本支店名(印刷用名称)	%BRANCH_PRINTING_NAME%
本支店名(敬称)	%BRANCH_HONORIFIC_TITLE_NAME%
本支店外部システムID	%BRANCH_EXTERNAL_SYSTEM_ID%
本支店説明	%BRANCH_DESCRIPTION%
本支店タグ	%BRANCH_TAG_NAME%
所属	%AFFILIATION%
役職	%POSITION_TITLE%
敬称	%HONORIFIC_TITLE_NAME%
タグ	%TAG_NAME%
----------------------------------------------------------------

text body
----------------------------------------------------------------
body<br>
誕生日おめでとうございます
お買い上げありがとうございます
!@#$%^^&*()_++|~}{":?><,./;'[]`\=-
"javascript:alert('XSS')"
"<script>alert('XSS')</script>"

名	%FIRST_NAME%
姓	%LAST_NAME%
メイ	%FIRST_NAME_KANA%
セイ	%LAST_NAME_KANA%
国	%COUNTRY%
郵便番号	%POSTAL_CODE%
都道府県/州	%REGION%
市区町村/都市	%LOCALITY%
番地	%STREET_ADDRESS%
建物・番地	%EXTENDED_ADDRESS%
TEL	%PHONE%
FAX	%FAX%
携帯電話	%MOBILE_PHONE%
Email	%EMAIL%
誕生日	%BIRTHDAY%
血液型	%BLOOD_TYPE%
会社名	%COMPANY_NAME%
カイシャメイ	%COMPANY_NAME_KANA%
会社名(表示名)	%COMPANY_DISPLAY_NAME%
代表者肩書き	%REPRESENTATIVE_POSITION_TITLE%
代表者名	%REPRESENTATIVE_FIRST_NAME%
代表者姓	%REPRESENTATIVE_LAST_NAME%
会社URL	%COMPANY_URL%
事業説明	%BUSINESS_DESCRIPTION%
業種詳細	%BUSINESS_TYPE_DETAIL%
業種	%BUSINESS_TYPE%
本支店名	%BRANCH_NAME%
本支店名(表示名)	%BRANCH_DISPLAY_NAME%
本支店名(印刷用名称)	%BRANCH_PRINTING_NAME%
本支店名(敬称)	%BRANCH_HONORIFIC_TITLE_NAME%
本支店外部システムID	%BRANCH_EXTERNAL_SYSTEM_ID%
本支店説明	%BRANCH_DESCRIPTION%
本支店タグ	%BRANCH_TAG_NAME%
所属	%AFFILIATION%
役職	%POSITION_TITLE%
敬称	%HONORIFIC_TITLE_NAME%
タグ	%TAG_NAME%
----------------------------------------------------------------

html body
----------------------------------------------------------------
body<br>
誕生日おめでとうございます<br>
お買い上げありがとうございます<br>
!@#$%^^&*()_++|~}{":?><,./;'[]`\=-
"javascript:alert('XSS')"
"<script>alert('XSS')</script>"

名	%FIRST_NAME%
姓	%LAST_NAME%
メイ	%FIRST_NAME_KANA%
セイ	%LAST_NAME_KANA%
国	%COUNTRY%
郵便番号	%POSTAL_CODE%
都道府県/州	%REGION%
市区町村/都市	%LOCALITY%
番地	%STREET_ADDRESS%
建物・番地	%EXTENDED_ADDRESS%<br>
TEL	%PHONE%<br>
FAX	%FAX%<br>
携帯電話	%MOBILE_PHONE%<br>
Email	%EMAIL%<br>
誕生日	%BIRTHDAY%<br>
血液型	%BLOOD_TYPE%<br>
会社名	%COMPANY_NAME%<br>
カイシャメイ	%COMPANY_NAME_KANA%<br>
会社名(表示名)	%COMPANY_DISPLAY_NAME%<br>
代表者肩書き	%REPRESENTATIVE_POSITION_TITLE%<br>
代表者名	%REPRESENTATIVE_FIRST_NAME%<br>
代表者姓	%REPRESENTATIVE_LAST_NAME%<br>
会社URL	%COMPANY_URL%<br>
事業説明	%BUSINESS_DESCRIPTION%<br>
業種詳細	%BUSINESS_TYPE_DETAIL%<br>
業種	%BUSINESS_TYPE%<br>
本支店名	%BRANCH_NAME%<br>
本支店名(表示名)	%BRANCH_DISPLAY_NAME%<br>
本支店名(印刷用名称)	%BRANCH_PRINTING_NAME%<br>
本支店名(敬称)	%BRANCH_HONORIFIC_TITLE_NAME%<br>
本支店外部システムID	%BRANCH_EXTERNAL_SYSTEM_ID%<br>
本支店説明	%BRANCH_DESCRIPTION%<br>
本支店タグ	%BRANCH_TAG_NAME%<br>
所属	%AFFILIATION%<br>
役職	%POSITION_TITLE%<br>
敬称	%HONORIFIC_TITLE_NAME%<br>
タグ	%TAG_NAME%<br>
----------------------------------------------------------------

footer
----------------------------------------------------------------
this is footer
フッター
埋め込みタグ
!@#$%^^&*()_++|~}{":?><,./;'[]`\=-
"javascript:alert('XSS')"
"<script>alert('XSS')</script>"

名	%FIRST_NAME%
姓	%LAST_NAME%
メイ	%FIRST_NAME_KANA%
セイ	%LAST_NAME_KANA%
国	%COUNTRY%
郵便番号	%POSTAL_CODE%
都道府県/州	%REGION%
市区町村/都市	%LOCALITY%
番地	%STREET_ADDRESS%
建物・番地	%EXTENDED_ADDRESS%
TEL	%PHONE%
FAX	%FAX%
携帯電話	%MOBILE_PHONE%
Email	%EMAIL%
誕生日	%BIRTHDAY%
血液型	%BLOOD_TYPE%
会社名	%COMPANY_NAME%
カイシャメイ	%COMPANY_NAME_KANA%
会社名(表示名)	%COMPANY_DISPLAY_NAME%
代表者肩書き	%REPRESENTATIVE_POSITION_TITLE%
代表者名	%REPRESENTATIVE_FIRST_NAME%
代表者姓	%REPRESENTATIVE_LAST_NAME%
会社URL	%COMPANY_URL%
事業説明	%BUSINESS_DESCRIPTION%
業種詳細	%BUSINESS_TYPE_DETAIL%
業種	%BUSINESS_TYPE%
本支店名	%BRANCH_NAME%
本支店名(表示名)	%BRANCH_DISPLAY_NAME%
本支店名(印刷用名称)	%BRANCH_PRINTING_NAME%
本支店名(敬称)	%BRANCH_HONORIFIC_TITLE_NAME%
本支店外部システムID	%BRANCH_EXTERNAL_SYSTEM_ID%
本支店説明	%BRANCH_DESCRIPTION%
本支店タグ	%BRANCH_TAG_NAME%
所属	%AFFILIATION%
役職	%POSITION_TITLE%
敬称	%HONORIFIC_TITLE_NAME%
タグ	%TAG_NAME%
----------------------------------------------------------------
****** 送信刻み
- 一斉配信 / 30min
- 自動配信 / 60min
- ステップ / 当日直近時間及び、翌日の0時

****** データ作成
- it-solutionのデータ作成
- 送信テスト
- create_jobのcron設定
- run_job daemon

****** Done 結果確認
CLOSED: [2016-07-25 Mon 16:51] SCHEDULED: <2016-07-22 Fri>

- [ ] ステップ配信
    - [ ] 一斉配信 : TEST01 : 2016/07/22 09:00が、09:17に送信された
          同メールは2通あるが、片方だけ
    - [ ] その他は概ね良好

- [-] 自動配信
    - [X] 概ね大丈夫そう
    - [ ] 自動配信 : 売上日 : 2016/07/22 00:00のメールが、00:15に送信されている。
          他のメールは、00:00~00:02くらいに送信されている

- [NG] 一斉配信
    - [ ] ステップメール 誕生日1通目はOK、2通目が送信されていない
    - [ ] その他設定はまったく送信されていない



**** Done テンプレート
各地点で作成したテンプレートが、全箇所で参照/使用可能であること。

***** [100%] 差出人
各所で作成し、任意の場所で使用可能である事

- [X] テンプレート画面から作成
- [X] 一斉配信で作成
- [X] 自動配信で作成
- [X] ステップ配信で作成

****** [100%] validation
全角、半角文字で試行

- [X] 差出人
    - [X] !blank
    - [X] 64文字 validation
- [X] 差出人アドレス
    - [#Bug?] mail address形式のみで保存可能か?
        mail address形式外で保存可能. 異常形式で送信すると、from errorとなる
        to, replyもmail address形式外で保存可能.
    - [X] !blank
    - [X] 128文字 validation


***** [100%] ヘッダ / フッダ
各所で作成し、任意の場所で使用可能である事

- [X] テンプレート画面から作成
- [X] 一斉配信で作成
- [X] 自動配信で作成
- [X] ステップ配信で作成

****** [100%] validation
- [X] template :
    - [X] !blank
    - [X] 128文字
- [X] header
    - [X] !blank
    - [#BUG] 65535文字
      全角文字列21846文字以上でエラーとなる
- [X] footer
    - [X] !blank
    - [#BUG] 65535文字
      全角文字列21846文字以上でエラーとなる


**** 要確認
- [ ] 設定状態
    - [ ]
    - [ ] コピーされた設定の動作は?

**** bugs
***** QA : body / header / footer 全角文字
https://bbank-devs.atlassian.net/browse/RUBYDEV-581

***** QA : 一斉配信 : body の文字数 validation
https://bbank-devs.atlassian.net/browse/RUBYDEV-579

***** QA : ステップメール : 新規作成した際、配信メールが時系列に並ばない
https://bbank-devs.atlassian.net/browse/RUBYDEV-578

***** Done QA : QA : 一斉 / 自動 / ステップ : jobが大量にある場合、大幅に送信時刻がずれる
https://bbank-devs.atlassian.net/browse/RUBYDEV-533
***** QA : 自動配信 : アドレス帳から作成した場合、重複メールアドレス宛へ複数送信される
https://bbank-devs.atlassian.net/browse/RUBYDEV-573

***** QA : staging : 長時間動作していると、配信先一覧が重くなる
https://bbank-devs.atlassian.net/browse/RUBYDEV-541

***** QA : 一斉配信 : jsonログを吐き出す場合
https://bbank-devs.atlassian.net/browse/RUBYDEV-555

***** QA : 一斉配信 : 複数事業所にまたがる場合のエラー出力
https://bbank-devs.atlassian.net/browse/RUBYDEV-554

***** QA : 埋め込みタグ : 顧客備考欄が、埋め込みタグの本支店説明に展開される
https://bbank-devs.atlassian.net/browse/RUBYDEV-556

***** QA : windowを複数開き、同一機能を開いた場合
https://bbank-devs.atlassian.net/browse/RUBYDEV-557

***** QA : テスト配信フォームで Enter key押下で埋め込み文字のモーダルが開く
https://bbank-devs.atlassian.net/browse/RUBYDEV-558

***** QA : html mail : 配信停止URLが改行されない. 手動で文末に改行を入れる必要がある
https://bbank-devs.atlassian.net/browse/RUBYDEV-559

***** QA : ステップメール : テスト送信でエラーが出る
https://bbank-devs.atlassian.net/browse/RUBYDEV-560

***** QA : 自動配信 : 日時入力
https://bbank-devs.atlassian.net/browse/RUBYDEV-551

***** QA : 自動配信 : 有効期間
https://bbank-devs.atlassian.net/browse/RUBYDEV-552

***** QA : 種別での絞り込み
https://bbank-devs.atlassian.net/browse/RUBYDEV-537
***** QA : 自動 / ステップ : うるう年問題
https://bbank-devs.atlassian.net/browse/RUBYDEV-522

***** Done QA : 一斉 / 自動 / ステップ : 差出人名が入力済みの状態だが、validationエラーにかかる
CLOSED: [2016-08-08 Mon 16:54]
https://bbank-devs.atlassian.net/browse/RUBYDEV-521

merge後確認
http://ec2-54-64-57-99.ap-northeast-1.compute.amazonaws.com/cru/ALLIN-CR-2378#CFR-39172


***** QA : 一斉配信 : 2038年問題
https://bbank-devs.atlassian.net/browse/RUBYDEV-511

***** QA : 一斉配信 : send_grid grant errorとなった場合、jobが全てにしか表示されなくなる
https://bbank-devs.atlassian.net/browse/RUBYDEV-505

***** QA : 一斉 / 自動 / ステップ : 差出人アドレスを新規作成後、別の設定を選択すると、新規作成したアドレス再選択できない
https://bbank-devs.atlassian.net/browse/RUBYDEV-501

***** QA : 一斉 / 自動 / ステップ : 検索フォームへセミコロンを入力するとエラーになる
https://bbank-devs.atlassian.net/browse/RUBYDEV-499

***** QA : 一斉配信 : 配信先 : 顧客ステータスの絞り込みのUIが、画面外に表示される
https://bbank-devs.atlassian.net/browse/RUBYDEV-478

***** QA：一斉配信 : 検索フォームへ特定の記号を入力すると、すべて検索される
https://bbank-devs.atlassian.net/browse/RUBYDEV-468

***** QA：一斉配信 : 配信メール新規作成レコードが末尾に表示される
https://bbank-devs.atlassian.net/browse/RUBYDEV-467

***** QA：一斉配信 : 退職済みのデータが配信先一覧に表示される。実際には送信されない。
https://bbank-devs.atlassian.net/browse/RUBYDEV-466


***** Done QA : 自動配信 : 未入力、エラーハイライトが必須で無い部分にもかかる
CLOSED: [2016-08-08 Mon 16:56]
https://bbank-devs.atlassian.net/browse/RUBYDEV-477

- [2016-07-26 Tue] stagingへは、mergeされていない。masterは改善


***** Done QA : 自動配信 : job作成後、settingが消えるとエラーログが永遠出続ける
CLOSED: [2016-07-26 Tue 18:48]
https://bbank-devs.atlassian.net/browse/RUBYDEV-475

***** Done QA：自動配信 : 顧客ステータス変更日 : LoyaltyHistoryのレコード分メールが送信される。
CLOSED: [2016-07-26 Tue 18:22]
https://bbank-devs.atlassian.net/browse/RUBYDEV-471

要追試
allinで2レコードあった場合は?
salesで2レコードあった場合は?

***** Done QA : ステップ配信 : 配信基準日 : 営業ステータス変更日の値が消える
CLOSED: [2016-07-26 Tue 18:19]
https://bbank-devs.atlassian.net/browse/RUBYDEV-504

***** Done QA : 自動 / ステップ : 設定コピー時、配信日と有効期間が初期化される
CLOSED: [2016-07-26 Tue 18:09]
https://bbank-devs.atlassian.net/browse/RUBYDEV-503

***** Done QA : 一斉配信 : 文字コードでのソート不可
CLOSED: [2016-07-26 Tue 18:10]
https://bbank-devs.atlassian.net/browse/RUBYDEV-500

***** Done QA : 一斉配信 : UI : 配信メール画面の送信ステータス部分が崩れる
CLOSED: [2016-07-26 Tue 18:12]
https://bbank-devs.atlassian.net/browse/RUBYDEV-479

***** Done QA：自動配信 : 営業ステータス : 日付のずれ
https://bbank-devs.atlassian.net/browse/RUBYDEV-472

***** Done QA : ステップ配信 : 配信不可
https://bbank-devs.atlassian.net/browse/RUBYDEV-509

***** Done QA : 一斉配信 : 埋め込みタグの展開結果に、他者の情報が入る
https://bbank-devs.atlassian.net/browse/RUBYDEV-506

***** Done QA : 一斉配信 : 0時にメールが送信される (意図しない時刻にデータ送信される)
https://bbank-devs.atlassian.net/browse/RUBYDEV-488

***** Done QA : 自動配信 : 配信時刻09時00分を選択すると00時に強制される
https://bbank-devs.atlassian.net/browse/RUBYDEV-474

***** Done QA：自動配信 : 必須項目のプルダウン未選択でエラーポップアップがでるが、エラー箇所にメッセージが表示されない
https://bbank-devs.atlassian.net/browse/RUBYDEV-470

***** Done QA：一斉配信 : 埋め込みの展開結果
https://bbank-devs.atlassian.net/browse/RUBYDEV-465

***** Done QA：一斉配信 : 氏名、顧客ステータスでソート不可
https://bbank-devs.atlassian.net/browse/RUBYDEV-464

***** Done 一斉配信 : 埋め込みするとエラー。送信不可
https://bbank-devs.atlassian.net/browse/RUBYDEV-463

***** Done QA：一斉配信 : 埋め込みの help link 不足
https://bbank-devs.atlassian.net/browse/RUBYDEV-462

***** Done birth_month_day 作成時, 日付がずれる
https://bbank-devs.atlassian.net/browse/RUBYDEV-459

***** Done 一斉配信 : 配信メール設定を、過去の日付で作成できる
https://bbank-devs.atlassian.net/browse/RUBYDEV-457

***** Done 一斉配信 : 配信メール画面の検索条件が、画面遷移後にクリアされる
https://bbank-devs.atlassian.net/browse/RUBYDEV-456

***** Done QA：一斉配信 : 配信メール設定で、メールアドレスがblankのリストを作成すると内部でエラーが出続ける
https://bbank-devs.atlassian.net/browse/RUBYDEV-455

再現しないため、保留
***** Done QA: 一斉配信 : 配信メール作成中に氏名でフィルタリングするとエラーになる
https://bbank-devs.atlassian.net/browse/RUBYDEV-454

***** Done 一斉配信 : 配信メール新規作成直後、 [未送信] リストに表示されない
https://bbank-devs.atlassian.net/browse/RUBYDEV-453

**** 要追試
***** 送信完了後, 再送されることがないか?
- [ ] 1日後の日付
- [ ] 1週間後の日付
- [ ] 1ヶ月後の日付
- [ ] 6ヶ月後の日付
- [ ] １年後の日付

***** 15分程度ずれて送信される
実送信テストした祭に、2件ほど発生.
send_grid apiを用いて要追試

***** メール配信停止フォームの仕様変更の対応
 配信停止のURLにMailSettingのhex_idのみを含めるように変更
 配信停止のURLをなるべく短く変更
 配信停止フォームでEメールアドレスのテキストボックスを追加
 配信停止のEメールアドレスに通知メールを送信する機能を追加

*** Done 切り分け : ticket 539
CLOSED: [2016-08-04 Thu 12:50]
CLOCK: [2016-08-04 Thu 10:00]--[2016-08-04 Thu 12:50] =>  2:50
**** filter on 時
CLOCK: [2016-08-04 Thu 12:50]--[2016-08-04 Thu 12:50] =>  0:00
This method is deprecated.
vendor-1cb4e9d99e.js:22751 Searching resources (condition='{"mail_delivery_setting_id":"3fc9767653dd11e6a227060fa9c2d21f","dq":"{\"by\":\"and\",\"qs\":[[\"branch_tag_name\",\"eq\",[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"27\",\"28\",\"29\",\"30\",\"select_all\",\"東京都\",\"北海道\",\"福岡\",\"名古屋\",\"消費税計算テスト用商品\"]],[\"tag_name\",\"eq\",[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"27\",\"28\",\"29\",\"30\",\"select_all\",\"東京都\",\"北海道\",\"福岡\",\"名古屋\",\"消費税計算テスト用商品\"]]]}","order":"email asc","page":1}, options={}).
vendor-1cb4e9d99e.js:22751 Received the following response.
vendor-1cb4e9d99e.js:22751 Resource {page: 1, count: 0, offset: 0, size: 0, resources: Array[0]…}$promise: Promise$resolved: truecount: 0offset: 0page: 1resources: Array[0]size: 0__proto__: Object
vendor-1cb4e9d99e.js:22751 Received the following response.
vendor-1cb4e9d99e.js:22751 Resource {id: "3fc9767653dd11e6a227060fa9c2d21f", base_date_before_or_after_number: null, base_date_on_day: null, base_date_on_weekday: null, base_date_schedule_type: null…}$promise: Promise$resolved: truebase_date_before_or_after_number: nullbase_date_on_day: nullbase_date_on_weekday: nullbase_date_schedule_type: nullbase_date_selectable_id: "fd31da9a414211e5b5f2068f3c325786"base_date_selectable_type: "Status"base_date_use_month_day: falsebody_html: nullbody_text: nullcompany_id: "fd2d25ea414211e5b5f2068f3c325786"delivery_mail_count: 3delivery_record: 0dynamic_query: "{"by":"and","qs":[["branch_tag_name","eq",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","27","28","29","30","select_all","東京都","北海道","福岡","名古屋","消費税計算テスト用商品"]],["tag_name","eq",["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","27","28","29","30","select_all","東京都","北海道","福岡","名古屋","消費税計算テスト用商品"]]]}"encoding: "utf_8"footer: "footer↵----------------------------------------------------------------↵!@#$%^&*()_+|~{}P:"<>?`\=-][';/.,↵"javascript:alert('XSS')"↵"<script>alert('XSS')</script>"↵----------------------------------------------------------------"header: "Header↵----------------------------------------------------------------↵!@#$%^&*()_+|~{}P:"<>?`\=-][';/.,↵"javascript:alert('XSS')"↵"<script>alert('XSS')</script>"↵----------------------------------------------------------------"id: "3fc9767653dd11e6a227060fa9c2d21f"is_disabled: truejob_status: "none"mail_delivery_base_date_type: "customer_status_changed"mail_delivery_jobs: Array[0]mail_delivery_sender: Objectname: "顧客ステータス変更日 日"next_reserved_time: nullreply_email: nullschedule_at: nullstatus: Objectstep_order: nullsubject: nulltype: "StepMailDeliverySetting"valid_term_end_on: nullvalid_term_is_enabled: falsevalid_term_start_on: null__proto__: Object
vendor-1cb4e9d99e.js:22751 Received the following response.
vendor-1cb4e9d99e.js:22751 Resource {count: 0, $promise: Promise, $resolved: true}$promise: Promise$resolved: truecount: 0__proto__: Object$count: (params,success,error)$delete: (params,success,error)$get: (params,success,error)$query: (params,success,error)$remove: (params,success,error)$save: (params,success,error)$subscribe: (params,success,error)$unsubscribe: (params,success,error)$update: (params,success,error)constructor: Resource(value)toJSON: ()__proto__: Object__defineGetter__: __defineGetter__()__defineSetter__: __defineSetter__()__lookupGetter__: __lookupGetter__()__lookupSetter__: __lookupSetter__()constructor: Object()hasOwnProperty: hasOwnProperty()isPrototypeOf: isPrototypeOf()propertyIsEnumerable: propertyIsEnumerable()toLocaleString: toLocaleString()toString: toString()valueOf: valueOf()get __proto__: __proto__()set __proto__: __proto__()

**** クリア時
Error: [ngRepeat:dupes] Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: value in self.values, Duplicate key: string:顧客, Duplicate value: 顧客
http://errors.angularjs.org/1.5.4/ngRepeat/dupes?p0=value%20in%20self.values&p1=string%3A%E9%A1%A7%E5%AE%A2&p2=%E9%A1%A7%E5%AE%A2
    at vendor-1cb4e9d99e.js:9279
    at vendor-1cb4e9d99e.js:38154
    at $watchCollectionAction (vendor-1cb4e9d99e.js:26137)
    at Scope.$digest (vendor-1cb4e9d99e.js:26274)
    at Scope.$apply (vendor-1cb4e9d99e.js:26538)
    at done (vendor-1cb4e9d99e.js:20773)
    at completeRequest (vendor-1cb4e9d99e.js:20979)
    at XMLHttpRequest.xhr.onload (vendor-1cb4e9d99e.js:20912)(anonymous function) @ vendor-1cb4e9d99e.js:22751(anonymous function) @ vendor-1cb4e9d99e.js:19430$digest @ vendor-1cb4e9d99e.js:26292$apply @ vendor-1cb4e9d99e.js:26538done @ vendor-1cb4e9d99e.js:20773completeRequest @ vendor-1cb4e9d99e.js:20979xhr.onload @ vendor-1cb4e9d99e.js:20912
vendor-1cb4e9d99e.js:22751 Error: [ngRepeat:dupes] Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: value in self.values, Duplicate key: string:リピーター, Duplicate value: リピーター
http://errors.angularjs.org/1.5.4/ngRepeat/dupes?p0=value%20in%20self.value…3%83%BC%E3%82%BF%E3%83%BC&p2=%E3%83%AA%E3%83%94%E3%83%BC%E3%82%BF%E3%83%BC
    at vendor-1cb4e9d99e.js:9279
    at vendor-1cb4e9d99e.js:38154
    at $watchCollectionAction (vendor-1cb4e9d99e.js:26137)
    at Scope.$digest (vendor-1cb4e9d99e.js:26274)
    at Scope.$apply (vendor-1cb4e9d99e.js:26538)
    at done (vendor-1cb4e9d99e.js:20773)
    at completeRequest (vendor-1cb4e9d99e.js:20979)
    at XMLHttpRequest.xhr.onload (vendor-1cb4e9d99e.js:20912)(anonymous function) @ vendor-1cb4e9d99e.js:22751(anonymous function) @ vendor-1cb4e9d99e.js:19430$digest @ vendor-1cb4e9d99e.js:26292$apply @ vendor-1cb4e9d99e.js:26538done @ vendor-1cb4e9d99e.js:20773completeRequest @ vendor-1cb4e9d99e.js:20979xhr.onload @ vendor-1cb4e9d99e.js:20912
vendor-1cb4e9d99e.js:22751 Received the following response.
vendor-1cb4e9d99e.js:22751 Resource {id: "3fc9767653dd11e6a227060fa9c2d21f", base_date_before_or_after_number: null, base_date_on_day: null, base_date_on_weekday: null, base_date_schedule_type: null…}
vendor-1cb4e9d99e.js:22751 Received the following response.
vendor-1cb4e9d99e.js:22751 Resource {count: 22, $promise: Promise, $resolved: true}

*** Done [#A] 最新状態での動作確認
CLOSED: [2016-07-07 Thu 14:02] SCHEDULED: <2016-07-07 Thu>
CLOCK: [2016-07-07 Thu 09:54]--[2016-07-07 Thu 14:02] =>  4:08

*** Done [#A] Mail配信 QA
CLOSED: [2016-07-08 Fri 10:54] SCHEDULED: <2016-07-05 Tue>
CLOCK: [2016-07-04 Mon 10:27]--[2016-07-04 Mon 19:27] =>  9:00
Added: [2016-07-04 Mon 10:03]


https://bbank-devs.atlassian.net/browse/RUBYDEV-453

**** テスト観点
***** 送信対象者数に関して
自動配信とステップメールの一覧画面で、それぞれの配信対象者数を出すのは、solrでの絞込がそれほど速くないので、各行で絞込を実行すると遅くなりそうです。
（添付ファイルを参照）

表示しない方向で調整した方が良いと考えておりますがどうでしょうか？

編集画面（右サイドバー）には送信対象数が表示されるので、一覧の方は非表示にしていただいて問題ありません。



**** mail配信テスト前のデータなどの調整
- data
    db:seed
    bin/rake allin:delivery:set_birth_month_day

- mail送信
    config/sendgrid.yml
    # json指定に、忘れるな

**** command
bin/rake allin:mail_delivery_job:create
bin/rake allin:mail_delivery_job:start

person = MailDelivery::PersonBirthdayRecipientExtractor.new(MailDeliveryJob.all[16])
Person.where(birth_month_day: "0703")


**** test内容
- [ ] : json dataが吐き出されるか
  吐き出し先 : tmp

- [ ] : json dataは適切な内容か

- [ ] : その他UI上の操作でエラーにならないか

**** 一斉配信
***** Done bugs
CLOSED: [2016-07-11 Mon 16:10]
****** Done test配信不可
CLOSED: [2016-07-07 Thu 20:08]
https://bbank-devs.atlassian.net/browse/RUBYDEV-473

****** Done 顧客ステータスの絞り込みのUIが、画面外に表示される
CLOSED: [2016-07-11 Mon 16:10]
https://bbank-devs.atlassian.net/browse/RUBYDEV-477

****** Done sort
CLOSED: [2016-07-11 Mon 16:10]
https://bbank-devs.atlassian.net/browse/RUBYDEV-464

********* Done 配信先 : 氏名でソート不可
CLOSED: [2016-09-15 Thu 17:11]
エラーはでない

********* Done 配信先 : 顧客担当部門でソート不可
CLOSED: [2016-09-15 Thu 17:11]
エラーがでる

****** Done 検索フォーム
CLOSED: [2016-07-11 Mon 16:10]
******* 配信メール : 特定の記号を入力すると、すべて検索される
- [%] [_] [;] ですべて検索される
- [\] バックスラッシュで以下がなぜか抽出された
    件名が [ %FIRST_NAME% ]
****** Done embed
CLOSED: [2016-07-11 Mon 16:10]
******* Done : 埋め込み help Linkが無い
CLOSED: [2016-09-15 Thu 17:11]
https://bbank-devs.atlassian.net/browse/RUBYDEV-462

******* Done : embedするとエラーになる
CLOSED: [2016-07-05 Tue 14:14]
https://bbank-devs.atlassian.net/browse/RUBYDEV-463

- log上errorになる
- 送信はされない
- [すべて] カテゴリ以外には表示されなくなる
- [ ] エラー内容
    I, [2016-07-05T04:01:03.591724 #4695]  INFO -- : #<TypeError: no implicit conversion of nil into String>

- [X] どのformにいれるとエラーになるのか
    - [X] header
    - [X] footer
    - [X] 本文
    - [X] html本文
    全部NG

- [ ] どの条件でNGが出ているのか?
  そこまで見る必要無いのか?

******* Done : 埋め込みの展開結果
CLOSED: [2016-09-15 Thu 17:11]
https://bbank-devs.atlassian.net/browse/RUBYDEV-465
- 血液型
    - A型の場合 [a] と書き込まれる (他未検証)
    - 大文字 + 型 がbetterか?

- 退職
    - falseと boolで表示される

- タグ / 本支店タグ
    - 空の場合、[]と 書き込まれる

    - 法人顧客 + 担当社員の場合、以下の様に出力される
      タグ      | #<Tag::ActiveRecord_Associations_CollectionProxy:0x00000011057ec0>
      本支店タグ | #<Tag::ActiveRecord_Associations_CollectionProxy:0x00000011057ec0>

- 業種
    - 空の場合[]と書き込まれる
    - 値がある場合は、[\"jp-b1050\"]　となる (web UI上は、鉄鋼業などの単語と表示されている)

- 敬称
    - 法人顧客 + 担当社員の場合、以下の様に出力される
        #<HonorificTitle:0x00000011e00658>



******* Todo header, footer, 本文, 本文html

****** Done 氏名
CLOSED: [2016-07-11 Mon 16:10]
https://bbank-devs.atlassian.net/browse/RUBYDEV-454

氏名が検索条件に入ると、エラーになる
複数条件下においても

****** Done 退職済みのデータが配信先一覧に表示される。実際には送信されない。
CLOSED: [2016-07-11 Mon 16:10]
https://bbank-devs.atlassian.net/browse/RUBYDEV-466

- 退職済みのデータが配信先一覧に表示される
- jobは実行されるが、実際には送信されない。

****** Done 過去の日付が入力可能
CLOSED: [2016-07-07 Thu 12:06]
https://bbank-devs.atlassian.net/browse/RUBYDEV-457

****** Done 画面遷移して戻った場合
CLOSED: [2016-07-07 Thu 11:59]
https://bbank-devs.atlassian.net/browse/RUBYDEV-456

検索条件が表面上見えなくなっている

- ["メールアドレス","指定の値に等しい","hamaguchi@bbank.jp"]
- filttering項目を視認不可 (ハイライトもなく、検索条件もblankのまま)

****** Done 未送信、送信済み、中止を選択しても設定が表示されない。
CLOSED: [2016-07-07 Thu 11:57]
https://bbank-devs.atlassian.net/browse/RUBYDEV-453
create_job前では、すべてのみに表示される
create_job後、未送信に表示される
- その後、run_jobで送信されると、送信済みに遷移する

***** test
****** 作成 -> create_job(未送信) -> 中止 -> run_job -> ?
- create_job後、未送信にカテゴライズ
- 配信中止状態へ
- その後、runb_jobで送信処理
- 実際に送信されるか?

結果、送信される
なんか途中に別処理挟まないとダメか?

****** 配信中止状態で作成 -> create_job -> ?
- [X] 送信対象になるか?
ならない

****** 作成 -> create_job -> 配信中止 -> create_job -> ?
- [X] 送信対象のままか?
  送信対象のまま

****** 作成 -> create_job -> 配信中止 -> create_job -> 送信 -> ?
- [X] 送信されるか?
  送信される

***** ?
****** 配信日時
******* valid
- 配信日時が過去かつ未送信の場合、送信対象となる
- 100年 : 正常
- 1000年 : 正常
- 100000年 : 正常(送信対象にならない
- 異常な値の直接入力
  当日の日付に直される

****** 送信完了後
******* 保存可能だが意味あるのか?
******* 設定は変更不可
******* コピー可能

****** メール送信
******* Todo 未送信のまま送信設定を削除するとどうなるのか?
******* Todo 配信先未選択の場合は?
配信先画面を一度も開いたことが無い場合の動作

******* 絞り込み
******** メールアドレス登録がないも場合、jobが作成されるか
される

******** Done 送信はされるのか?
CLOSED: [2016-09-15 Thu 17:11]
DB作成したら再現しなくなったよ

********* 症状
https://bbank-devs.atlassian.net/browse/RUBYDEV-455
送信されない. jsonに書き出されなかった.
未送信状態のまま. 送信済みは遷移しない.

以下のエラーが出て続けている
--------------------------------------------------------------------------------------------------------------------------------
I, [2016-07-04T05:19:59.504724 #31346]  INFO -- : #<RuntimeError: Invalid MailDeliverySetting type>
I, [2016-07-04T05:20:09.505977 #31346]  INFO -- : Finding a pending job...
I, [2016-07-04T05:20:09.509923 #31346]  INFO -- : A pending job is found
I, [2016-07-04T05:20:09.510011 #31346]  INFO -- : Starting to run the found job
I, [2016-07-04T05:20:09.517164 #31346]  INFO -- : Extracting recipients
I, [2016-07-04T05:20:09.517296 #31346]  INFO -- : An exception is occured!
I, [2016-07-04T05:20:09.517320 #31346]  INFO -- : #<RuntimeError: Invalid MailDeliverySetting type>
I, [2016-07-04T05:20:19.518688 #31346]  INFO -- : Finding a pending job...
I, [2016-07-04T05:20:19.520786 #31346]  INFO -- : A pending job is found
I, [2016-07-04T05:20:19.520843 #31346]  INFO -- : Starting to run the found job
I, [2016-07-04T05:20:19.526856 #31346]  INFO -- : Extracting recipients
I, [2016-07-04T05:20:19.526944 #31346]  INFO -- : An exception is occured!
I, [2016-07-04T05:20:19.526965 #31346]  INFO -- : #<RuntimeError: Invalid MailDeliverySetting type>
I, [2016-07-04T05:20:29.528625 #31346]  INFO -- : Finding a pending job...
I, [2016-07-04T05:20:29.530481 #31346]  INFO -- : A pending job is found
I, [2016-07-04T05:20:29.530527 #31346]  INFO -- : Starting to run the found job
I, [2016-07-04T05:20:29.537356 #31346]  INFO -- : Extracting recipients
I, [2016-07-04T05:20:29.537442 #31346]  INFO -- : An exception is occured!
I, [2016-07-04T05:20:29.537461 #31346]  INFO -- : #<RuntimeError: Invalid MailDeliverySetting type>
--------------------------------------------------------------------------------------------------------------------------------


******* 配信先
******** Done 配信メール新規作成レコードが末尾に表示される
CLOSED: [2016-09-15 Thu 17:11]
https://bbank-devs.atlassian.net/browse/RUBYDEV-467
大量のレコードがある場合、新規作成したレコードが pagenateの彼方に移動しないと見れない.



******* 絞り込んだ上で送信できるか?
|------+--------------+---------+----------------------+----------------+------------|
| name | mail address | syubetu | Kokyaku tantou bumon | kokyaku status | result     |
|------+--------------+---------+----------------------+----------------+------------|
| x    |              |         |                      |                | impossible |
|      | o            |         |                      |                | ok         |
|      |              | o       |                      |                | ok         |
|      |              |         | o                    |                | ok         |
|      |              |         |                      | o              | ok         |
|------+--------------+---------+----------------------+----------------+------------|

****** unsubscriber
送信対象外 : 正常動作

**** 自動配信
***** Done bugs
CLOSED: [2016-07-11 Mon 16:10]
****** Done 必須項目のプルダウン未選択でエラーポップアップがでるが、エラー箇所にメッセージが表示されない
CLOSED: [2016-07-11 Mon 16:10]
https://bbank-devs.atlassian.net/browse/RUBYDEV-470

- 自動配信の 配信基準日
- 顧客ステータスを選択し、プルダウンは未選択で保存
- エラーポップで [エラーメッセージの該当箇所を〜] とでるが、メッセージはなく、ハイライトされないため該当箇所がわかりづらい
    (最初プルダウンが現れた事に気づかなかったため)
****** Done jobが作成されたあと、settingを消すとログにエラーがでる
CLOSED: [2016-07-11 Mon 16:10]
I, [2016-07-06T13:00:32.717397 #14798]  INFO -- : #<RuntimeError: Invalid MailDeliverySetting type>

****** Done 未入力、エラーハイライトが必須で無い部分にもかかる
CLOSED: [2016-07-11 Mon 16:10]
https://bbank-devs.atlassian.net/browse/RUBYDEV-477

***** 誕生日
とりあえず遅れた
***** 顧客ステータス変更日
***** 営業ステータス変更日
送信は可能

- 営業ステータス
    - 新規
    - 終了日 : 2016-07-05  /  DB上unix time、1467644400

- result
    - 以下だと nil
        SaleAction.where("end_at >= ? AND end_at < ?", Time.parse('2016-7-5 0:0:0').to_i, Time.parse('2016-07-06 0:0:0').to_i)

    - 以下だと result あり
        Time.zone = ('Tokyo')
        SaleAction.where("end_at >= ? AND end_at < ?", Time.zone.parse('2016-7-5 0:0:0').to_i, Time.zone.parse('2016-07-06 0:0:0').to_i)

- 原因?
    - Time zoneのずれ
    - DB上の値を変換すると以下となるため、ずれが発生している
        - Time.at(1467644400)      # => 2016-07-04 15:00:00 +0000
        - Time.zone.at(1467644400) # => Tue, 05 Jul 2016 00:00:00 JST +09:00

***** 売上日
ok
**** ステップメール
***** 誕生日
- [X] step1未送信の場合, step2&3は送信不可
- [X] step1送信可能
- [X] 同一stepが複数回作成されないこと
- [X] step sequenceで送信できること

*** Done [#A] birth_month_day 作成時, 日付がずれる & 全体日付対応
CLOSED: [2016-07-11 Mon 16:09] SCHEDULED: <2016-07-04 Mon>
CLOCK: [2016-07-11 Mon 09:40]--[2016-07-11 Mon 16:09] =>  6:29
CLOCK: [2016-07-08 Fri 15:42]--[2016-07-08 Fri 22:30] =>  6:48

- [X] 修正
- [ ] 念のため、production環境の状態を竹中さんに確認.

**** 考察
***** 時刻のずれ
- JSTを保存

- MySQLは、UTCとして扱う
    - JST +9時間を想定しているが
      UTCとして扱うため、期待の数値から-9時間される
***** 対策
現在時刻とJSTとし、-9時間して調整する。

**** review request
以下reviewお願い致します。
http://ec2-54-64-57-99.ap-northeast-1.compute.amazonaws.com/cru/ALLIN-CR-2221
https://github.com/BusinessBank/allin/pull/3039

以下ticketの対応になります
https://bbank-devs.atlassian.net/browse/RUBYDEV-459

**** まずは考察
- システム全体はUTC
    - これは変更してはいけない。
    - 変更する場合、処理後にUTCへ戻す.
- 値保存時などは一時的にJSTを使っていると思われる

- mail配信系もJSTに統一する必要がある

**** 修正すべき箇所は?
***** model / lib
- [X] app/models/mail_delivery_job.rb
- [X] app/models/mail_delivery_setting.rb

- [X] lib/mail_delivery/job_creator.rb:

- [X] lib/mail_delivery/recipient_extractor.rb
    - [X] lib/mail_delivery/customer_status_changed_recipient_extractor.rb
    - [X] lib/mail_delivery/person_birthday_recipient_extractor.rb
    - [X] lib/mail_delivery/product_sold_recipient_extractor.rb
    - [X] lib/mail_delivery/sale_state_changed_recipient_extractor.rb

- [X] lib/task/allin/mail_delivery.rb
  不要

- [X] app/services/mail_delivery_setting_service.rb

***** spec
- [X] spec/factories/mail_delivery_event_factory.rb
  Fake::なので無視

- [X] spec/lib/mail_delivery_spec.rb
- [X] spec/lib/mail_delivery/job_creator.rb

- [ ] lib/mail_delivery/recipient_extractor.rb
    - [ ] lib/mail_delivery/customer_status_changed_recipient_extractor.rb
    - [ ] lib/mail_delivery/person_birthday_recipient_extractor.rb
    - [ ] lib/mail_delivery/product_sold_recipient_extractor.rb
    - [ ] lib/mail_delivery/sale_state_changed_recipient_extractor.rb

- [X] spec/models/mail_delivery_job_spec.rb
- [X] spec/models/mail_delivery_setting_spec.rb

- [X] spec/services/auto_mail_delivery_setting_service_spec.rb
- [X] spec/services/mail_delivery_event_service_spec.rb
  Faker::なので無視
- [X] spec/services/step_mail_delivery_setting_service_spec.rb



***** FROM_UNIXTIMEつかっている箇所の確認が必要
**** def zone
- recipeint系は、extendしてるので大丈夫
- 他の奴らのつながりを

**** TODO書いてたので持ってきて記述
  def zone
    # Get timezone.

    # FIXME
    # 日本以外で使われるのであれば事業部ごとにタイムゾーンを切り替えられるようにすべき
    # Related issue is ALLIN-814

    @zone ||= ActiveSupport::TimeZone.new("Asia/Tokyo")
  end

**** mysql
mysql_tzinfo_to_sql /usr/share/zoneinfo | mysql -u root mysql

**** Done 各所の日付保存形式
CLOSED: [2016-07-06 Wed 21:34]
***** BatchMailDeliverySetting.all[0].schedule_at
schedule_at : JST

***** AutoMailDeliverySetting.all[0].schedule_at
***** StepMailDeliverySetting.all[0].schedule_at
***** MailDeliverySetting
- [X] schedule_at : JST
   - batch : 時刻指定あり (1970-01-01 hh:mm:ii)の模様

***** MailDeliveryJob
- [X] process_on  : JST
- [X] created_at  : JST

***** SaleAction
- [X] start_at    : JST (0時)
- [X] end_at      : JST (0時)

***** SalesDocument
- [X] sold_at    : JST (0時)

***** LoyaltyHistory
- [X] ranked_at : JST

***** Loyalty
- [X] ranked_at : JST

***** Person
- [X] birth_date       : JST
- [X] birth_month_date : 要修正 作成時に timezoneが utcだった

**** Todo zone.atをTime.zone.atへ戻す
module TimeZone が mailer.rb内に定義されているのは分かり難いのでファイルを分けて下さい。
また、 `zone.at` が `Time.zone.at` と同義であれば、アプリケーション全体で統一性をもたせるため`Time.zone.at` にして下さい。
その場合は module TimeZone 自体が不要となると思うので削除して下さい。

*** Done [#A] UnsubscribeRecipientExtractorを実装する
CLOSED: [2016-07-04 Mon 19:46] SCHEDULED: <2016-07-02 Sat>
CLOCK: [2016-07-03 Sun 10:18]--[2016-07-03 Sun 20:39] => 10:21
CLOCK: [2016-07-02 Sat 14:46]--[2016-07-02 Sat 15:35] =>  0:49

https://bbank-devs.atlassian.net/browse/RUBYDEV-407


**** 概要
配信停止の配信先を抽出する

**** 抽出先は二つ
***** MailDeliverySettingに紐づくMailDeliveryUnsubscriber
****** (1)MailDeliverySettingを抽出
MailDeliveryJobに紐づくMailDeliverySettingを抽出する。
MailDeliverySetting#parentが存在する場合は、parentをMailDeliverySettingとして使用する。

****** (2)MailDeliveryUnsubscriberを抽出
上記のMailDeliverySettingに紐づくMailDeliveryUnsubscriber(1:N)を抽出する。

****** (3)MailDeliveryRecipientを生成して返す
******* (3-1)mail_delivery_unsubscriber.all_recipient_idがnilではない場合
******** 注意事項
all_recipient_idがnilではない場合でも参照先のall_recipientが削除されている場合があり得るので、
そのような場合はMailDeliveryRecipinetを生成しないで次のレコードに処理をスキップする。

******** 以下の様な感じで生成する
MailDeliveryRecipient.new(
  mail_delivery_job: job,
  mail_addressable: mail_delivery_unsubscriber.all_recipient.mail_addressable,
  all_resipient: mail_delivery_unsubscriber.all_recipient)

******* (3-2)mail_delivery_unsubscriber.all_recipient_idがnilの場合
******** 注意事項
mail_addressable_idがnilではない場合でも参照先のmail_addressableが削除されている場合があり得るので、
そのような場合はMailDeliveryRecipinetを生成しないで次のレコードに処理をスキップする。


******** 以下の様な感じで生成する
MailDeliveryRecipient.new(
  mail_delivery_job: job,
  mail_addressable: mail_delivery_unsubscriber.mail_addressable)

***** 人(Person)に直接紐づくMailDeliveryUnsubscriber
****** (1)MailDeliverySettingを抽出
MailDeliveryJobに紐づくMailDeliverySettingを抽出する。
MailDeliverySetting#parentが存在する場合は、parentをMailDeliverySettingとして使用する。

****** (2)MailDeliveryUnsubscriberを抽出
上記のMailDeliverySetting#company_idを使用して

    MailDeliveryUnsubscriber#company_id = MailDeliverySetting#company_id
    MailDeliveryUnsubscriber#unsubscribe_type = "unsubscribe_all"

という条件でMailDeliveryUnsubscriberを抽出する

****** (3)MailDeliveryRecipientを生成して返す
以下の様な感じで生成する

MailDeliveryRecipient.new(
  mail_delivery_job: job,
  mail_addressable: mail_delivery_unsubscriber.mail_addressable)

**** 注意点
***** all_recipient_idがnilではない場合
においても参照先のall_recipientが削除されている場合があり得るので、
そのような場合はMailDeliveryRecipinetを生成しないで次のレコードに処理をスキップする。

(3-2)mail_delivery_unsubscriber.all_recipient_idがnilの場合
以下の様な感じで生成する

--------------------------------------------------------------------------------
MailDeliveryRecipient.new(
  mail_delivery_job: job,
  mail_addressable: mail_delivery_unsubscriber.mail_addressable)
--------------------------------------------------------------------------------

***** mail_addressable_idがnilではない場合
においても参照先のmail_addressableが削除されている場合があり得るので、
そのような場合はMailDeliveryRecipinetを生成しないで次のレコードに処理をスキップする。


***** 重複するPersonが複数抽出されるが
問題がないはずなのでとりあえずunique処理は不要でよい。

**** ableの動作
able

- ID/type無
  不明

- ID/type有
  不明


- ID/type有 & 参照先無
  nil

- ID/type有 & 参照先有
  data

*** Done [#A] logger
CLOSED: [2016-07-02 Sat 15:35] SCHEDULED: <2016-07-02 Sat>
CLOCK: [2016-07-02 Sat 13:53]--[2016-07-02 Sat 14:36] =>  0:43
CLOCK: [2016-07-02 Sat 12:26]--[2016-07-02 Sat 12:40] =>  0:14

https://bbank-devs.atlassian.net/browse/RUBYDEV-380

allin/lib/tasks/allin/mail_delivery.rake

logをfileに吐き出せないので調査
対象は
create_job
run_jobの2種

**** まずは
rails loggerで、どこへmessageが書き込まれるか確認。

**** uniqloのlogger見る

*** Done [#A] 402 : 顧客ステータス変更日 - CustomerStatusChangedRecipientExtractor
CLOSED: [2016-07-02 Sat 15:35] SCHEDULED: <2016-07-02 Sat>
CLOCK: [2016-07-01 Fri 11:30]--[2016-07-01 Fri 20:30] =>  9:00
顧客ステータス変更日の
「n週前/週前x曜日」での抽出
「nヶ月前/ヶ月後x日」での抽出

*** Done [#A] 404 : 売上日 - ProductSoldRecipientExtractor
CLOSED: [2016-07-02 Sat 15:35] SCHEDULED: <2016-07-02 Sat>
売上日の
「n週前/週前x曜日」での抽出
「nヶ月前/ヶ月後x日」での抽出

*** Done ステータス変更日実装
CLOSED: [2016-06-30 Thu 16:30]
- [X] 基準日は「LoyaltyHisoty」の「ranked_at」
- [X] 「LoyaltyHistory」の「status_id」と「MailDeliverySetting」の「base_dateable.id」が等しい
- [X] 上記のCustomer#individual?がtrueの場合は、Customer#customerableでPersonを抽出する。
- [X] 上記のCustomer#corporate?がtrueの場合は、Customer#contactsでContactを抽出する。
- [X] 上記で抽出したBaseDateableとMailAddressableを使用してMailDeliveryRecipientを生成する。

- [X] 当日
- [X] n日前後
- [X] n週間前後

- [ ] spec
    - [ ] contactsのデータが作成できず. comment out で回避

*** Done [#A] 売上日
CLOSED: [2016-07-01 Fri 20:32] SCHEDULED: <2016-06-30 Thu>
CLOCK: [2016-06-30 Thu 08:41]--[2016-06-30 Thu 14:05] =>  5:24

- [X] 起点となるモデルは"SalesLine"
- [X] 以下の条件を全て満たす"SalesLine"を抽出する。なお、sold_atに売上日が日付で入っている想定。
- [ ] "sales_line.sales_document.sold_at"             = "mail_delivery_setting.base_date"
- [ ] "sales_line.sales_document.customer.company_id" = "mail_delivery_setting.company_id"
- [ ] "sales_line.product_id"                         = "mail_delivery_setting.base_dateable_id"

- [ ] 当日
- [ ] n日前後
- [ ] n週間前後

- [ ] spec

* Done [#B] Ruby-webpage / 社員向けページ
CLOSED: [2016-09-29 Thu 12:31]
** road map
** Meatings
*** [2016-04-06 Wed]
**** codeを分けた方がいいか？ 沼沢から見たあれこれ
- opsWorksはrepositoryを一つのみ管理する。
  ruby-webpageからcodeを分けると、管理が煩雑になる

- URLのアクセス制御は、Nginxから可能

** base
https://drive.google.com/drive/u/0/folders/0B_bY9-Y5CRRIN1ZYamYxLWJRQ0k

*** road map
*** 参考サイト
http://gihyo.jp/dev/serial/01/nodejs

とりあえず、vagrantでのinstall方法を確認しつつ
各versionの固定方法。
** env
**** deploy
**** 仮想開発環境 apps environment
server : 1.x.x
db     : 1.x.x
bower  : 1.x.x

**** development
**** staging
**** production

** 疑問
- [ ] title :: msg
- [ ] title :: msg
- [ ] title :: msg
- [ ] title :: msg
- [ ] title :: msg

** todos
*** Done opsworks調査
CLOSED: [2016-06-02 Thu 15:12]
multi rails layer(app)は管理できるか?
できそうだが、管理が煩雑そう。
http://qiita.com/ainame/items/3672b8fb160d15cd759f

ちゃんと調べてから報告

*** rails側で、URLアクセス制御できるか?
domain見て、アクセス可否を決定するなど.

nginxで吸収した方がいいか?
面倒だな
変数で一気に設定できるなら、楽か

* Done [#B] research media encode                             :organic_style:
CLOSED: [2016-09-29 Thu 12:27]
Added: [2015-09-14 Mon 09:21]

- [ ] その他、encode系のサービス調査
- [ ] mobile / PC端末の、一般的なサポートcodecの確認
- [ ] アプロードテスト
      > 動画の場合 MP4形式(H264、AAC-LC)、最大解像度640x480px でアップロードしてください。
      実際に上げて試してみよう

* Done [#B] manatuku | 機能調査                               :organic_style:
CLOSED: [2015-11-03 Tue 17:21]
*** 作業指針
**** ユースケースを全て抽出
**** シナリオを元に機能に差分がないか確認
**** testも行う (基本的なエラー程度、細かいものは不要) // クリティカルという意味だろう
// 向こうが欲しいのは箇条書き程度

**** 機能一覧の方が粒度が細かい。できれば、この辺りまで落とし込んで欲しい。
テスト観点?

**** ソース
ソース確認はおかしな動きがあった時に確認

**** Q&A
疑問があれば随時書き込み。
既存ヴェンダーへの質問とする。

*** stg環境
url
id / pass
*** astar install
*** ユースケース / シナリオ
**** スプレッドシートへ書き出し
**** ユースケース抽出 / 差分確認
- 要求定義書のユースケースを元とする
- 差分があれば更新 ()

*** 画面遷移図
SSか

* Done [#B] GMO version対応調査                               :organic_style:
CLOSED: [2016-02-01 Mon 19:07]
Added:      [2015-10-28 Wed 13:05]

4page目
https://drive.google.com/a/ruby-dev.jp/file/d/0B32RFNW_xx8eeFg0S2hIODQycVk/view

*** Done open sslのversionが対応しているかどうか
SCHEDULED: <2015-11-05 Thu> CLOSED: [2015-11-10 Tue 20:20]

- [X] SHA-2   : OK SHA-256対応の証明書であった
      http://valuessl.net/ssl-certificate/rapidssl/rapidssl.php
      https://ja.wikipedia.org/wiki/SHA-2

- [X] OpenSSl : OK OpenSSL 1.0.1k-fips

- [X] http://aws.amazon.com/jp/security/security-bulletins/aws-to-switch-to-sha256-hash-algorithm-for-ssl-certificates/?nc1=h_ls
      ruby test scriptを実行し、200 ok

- [X] openssl s_client -connect manatuku.com:443 -tls1_2 | more

*** Done SSL 報告
SCHEDULED: <2015-11-11 Wed> CLOSED: [2015-11-13 Fri 14:20]

* Done [#B] finc : slack
  SCHEDULED: <2015-11-05 Thu> CLOSED: [2015-11-09 Mon 20:00]
Added:      [2015-11-05 Thu 16:34]

*** slack確認
*** github登録
*** アクセス確認
* Done [#C] 動画変更サンプル                                  :organic_style:
CLOSED: [2016-09-29 Thu 12:27]
Added: [2015-10-16 Fri 15:43]

# business bank / organic styleで使用

*** 要件
**** mana2kuの指定する動画を上げる。
- S3へupload
**** 動画を各デバイス向けに変換する
- transdcoderで各デバイス向けに変換する
- S3へ保存
- Cloudfrontへキャッシュ
**** 動画配信URLへアクセスする
- 各デバイス向けへのファイルを転送する

*** 使用言語, toolなど
**** player
video.js

*** Done [#A] [50%] transcoder 基本部分
CLOSED: [2016-07-26 Tue 20:45]
- [X] :  AWS UI上での動作確認
- [ ] :  ruby APIの使い方
- [X] :  変換Fileの命名即の確認
      original File / encoded file共に指定可能
      sampleでは、hash化していたが…うーん

- [ ] :  s3のdir構造どうする? とりあえず適当に考えよう

*** Done [#A]  S3 / cloudfront / transcoder
CLOSED: [2016-07-26 Tue 20:45]
**** [100%] Done 同期
**** Done 権限設定
CLOSED: [2015-10-19 Mon 16:04]

よくわからんが、
S3ではアクセスNG
cloudfrontではアクセスok

**** Done video.js
CLOSED: [2015-10-19 Mon 23:31]
**** Done Railsで構築
CLOSED: [2015-10-21 Wed 12:38]
***** Done deviseの判定方法
CLOSED: [2015-10-21 Wed 12:38]
***** Done mobile / PCでのhtml分岐
CLOSED: [2015-10-21 Wed 12:38]
slim fileへ切り出し
2ファイルに分ける必要はあるか?

で、どうやって一部読み込みする方法は?
**** 各設定の見直し
transcoder動かす所まで来たが、各設定の意味を理解していない

- SNS
- SQS
- transcoder
- S3 / cloudfront
**** s3 :  API確認
S3向けのAPIは色々ある
どれを使っているか、manatukuソースから確認

**** transcoder : jobのステータス確認方法
sns / sqs?
**** transcoder : 変換後のファイルのプレビュー

*** Done [#B] 料金調査
DEADLINE: <2015-11-06 Fr>i CLOSED: [2015-11-10 Tue 19:00]

# 着手できていなければ、11/06に相談
# 場合によっては来週へ回す

- [X] SNS : 無料
      SQSへの配信は無料。
- [X] SQS : 無料
      100万件まで無料。1変換で多くとも数通のため、ここまで達しない。
      超えた場合は、0.4$ / 100万件

- [X] upload周り
- [ ] その他料金があれば

- [ ] knowhow pageへ料金追記
      https://sites.google.com/a/ruby-dev.jp/knowhow/aws/elastic-transcoder

- [ ] 容量ベースでの試算 : excelへ纏める
      時間課金と、容量課金の混在となっているため、
      容量単位で試算する

*** Done [#B] HLS調査
CLOSED: [2016-02-24 Wed 12:07] DEADLINE: <2015-11-06 Fri>

時間があれば調査

* Done [#D] SNS                                                       :bb:BB:
CLOSED: [2016-09-29 Thu 12:30]
** Meatings
*** [2016-08-19 Fri]
- 3種にまたがっている
- stagingにdeploy
- 小針さんが月曜日に見る

**** deploy
- allin
    - master NG
    - cherry pickで稲葉さんの修正部分をもっていく
    - 佐藤さん担当

- sns
    - staging

- notification
    - staging

**** env
- notificationだけ
- sendgrid API key
    - メールが飛ぶ権限のみ
    - 自分で作成
- mail 通知をtrue
- 自動で環境変数

**** ssh key
佐藤さんが、account作成予定

**** 作業通知
通知する


*** [2016-04-15 Fri]
- allin側でgroup_idを作成可能
- 新たに、ユーザーが所属するgroup_idを得るAPIを取得
- 白幡さんが認証部分のtestを追加する

*** [2016-04-11 Mon]
- db index
- test 修正 (command一発で回せるように)
- test ws
----------------
- [ ] DBメンテナンススクリプト作成
    - [ ] 紐付いていないattachemtnの削除
    - [ ] 紐付いていないcommentsの削除
    - [ ] 紐付いていない添付ファイルの削除
    - [ ] 古いフィードの削除
- routing
    - routeがあること
    - 規定のrouteのみにアクセスできることなど

*** [2016-03-16 Wed]
- config/express で allinとの認証をしている
- passport.authenticateで行っている
- strategi/beare 8行目

- allAccount.model 31行目

- 認証に成功した時は、何が帰る?


- feec.ctrl
  req内に.user
  allin account model object


**** access制御
- group_id check
  root/v1/root.js 13行目

- 他の権限は?
  update時に、作られた
  user, compy, group

**** SQL injection test
  model.feed.js 112行目
  モンゴの挙動を構文を流し込んで変な動きをしないか

**** 紐づくレコードの削除テスト
delete時、comment / attachmentの削除

**** gimon
- 実コード内に、test向けのmockを書いてもいいのか?

*** [2016-03-08 Tue]
CLOSED: [2016-03-08 Tue 11:33]
CLOCK: [2016-03-08 Tue 14:40]--[2016-03-08 Tue 18:13] =>  3:33
CLOCK: [2016-03-08 Tue 10:05]--[2016-03-08 Tue 11:33] =>  1:28

**** web API
***** passport
****** 認証機能
http://passportjs.org/
https://github.com/jaredhanson/passport
http://knimon-software.github.io/www.passportjs.org/
https://github.com/jaredhanson/passport-local

****** 権限機能
****** plugin
  - facebook, twitterなど複数の認証pluginがある
  - 使用中
    - https://github.com/jaredhanson/passport-http-bearer
    - https://github.com/mbell8903/passport-custom

***** passport-bearer
http API

***** passport-custom
web socket
***** housin
- 新規作成以外はpassportでの認証をしない
- よみ出しが2回になるから
- route/feed
  - postのrouteないで認証
  - post以外は、ctrlかmodelでチェック

***** id
- allinからもらう
  - company_id
  - accound_id

- nodejs側で生成
  - room_name
  - group_id (将来allin側からもらう)

**** web socket
***** config/socketio.js
***** name space
- web socketを機能単位で分割
- sessionが別になる
- app.js
- const ioNS = io.of('/sns');

***** room
- 末尾に /sns をつけないと接続できない

**** AWSを立ち上げる
- 今日中か、明日の朝まで


【②BB ファイルアップロードデモ】
    ・allin-sns
      ・ブランチ：file-upload-demo
    ・allin_sns_demo
      ・ブランチ：master
    - nodejs
      - production以外で立ち上げる. devで


- S3 key : serverへ設定
    export AWS_ACCESS_KEY_ID=AKIAJ22ZFJZY62TLV6FQ
    export AWS_SECRET_ACCESS_KEY=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


【修正内容】
https://git.ruby-dev.jp/business_bank_group/allin_sns_demo/blob/master/app%2Fassets%2Fjavascripts%2Fservices%2Fweb_socket.coffee
6行
ioSocket = io.connect('http://localhost:5000/sns')
↓
ioSocket = io.connect('http://localhost:5000/')

*** [2016-02-16 Tue]
**** node.jsのpackage管理 [nodebrew] を用いる
  http://webdesign-dackel.com/2015/09/29/vagrant-node-express4-mongodb/

**** gulpは使わない
**** jade (slimの様なbuild系
**** 自動化したいこと
- test自動化
  coverage

- babel
  ES6 -> ES5
  babelfy, watchfy
  使い方調査

**** jasmine, yeomanは使わない
  npmから削除

**** Todo babel
***** todo
- 基本的な使い方
- 差分コンパイルの手法
- これらの必要とするpackageの確認とinstall
- 実動作確認?

***** 予想packages
babel:6.5.x
babel-core:6.5.x
babel-preset-es2015:6.5.x
browserify:13.0.x
watchify:3.7.x

babelify?

***** 命名則
- app/modes/
  - user.js (babel compile後こちらになる)
  - user_es6.js (src)

// 後々、dir分けるかも

**** express dir構造
*** [2016-02-08 Mon]
**** 分割統治
青柳さんがフロント
柴田さんがモデルを検討
そこからAPIが決まってくる。
APIが決まらないと、server sideも設計ができない (routingなど)

**** 沼沢作業
- test frame work, test runnerの調査
- mongooseでmodel作って、テストを記述
- modelについては以下
https://git.ruby-dev.jp/business_bank_group/sns/issues/1

*** [2016-02-02 Tue]
**** 仮想開発環境 vagrant
***** Centos : 6.5
***** node.js：5.5.x
***** mongodb：3.4.x
***** redis
***** express：4.13.x
***** nvm：nodeのバージョン管理
**** package
***** Jasmin
***** Karma
***** Mongoose
*** [2016-02-01 Mon]
**** base
- node.js
- framework express
- 運用方法...?
- all-inとの連携
- 仕様、wireframeの
- MongoDB

- node.jsの基本的な調査
  - expressを使って、websocketを使った簡単なアプリのイメージ?
  - 簡単なチャットアプリでも作って…
  - テスト環境、運用環境の調査
  - 認証どうする?

- まずは練習. sample appの作成
- test環境、運用環境の調査・構築
  - dev, staging, production環境の構築に必要な要素の調査
  - dev環境はdockerで作ろうかな

- node.js側はAPIだけ. UIは無し
- express : routing, apiの絡み

**** 進め方
まずはsample appの作成

- base
   - node.js 最新安定版
   - MongoDB 最新安定版

- 既存 sample app

- mvc model

- 開発環境
    - gulp
    - yeoman
    - grunt

- test
    -

- package管理
   - npm

- point
    - websocket

***


*** [2016-07-12 Tue]
Link preview打ち合わせ

- server sideでやる
- background jobで走らせる
- UI側に専用の表示領域を持たせる
- 書き込み後のデータ取得でok

*** Done SNS 打ち合わせ
CLOSED: [2016-03-09 Wed 09:38] SCHEDULED: <2016-03-03 10:30 Thu>

**** APIの変更
  更新のAPI修正

**** elacticBeans
**** elastiCash
**** mongoDBのaws service調査

** base
*** 参考サイト
http://gihyo.jp/dev/serial/01/nodejs

とりあえず、vagrantでのinstall方法を確認しつつ
各versionの固定方法。

** 環境 / 構築
*** Todo 本番環境構築手順
**** mongo
- [ ] : AMIから作成
    - [ ] primary
    - [ ] secondary
    - [ ] arbiter
- [ ] : secondary : backup crontab設定
- [ ] : primary
    - [ ] setup script IP調整. arbiter
    - [ ] 実行
**** ELB
- [ ] : cross zone off
- [ ] : session id設定
- [ ] : health check
- [ ] :
- [ ] :
- [ ] :
**** sns
- [ ] : health checkはnginx
- [ ] :
- [ ] :
**** route53
- [ ] : sns
- [ ] : elb

**** elasticache
**** sed
*** deploy
**** ruby-dev aws
https://git.ruby-dev.jp/business_bank_group/allin-sns/issues/14

***** sns
# 初回
$ pm2 deploy ./app/config/deploy/deploy.json production setup

# update
# 以下、server再起動もされる. 修正必要な部分も
$ pm2 deploy ./app/config/deploy/deploy.json production update --force

***** sns 環境変数
https://git.ruby-dev.jp/business_bank_group/allin-sns/issues/19

# node user ~/.bashrc
export PATH=$HOME/.nodebrew/current/bin:$PATH
export AWS_ACCESS_KEY_ID=
export AWS_SECRET_ACCESS_KEY=

export S3_BUKCET=ruby-dev-all-in

export SSL_KEY_PATH=/home/node/ssl/server.key
export SSL_CERT_PATH=/home/node/ssl/cert
export SSL_CA_PATH=/home/node/ssl/ca

export REDIS_URL=allin-sns.hc7k9f.0001.apne1.cache.amazonaws.com
export REDIS_PASS=''

export MONGO_URL="mongodb://10.0.1.100:27017/sns-development,10.0.1.101:27017/sns-development,10.0.2.101:27017/sns-development"
export MONGO_USER=''
export MONGO_PASS=''

export AUTH_SERVER_URL=10.0.1.114

***** demo
- 直接入ってgit pull
- ec2-user ~/replace.sh を実行 (API URLを自動置換)
- monogoidをmsg従い修正

*** 仮想開発環境 apps environment

修正は以下でいいか
https://git.ruby-dev.jp/business_bank_group/allin-sns/issues/1

- install redis for vagrant environment
- テストフレームワークの調査と、実際に書く。
  設置構造は、調査しながら。

**** 資料
@s-numasawa: 以下の資料（記載途中みたいだけど）が、社内SNSの環境構築の参考になりそう。

https://bbank-devs.atlassian.net/wiki/pages/viewpage.action?pageId=22511659
https://bbank-devs.atlassian.net/wiki/display/ALLIN/Directory+Structure+of+PLv2
https://bbank-devs.atlassian.net/wiki/display/ALLIN/Instruction+for+Setup+PLv2+development+environment


**** node.js  : 5.5.x
nodebrewで指定可能
npmがついてくる

**** mongodb  : 3.2.x
公式マニュアルあり
書籍あり

https://drive.google.com/drive/u/0/folders/0By_vdgUt8tGjNm1oSTJJdG5jZm8
https://drive.google.com/drive/u/0/folders/0By_vdgUt8tGjaHZRX2NrSjBXZ2M

***** 認証設定
***** command memo
****** create user
use admin
db.createUser(
  {
    user: "root",
    pwd: "root",
    roles:
    [
      {
        role: "userAdminAnyDatabase",
        db: "admin"
      }
    ]
  }
)

****** auth in cli
db.auth('username', 'password')
// 1が返ればok

****** db list
show dbs
// db list

**** redis    : ?
***** 要調査
which version is better?
どうやって構築する?

本来は別serverだが、とりあえずlocalで
あと、用途がわかっていない
設定も

***** [2016-02-08 Mon]
とりあえず仮想環境内(1serverにまとめる)にいれろとの指示。
実際、使い方や方針も決まっていないので、とりあえずということだと思われる。

**** express  : 4.13.x
最新版
4.13の入れ方要確認

**** nodebrew : 0.9.3
nodeのバージョン管理
大きな変化がなければ、最新版で

**** bower    : 1.7.x
https://github.com/BusinessBank/allin-web/blob/master/bower.json
1.7.2 or 1.7.7いずれか
どちらがいいのか

angularjs, adminLTE
柴田さん指示、angular, adminLTEはまだ入れなくていい[2016-02-02 Tue]

サーバサイドではnode.jsのnpmでパッケージ管理
それのクライアントサイド版

// bower初期化
$ bower init

// bower.jsonへsaveする
$ bower install xxxx --save

// bower.jsonを元に読み込む
$ bower install

***** angularjs : 1.4.7 (all-inに合わせ)
***** adminLTE : 2.3.2 (all-inに合わせ)


**** non-needs
***** gulp     : 3.9.x
最新版、minor versionまで固定

gulpでサーバー起動したりしてる
何かできるらしい

***** Babel    : これも最新版か?
convert ECMAS6 to ECMAS5

*** mongoDB setting
**** 参考サイト
  http://hivecolor.com/id/42

**** default port
27017

**** auth databas
--username , -u
--password , -p

**** mongo shell 操作
http://qiita.com/ANTON072/items/e0534daa4b2fb0f553eb
http://qiita.com/morizyun/items/b9f7d8f79803d80e9a21

**** mongo DB構造
http://qiita.com/svjunic/items/285e9cf20169d70aa1fa

*** Done [#A] demo環境構築 on aws
CLOSED: [2016-03-09 Wed 14:02]
**** AWSを立ち上げる
***** 今日中か、明日の朝まで
***** 【②BB ファイルアップロードデモ】
- allin-sns
  - ブランチ：file-upload-demo
- allin_sns_demo
  - ブランチ：master
- nodejs
  - productionで起動

- S3 key : serverへ設定
    export AWS_ACCESS_KEY_ID=AKIAJ22ZFJZY62TLV6FQ
    export AWS_SECRET_ACCESS_KEY=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


【修正内容】
https://git.ruby-dev.jp/business_bank_group/allin_sns_demo/blob/master/app%2Fassets%2Fjavascripts%2Fservices%2Fweb_socket.coffee
6行
ioSocket = io.connect('http://localhost:5000/sns')
↓
ioSocket = io.connect('http://localhost:5000/')

*** Done AWS : demo 環境構築
CLOSED: [2016-03-09 Wed 15:21]
CLOCK: [2016-03-08 Tue 14:00]--[2016-03-08 Tue 14:39] =>  0:39

書き換えscript 導入済み
何かの情報のためにとっておく
**** 修正箇所1
***** allin-sns
****** app/config/env/*
  host: 'allin-sns.hc7k9f.0001.apne1.cache.amazonaws.com',

****** app/config/env/test.js
****** app/config/express.js
  origin: '*'

****** app/models/attachment.js
const upload_dest = 'http://localhost:5000/uploads/';

***** allin_sns_demo
****** app/assets/javascripts/resources/v1/comment.coffee
-    resource = $resource 'http://localhost:5000/api/v1/comments/:id/:action', {id: '@id'}, methods
+    resource = $resource 'http://52.193.187.111:5000/api/v1/comments/:id/:action', {id: '@id'}, methods

****** app/assets/javascripts/resources/v1/feed.coffee
-    resource = $resource 'http://localhost:5000/api/v1/feeds/:id/:action', {id: '@id'}, methods
+    resource = $resource 'http://52.193.187.111:5000/api/v1/feeds/:id/:action', {id: '@id'}, methods

****** app/assets/javascripts/resources/v1/attachment.coffee
-    resource = $resource 'http://localhost:5000/api/v1/feeds/:id/:action', {id: '@id'}, methods
+    resource = $resource 'http://52.193.187.111:5000/api/v1/feeds/:id/:action', {id: '@id'}, methods

****** app/assets/javascripts/services/web_socket.coffee
-    ioSocket = io.connect('http://localhost:5000')
+    ioSocket = io.connect('http://52.193.187.111:5000')

**** 修正箇所2
***** 今日中か、明日の朝まで
***** 【②BB ファイルアップロードデモ】
・allin-sns
    ・ブランチ：file-upload-demo

・allin_sns_demo
    ・ブランチ：master

・ nodejs
    ・ production以外で立ち上げる. devで

***** S3 key : serverへ設定
export AWS_ACCESS_KEY_ID=AKIAJ22ZFJZY62TLV6FQ
export AWS_SECRET_ACCESS_KEY=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

***** 【修正内容】
https://git.ruby-dev.jp/business_bank_group/allin_sns_demo/blob/master/app%2Fassets%2Fjavascripts%2Fservices%2Fweb_socket.coffee
6行
ioSocket = io.connect('http://localhost:5000/sns')
↓
ioSocket = io.connect('http://localhost:5000/')

** 疑問
- [X] 添付ファイル :: file sizeに制限はあるか?
    - limit 5M

- [X] session_id :: 本番でのsession idは?
                    for elb setting
                    無し
** 要修正?
- deploy setting周り
    - 各serverのURLなど(必要項目確認)

- あっちで修正していた
- 一応見直そう

** roadmap
1. (着手中)： 通知アイコンに通知件数と通知内容を表示する機能
2. (着手中)：グループのメニューの表示方法の修正
3. (2.5人日)：SNSで画像以外のファイル（PDFやExcelなど）をアップロード／ダウンロード出来るようにする。
4.  (9人日)：画像のリサイズ
----->4.5. URLリンクで飛べるだけ。

６月末までにーーーーーーーーーーーーーーーーーー

----->4.5. 文字と画像を持ってきて表示する。
5. (5人日)：自分の所属しているグループに投稿があったときにメールで通知
6. (1.5人日)：自分の投稿にコメントがついたときにメールで通知
7. (1.5人日)：自分のコメントにコメントがついたときにメールで通知
8. (5人日)：通知機能での未読時間が一定時間を超えたときメールで通知
9. (7人日)：グループに件数表示
10.(1.5人日)：投稿者の写真を表示する（画像は人事マスタから（Person）に保存）


*** 13日以降にmailの方は割り当てられるかも

*** 4
**** file upload
DL時file名を変更した。
AWS上のDLじゃないとうまくいかない。

動作確認.

**** resize sisin
- attachment modelで判断
- resizeは、image magickで

**** 既存 fileは、別対応で
**** 要件
さて、先日の「画像を元サイズのままでダウンロードしたいのでは？」
という点については、３と４の対応で解決したいと思います。

３の対応では、「写真を追加」の横に「ファイルを追加」のリンクを追加します。
「ファイルを追加」はPDFやエクセルファイルなどの共有が主な目的ですが、
画像ファイルもアップロードできるようにします。
この場合は、元のファイルサイズのままアップロードできるようにします。
このとき画像は表示せず、ファイルアイコンで表示されます。

4の「写真を追加」は、表示スピードを最優先にして画像をリサイズして保存します。

といった感じで進めてください。

** todos
*** Done [#A] Deploy
CLOSED: [2016-08-19 Fri 18:21] SCHEDULED: <2016-08-19 Fri>

**** [100%] deploy
- [X] sns
    - [X] master merge to stg

- [X] notification
    - [X] restart.sh
        - [X] API
        - [X] on/off true
    - [X] master merge to stg

**** [100%] test
- [X] feed 投稿
    - [X] 同一group者へ通知されること
    - [X] 投稿者自身へは飛ばないこと
    - [X] 送信メール
        - [X] from noreply@all-in.xyz
        - [X] 氏名が正常か
        - [X] 投稿されたgroup名は正常か
        - [X] 投稿日時は正常か
        - [X] 投稿本文は?
            全分表示される.
            特に文字化けせず.(全角、半角、記号、半角カナ、文字数最大など)
        - [X] Image / file
            - [X] image : メールに添付しない
            - [X] file : メールに添付しない
        - [X] link
            - [X] 投稿feedの特定位置ではなく、allin-sns feed ALL top が開く
            - [X] Link URL
                  sendgridのURLに変わっている. APIの設定修正
            - [X] html中の埋め込み画像
                  表示されない
                  sendgridのURLに変わっている. APIの設定修正
                - linkがbugってる. 修正済み

- [X] comment
    - [X] Feed作成者へ送信されること
    - [X] comment投稿者自身へは飛ばないこと
    - [X] Feed作成者自身がcommentした場合は?
          Feed作成者へ飛んだ
    - [X] commentへのcomment
          わかりませんでした
    - [X] 送信メール
        - [X] from noreply@all-in.xyz
        - [X] 氏名が正常か
        - [X] 投稿日時は正常か
        - [X] 投稿本文は?
            全分表示される.
            特に文字化けせず.(全角、半角、記号、半角カナ、文字数最大など)
        - [X] Image / file
            - [X] image : メールに添付しない
            - [X] file : メールに添付しない
        - [X] link
            - [X] 投稿feedの特定位置ではなく、allin-sns feed ALL top が開く
            - [X] Link URL
                - sendgridのURLに変わっている. APIの設定修正
            - [X] html中の埋め込み画像
                - 表示されない
                - sendgridのURLに変わっている. APIの設定修正
                - linkがbugってる. 修正済み

- [X] 編集
    - [X] mail飛ばない

- [X] 削除
    - [X] mail飛ばない

- [X] Like/unlike
    - [X] mail飛ばない

*** Paused [#B] test作成
CLOSED: [2016-09-13 Tue 19:16] DEADLINE: <2016-03-29 Tue>
CLOCK: [2016-04-21 Thu 11:01]--[2016-04-21 Thu 19:00] =>  7:59
CLOCK: [2016-04-20 Wed 12:56]--[2016-04-20 Wed 13:15] =>  0:19
CLOCK: [2016-04-20 Wed 10:00]--[2016-04-20 Wed 12:00] =>  2:00
CLOCK: [2016-04-18 Mon 14:27]--[2016-04-18 Mon 18:31] =>  4:04
CLOCK: [2016-04-18 Mon 10:26]--[2016-04-18 Mon 11:03] =>  0:37
CLOCK: [2016-04-15 Fri 12:55]--[2016-04-15 Fri 18:00] =>  5:05
CLOCK: [2016-04-14 Thu 13:43]--[2016-04-14 Thu 18:00] =>  4:17
CLOCK: [2016-04-14 Thu 12:25]--[2016-04-14 Thu 13:40] =>  1:15
CLOCK: [2016-04-12 Tue 12:59]--[2016-04-12 Tue 16:02] =>  3:03
CLOCK: [2016-04-11 Mon 16:53]--[2016-04-11 Mon 17:01] =>  0:08
CLOCK: [2016-04-02 Sat 15:34]--[2016-04-02 Sat 21:13] =>  5:39
CLOCK: [2016-04-02 Sat 10:00]--[2016-04-02 Sat 14:46] =>  4:46
CLOCK: [2016-04-01 Fri 16:24]--[2016-04-01 Fri 19:30] =>  3:06
CLOCK: [2016-04-01 Fri 14:40]--[2016-04-01 Fri 15:50] =>  1:10
CLOCK: [2016-04-01 Fri 10:20]--[2016-04-01 Fri 13:53] =>  3:33
CLOCK: [2016-03-31 Thu 12:46]--[2016-04-01 Fri 16:46] =>  4:00
CLOCK: [2016-03-30 Wed 16:27]--[2016-03-31 Thu 18:00] =>  1:33
CLOCK: [2016-03-24 Thu 11:00]--[2016-03-24 Thu 13:50] =>  2:50
CLOCK: [2016-03-23 Wed 14:00]--[2016-03-23 Wed 17:52] =>  3:52
CLOCK: [2016-03-18 Fri 14:00]--[2016-03-18 Fri 16:53] =>  2:53
CLOCK: [2016-03-17 Thu 13:00]--[2016-03-17 Thu 19:12] =>  6:12
:PROPERTIES:
:ARCHIVE_TIME: 2016-03-16 Wed 15:13
:ARCHIVE_FILE: ~/.org/gtd/todo.org
:ARCHIVE_OLPATH: projects/SNS/todos
:ARCHIVE_CATEGORY: todo
:ARCHIVE_TODO: Todo
:ARCHIVE_ITAGS: bb BB
:ORDERED:  t
:END:

**** 事前確認
- [ ] 何をTestするべきなのか。参考サイトを

- [ ] nock使い方
    - [ ] data 作れるか?
    - [ ] githubをさらっと

- [ ] fixture / factory girlの様な機能
    - [ ] nockにもdata 生成があったような

- [ ] test種類の考察
    - [ ] api. 図で考察
    - [ ] model
    - [ ] ctrl

**** [33%] coding
1. [-] feature
     + [-] APIテスト / web
         - [X] 必要項目の考察
         - [X] mock server
         - [ ] /api/v1/feeds/
             - [ ] get
             - [ ] post
         - [ ] /api/v1/feeds/:id
             - [ ] get
             - [ ] put
             - [ ] delete

         - [ ] comment
         - [ ] attachment
     + [ ] APIテスト / websocket
         - [ ] 必要項目の調査
         - [ ] feed
         - [ ] comment
         - [ ] attachment
     + [ ] 認証テスト
         - [ ] 認証方法の確認。(headerが無いと強制的に401)
         - [ ] mock server修正

     + [ ] アクセス制御テスト
2. [X] モデル
     - [X] feed
     - [X] comment
     - [X] attachment
     - [X] allinAccount
3. [ ] ルート
     - [ ] WebAPI

**** ?
- 存在しないrecordを削除した際、200okがかえる
- put :idで、404が返る。accound idなどが異なる場合。
- error時のbodyが不明

**** Todo error code / bodyなどの収集
**** Todo testが落ちる. command.
mocha app/spec/**/*.spec.js
だったかな、これだとNG

**** Todo web socket
https://bbank-devs.atlassian.net/browse/RUBYDEV-262

***** Todo conflict解消
原因はmongooseのconnection

***** Done feed
CLOSED: [2016-05-20 Fri 18:25]
***** Done comment
CLOSED: [2016-05-20 Fri 18:25]
***** Done like
CLOSED: [2016-05-20 Fri 18:25]
***** Done attachment
CLOSED: [2016-05-20 Fri 18:25]
**** Todo feedとcommentのSpec追加
https://bbank-devs.atlassian.net/browse/RUBYDEV-278

feedとcommentのcontentsのmax_contents_lengthのSpecを追加する。

**** Todo Routing spec
https://bbank-devs.atlassian.net/browse/RUBYDEV-207
**** dones
***** Done 直列化
CLOSED: [2016-04-21 Thu 11:01]
        it('', co.wrap(function *() {
            const limit  = 5;
            const offset = 0;

            // request setting
            let uri     = `${url}?group_id=${fixture.valid_seeds[0].group_id}&limit=${limit}&offset=${offset}`;
            let accept  = fixture.valid_seeds[0].header;
            let content = fixture.valid_seeds[0].header;
            let auth    = fixture.valid_seeds[0].authorization;

            // get index
            let res = yield get(uri, accept, content, auth);
        }));



        it('', co.wrap(function *() {
            // request setting
            let uri     = `${url}?group_id=${fixture.valid_seeds[0].group_id}`;
            let body    = {'contents': '1'};
            let accept  = fixture.valid_seeds[0].header;
            let content = fixture.valid_seeds[0].header;
            let auth    = fixture.valid_seeds[0].authorization;

            // get index
            let res = yield post(uri, body, accept, content, auth);
            res.statusCode.should.equal(ok);
            res.body.contents.should.equal(body.contents)




            let body = {'contents': '2'};
        }));


        it('success destroy and return 200 ok with valid id', co.wrap(function *() {
            const feeds    = yield find_feed({'posted_by': fixture.valid_seeds[0].account_id});
            const comments = yield find_comment({feed_id: feeds[0].id});
            comments.length.should.equal(fixture.comment_per_feed);

            // request setting
            let uri     = `${url}${feeds[0].id}?group_id=${fixture.valid_seeds[0].group_id}`;
            let accept  = fixture.valid_seeds[0].header;
            let content = fixture.valid_seeds[0].header;
            let auth    = fixture.valid_seeds[0].authorization;

            // get index
            let res = yield del(uri, accept, content, auth);
            res.statusCode.should.equal(ok);
            res.body.id.should.equal(feeds[0].id);

        }));



        it('', co.wrap(function *() {
            const feeds = yield find_feed({'posted_by': fixture.valid_seeds[0].account_id});

            // request setting
            let uri     = `${url}?group_id=${fixture.valid_seeds[0].group_id}`;
            let body    = {'contents': 'this is test text', 'feed_id': feeds[0].id};
            let accept  = fixture.valid_seeds[0].header;
            let content = fixture.valid_seeds[0].header;
            let auth    = fixture.valid_seeds[0].authorization;

            // post
            let res = yield post(uri, body, accept, content, auth);
            res.statusCode.should.equal(ok);
            res.body.contents.should.equal(body.contents)


        }));



        it('', co.wrap(function *() {
            const feeds = yield find_feed({'posted_by': fixture.valid_seeds[0].account_id});

            // request setting
            let uri     = `${url}${feeds[0].comments[0].id}?group_id=${fixture.valid_seeds[4].group_id}`;
            let body    = {'contents': '2'};
            let accept  = fixture.valid_seeds[0].header;
            let content = fixture.valid_seeds[0].header;
            let auth    = fixture.valid_seeds[0].authorization;

            // post
            let res = yield del(uri, body, accept, content, auth);
            res.statusCode.should.equal(not_found);
            res.body.should.not.be.empty;
            res.body['error-info'].should.not.be.empty;
            res.body.message.should.equal(not_found_error_message);
        }));


        it('success upload : 同一ユーザーでの複数回upload', co.wrap(function *() {
            const pre_feeds  = yield find_feed({'posted_by': fixture.valid_seeds[0].account_id});
            const upload_dir = get_uploaded_attachment_path(fixture.valid_seeds[0].company_id, '/');
            const pre_files  = yield readdir(upload_dir);

            // request setting
            let uri     = feed_attachment_url(pre_feeds[0].id, fixture.valid_seeds[0].group_id);
            let file    = fixture.jpg_file_paths[0];
            let accept  = fixture.valid_seeds[0].header;
            let content = fixture.valid_seeds[0].header;
            let auth    = fixture.valid_seeds[0].authorization;

            // upload
            let res = yield post(uri, file, accept, content, auth);

            // file check
            const post_files = yield readdir(upload_dir);
            let filename = get_filename(res.body.url);

            // feed model check
            const post_feeds = yield find_feed({'_id': pre_feeds[0]._id});

            // attachment model check
            const post_attachment = yield find_attachment({});


            // second request setting
            file = fixture.jpg_file_paths[1];

            // second upload
            res = yield post(uri, file, accept, content, auth);

            // file check
            const last_files = yield readdir(upload_dir);
            filename = get_filename(res.body.url);

            // feed model check
            const last_feeds = yield find_feed({'_id': pre_feeds[0]._id});

            // attachment model check
            const last_attachment = yield find_attachment({});
        }));



        it('', co.wrap(function *() {
            const pre_comments  = yield find_comment({'posted_by': fixture.valid_seeds[0].account_id});
            const upload_dir = get_uploaded_attachment_path(fixture.valid_seeds[0].company_id, '/');
            const pre_files  = yield readdir(upload_dir);

            // request setting
            let uri     = comment_attachment_url(pre_comments[0].id, fixture.valid_seeds[0].group_id);
            let file    = fixture.jpg_file_paths[0];
            let accept  = fixture.valid_seeds[0].header;
            let content = fixture.valid_seeds[0].header;
            let auth    = fixture.valid_seeds[0].authorization;

            // upload
            let res = yield post(uri, file, accept, content, auth);

            // file check
            const post_files = yield readdir(upload_dir);
            let filename = get_filename(res.body.url);

            // comment model check
            const post_comments = yield find_comment({'_id': pre_comments[0]._id});

            // attachment model check
            const post_attachment = yield find_attachment();


            // second request setting
            file = fixture.jpg_file_paths[1];

            // second upload
            res = yield post(uri, file, accept, content, auth);

            // file check
            const last_files = yield readdir(upload_dir);
            filename = get_filename(res.body.url);

            // comment model check
            const last_comments = yield find_comment({'_id': pre_comments[0]._id});

            // attachment model check
            const last_attachment = yield find_attachment({});
        }));



        it('success delete : comment', co.wrap(function *() {
            const pre_comments  = yield find_comment({'posted_by': fixture.valid_seeds[0].account_id});
            const upload_dir = get_uploaded_attachment_path(fixture.valid_seeds[0].company_id, '/');
            const pre_files  = yield readdir(upload_dir);

            // request setting
            let uri     = comment_attachment_url(pre_comments[0].id, fixture.valid_seeds[0].group_id);
            let file    = fixture.jpg_file_paths[0];
            let accept  = fixture.valid_seeds[0].header;
            let content = fixture.valid_seeds[0].header;
            let auth    = fixture.valid_seeds[0].authorization;

            // upload
            let pre_res = yield post(uri, file, accept, content, auth);

            // file check
            const post_files = yield readdir(upload_dir);
            let filename = get_filename(pre_res.body.url);

            // feed model check
            const post_comments = yield find_comment({'_id': pre_comments[0]._id});

            // attachment model check
            const post_attachment = yield find_attachment({});


            // second request setting
            uri = delete_attachment_url(pre_res.body.id, fixture.valid_seeds[0].group_id);

            // delete
            const post_res = yield del(uri, accept, content, auth);

            // file check
            const last_files = yield readdir(upload_dir);
            filename = get_filename(pre_res.body.url);

            // feed model check
            const last_comments = yield find_comment({'_id': pre_comments[0]._id});

            // attachment model check
            const last_attachment = yield find_attachment({});
        }));

***** Done like - error追加
CLOSED: [2016-04-21 Thu 11:01]
***** Done 落ちているspecの修正
CLOSED: [2016-04-21 Thu 11:01]
***** feed : fail update
{ message: 'Web API UNAUTHORIZED',
  'error-info': 'Error: Web API UNAUTHORIZED\n    at Function.AllinAccountSchema.statics.authenticate.process.nextTick.AllinAccountSchema.statics.groupAuthorization (/vagrant/allin-sns/app/models/allinAccount.js:77:19)\n    at Strategy._verify (/vagrant/allin-sns/app/config/strategies/custom.js:8:17)\n    at Strategy.authenticate (/vagrant/allin-sns/node_modules/passport-custom/lib/strategy.js:60:8)\n    at attempt (/vagrant/allin-sns/node_modules/passport/lib/middleware/authenticate.js:348:16)\n    at authenticate (/vagrant/allin-sns/node_modules/passport/lib/middleware/authenticate.js:349:7)\n    at Layer.handle [as handle_request] (/vagrant/allin-sns/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/vagrant/allin-sns/node_modules/express/lib/router/index.js:312:13)\n    at /vagrant/allin-sns/node_modules/express/lib/router/index.js:280:7\n    at Function.process_params (/vagrant/allin-sns/node_modules/express/lib/router/index.js:330:12)\n    at next (/vagrant/allin-sns/node_modules/express/lib/router/index.js:271:10)\n    at Function.handle (/vagrant/allin-sns/node_modules/express/lib/router/index.js:176:3)\n    at router (/vagrant/allin-sns/node_modules/express/lib/router/index.js:46:12)\n    at Layer.handle [as handle_request] (/vagrant/allin-sns/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/vagrant/allin-sns/node_modules/express/lib/router/index.js:312:13)\n    at /vagrant/allin-sns/node_modules/express/lib/router/index.js:280:7\n    at Function.process_params (/vagrant/allin-sns/node_modules/express/lib/router/index.js:330:12)\n    at next (/vagrant/allin-sns/node_modules/express/lib/router/index.js:271:10)\n    at complete (/vagrant/allin-sns/node_modules/passport/lib/middleware/authenticate.js:250:13)\n    at /vagrant/allin-sns/node_modules/passport/lib/middleware/authenticate.js:257:15\n    at pass (/vagrant/allin-sns/node_modules/passport/lib/authenticator.js:421:14)\n    at Authenticator.transformAuthInfo (/vagrant/allin-sns/node_modules/passport/lib/authenticator.js:443:5)\n    at /vagrant/allin-sns/node_modules/passport/lib/middleware/authenticate.js:254:22\n    at IncomingMessage.req.login.req.logIn (/vagrant/allin-sns/node_modules/passport/lib/http/request.js:63:13)\n    at Strategy.strategy.success (/vagrant/allin-sns/node_modules/passport/lib/middleware/authenticate.js:235:13)\n    at verified (/vagrant/allin-sns/node_modules/passport-http-bearer/lib/strategy.js:126:10)\n    at /vagrant/allin-sns/app/config/strategies/bearer.js:15:20\n    at IncomingMessage.<anonymous> (/vagrant/allin-sns/app/models/allinAccount.js:57:28)\n    at emitNone (events.js:67:13)\n    at IncomingMessage.emit (events.js:166:7)\n    at endReadableNT (_stream_readable.js:905:12)\n    at nextTickCallbackWith2Args (node.js:474:9)\n    at process._tickDomainCallback (node.js:429:17)' }

***** comment
- updateにbody_idがついてないとエラー

****** post : fail create comments. no feed id. return 500
{ message: 'comment create_custom feed not found',
  'error-info': 'Error: comment create_custom feed not found\n    at Query.<anonymous> (/vagrant/allin-sns/app/models/comment.js:193:23)\n    at /vagrant/allin-sns/node_modules/kareem/index.js:177:19\n    at /vagrant/allin-sns/node_modules/kareem/index.js:109:16\n    at nextTickCallbackWith0Args (node.js:452:9)\n    at process._tickDomainCallback (node.js:422:13)' }

****** post : fail create comments. no contents. return 500
{ code: 'bad_request',
  errors: {
      contents: [ 'required' ]
}}

{ message: { code: 'bad_request', errors: { contents: [Object] } } }

****** fail update feeds and return 404 error. another accound_id
****** fail update feeds and return 404 error. another company_id
***** attachment
****** /api/v1 /api/v1/attachments/upload/?feed_id=xxxx feed : fail upload : 認証エラー:
****** /api/v1 /api/v1/attachments/upload/?comment_id=xxxx comment : fail upload : 認証エラー:
****** /api/v1 DELETE /api/v1/attachments/:id fail delete : 認証エラー:
****** /api/v1 DELETE /api/v1/attachments/:id fail delete : 存在しないID:
***** Done 以下不要 | 未使用API
CLOSED: [2016-03-26 Sat 12:36]
test不要.添削

- /api/v1/comments/:id
    - GET
- /api/v1/comments
    - GET
- /api/v1/attachments/:id/download
    - GET

***** Done bodyのgroup_idは廃止
CLOSED: [2016-04-01 Fri 10:51]
query parameterにつけるそうな
test修正

***** Done faker
CLOSED: [2016-04-12 Tue 12:58]
- [ ] test data作成方法
- [ ] faker 自体は後でいいか

***** Done feed
CLOSED: [2016-04-02 Sat 15:16]
***** /api/v1/feeds/:id
****** Done get
CLOSED: [2016-03-30 Wed 18:22]
showは実装されていない

******* req
******** header
******** body
******* res
******** header
******** body
****** Done put
CLOSED: [2016-03-30 Wed 18:22]
Request URL:https://sns-app-002.ruby-dev.jp:5000/api/v1/feeds/56f24add80b3d07833a7e8f9

- [X] : id指定でcontentsを書き換えられること

- [X] : bodyが無い場合、updateできないこと
- [X] : 存在しないIDではerrorが返る事
- [X] : company_idが異なる場合、errorになること
- [X] : account_idが異なる場合、errorになること


******* req
******** header
Accept:application/json, text/plain, */*
Accept-Encoding:gzip, deflate, sdch
Accept-Language:ja,en-US;q=0.8,en;q=0.6
Authorization:Bearer LFi7mBf80qdWYVDhUaqQNbTRogby8787Ebm1HtXjIvtGGVOl97HV8Oi1OnWrd2uReiU06Hs9UFTjy6wIx23JlOyt2zcLKV6WXwIXiYlty8uV34wYGnEvoksqzGlDPzLo
Connection:keep-alive
Content-Length:93
Content-Type:application/json;charset=UTF-8
Host:sns-app-002.ruby-dev.jp:5000
Origin:http://52.193.39.75
Referer:http://52.193.39.75/?
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.87 Safari/537.36
******** body
{group_id: "__all__", id: "56f24add80b3d07833a7e8f9", contents: "asdfasdfasdfaasdfasdfasdf"}
******* res
******** header
Access-Control-Allow-Origin:*
Connection:keep-alive
Content-Length:241
Content-Type:application/json; charset=utf-8
Date:Wed, 23 Mar 2016 07:52:22 GMT
ETag:W/"f1-EhGGp8qn5HAoR83AgIqHkg"
Strict-Transport-Security:max-age=86400
X-Content-Type-Options:nosniff
X-Download-Options:noopen
X-Frame-Options:SAMEORIGIN
X-XSS-Protection:1; mode=block
******** body
{
  "id": "56f24add80b3d07833a7e8f9",
  "contents": "asdfasdfasdfaasdfasdfasdf",
  "created_at": "2016-03-23T07:50:53.618Z",
  "updated_at": "2016-03-23T07:52:22.203Z",
  "posted_by": "7b732aa2fdc011e3acbb22000a7c8883",
  "likes": [],
  "attachments": [],
  "comments": []
}
****** delete
Request URL:https://sns-app-002.ruby-dev.jp:5000/api/v1/feeds/56f24add80b3d07833a7e8f9?group_id=__all__

- [X] : 指定idが削除される事。
- [X] : 紐づくcommentが削除される事。
- [ ] : 紐づくattachmentが削除される事。

- [X] : 存在しないIDでは削除できないこと。
- [X] : company_idが異なる場合、errorになること
- [X] : account_idが異なる場合、errorになること

******* req
******** header
Accept:application/json, text/plain, */*
Accept-Encoding:gzip, deflate, sdch
Accept-Language:ja,en-US;q=0.8,en;q=0.6
Authorization:Bearer LFi7mBf80qdWYVDhUaqQNbTRogby8787Ebm1HtXjIvtGGVOl97HV8Oi1OnWrd2uReiU06Hs9UFTjy6wIx23JlOyt2zcLKV6WXwIXiYlty8uV34wYGnEvoksqzGlDPzLo
Connection:keep-alive
Host:sns-app-002.ruby-dev.jp:5000
Origin:http://52.193.39.75
Referer:http://52.193.39.75/?
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.87 Safari/537.36

******** body
group_id:__all__

******* res
******** header
Access-Control-Allow-Origin:*
Connection:keep-alive
Content-Length:33
Content-Type:application/json; charset=utf-8
Date:Wed, 23 Mar 2016 07:53:27 GMT
ETag:W/"21-hYOls9kueOdpuddAFHr5XA"
Strict-Transport-Security:max-age=86400
X-Content-Type-Options:nosniff
X-Download-Options:noopen
X-Frame-Options:SAMEORIGIN
X-XSS-Protection:1; mode=block
******** body
{"id":"56f24add80b3d07833a7e8f9"}
***** /api/v1/feeds
****** Done get
CLOSED: [2016-03-24 Thu 18:38]
Request URL:https://sns-app-002.ruby-dev.jp:5000/api/v1/feeds?group_id=__all__

- [X] : limit5で5個帰ってくる
- [X] : body : 規定のformatであること

- [X] : headerが無い場合、読み出せない事。
- [X] : 存在しないtokenでは、読み出せない事
- [X] : 異なる company_id, group_idでは、読み出せない事。

******* test
- [ ] limit 1

******* req
******** header
Accept:application/json, text/plain, */*
Accept-Encoding:gzip, deflate, sdch
Accept-Language:ja,en-US;q=0.8,en;q=0.6
Authorization:Bearer LFi7mBf80qdWYVDhUaqQNbTRogby8787Ebm1HtXjIvtGGVOl97HV8Oi1OnWrd2uReiU06Hs9UFTjy6wIx23JlOyt2zcLKV6WXwIXiYlty8uV34wYGnEvoksqzGlDPzLo
Cache-Control:max-age=0
Connection:keep-alive
Host:sns-app-002.ruby-dev.jp:5000
If-None-Match:W/"4e6-UXROB0WRnrWNfPKWv/7QlA"
Origin:http://52.193.39.75
Referer:http://52.193.39.75/?
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.87 Safari/537.36
******** body
group_id:__all__

******* res
******** header
Access-Control-Allow-Origin:*
Connection:keep-alive
Content-Length:3676
Content-Type:application/json; charset=utf-8
Date:Wed, 23 Mar 2016 07:44:15 GMT
ETag:W/"e5c-Tbf/Gxghl5vFxkjBywGtgA"
Strict-Transport-Security:max-age=86400
X-Content-Type-Options:nosniff
X-Download-Options:noopen
X-Frame-Options:SAMEORIGIN
X-XSS-Protection:1; mode=block

******** body
[
  {
    "id": "56f2493080b3d07833a7e8f3",
    "contents": "asdfasdfasdfasdfasdfasd",
    "created_at": "2016-03-23T07:43:44.184Z",
    "updated_at": "2016-03-23T07:43:44.701Z",
    "posted_by": "7b732aa2fdc011e3acbb22000a7c8883",
    "likes": [],
    "attachments": [
      {
        "id": "56f2493080b3d07833a7e8f5",
        "created_at": "2016-03-23T07:43:44.479Z",
        "updated_at": "2016-03-23T07:43:44.480Z",
        "posted_by": "7b732aa2fdc011e3acbb22000a7c8883",
        "filename": "Sphere-HD-Wallpapers-8.png",
        "size": 1554932,
        "content_type": "image/png",
        "url": "https://ruby-dev-all-in.s3.amazonaws.com/44388244b2af11e5802c0800275eaa7c/d59d1109-1210-48a7-b20d-9531d5cebb5c.png?AWSAccessKeyId=AKIAIJEDQPGAQA376YGQ&Expires=1458719955&Signature=XEi87Q20WS11tcQvKjnVShCLCk4%3D",
        "company_id": "44388244b2af11e5802c0800275eaa7c",
        "feed_id": "56f2493080b3d07833a7e8f3",
        "comment_id": null
      }
    ],
    "comments": []
  }
]

****** Done post
CLOSED: [2016-03-30 Wed 18:22]
Request URL:https://sns-app-002.ruby-dev.jp:5000/api/v1/feeds

- [X] : 書き込んだcontentsが、resposne bodyで帰ってくること
- [X] : contentsが無い場合、失敗すること

******* req
******** header
Accept:application/json, text/plain, */*
Accept-Encoding:gzip, deflate
Accept-Language:ja,en-US;q=0.8,en;q=0.6
Authorization:Bearer LFi7mBf80qdWYVDhUaqQNbTRogby8787Ebm1HtXjIvtGGVOl97HV8Oi1OnWrd2uReiU06Hs9UFTjy6wIx23JlOyt2zcLKV6WXwIXiYlty8uV34wYGnEvoksqzGlDPzLo
Connection:keep-alive
Content-Length:49
Content-Type:application/json;charset=UTF-8
Host:sns-app-002.ruby-dev.jp:5000
Origin:http://52.193.39.75
Referer:http://52.193.39.75/?
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.87 Safari/537.36
******** body
{group_id: "__all__", contents: "asdfasdfasdfa"}
******* res
******** header
Access-Control-Allow-Origin:*
Connection:keep-alive
Content-Length:229
Content-Type:application/json; charset=utf-8
Date:Wed, 23 Mar 2016 07:50:53 GMT
ETag:W/"e5-va40VRFzfiOEqzzxbKZDfA"
Strict-Transport-Security:max-age=86400
Vary:X-HTTP-Method-Override
X-Content-Type-Options:nosniff
X-Download-Options:noopen
X-Frame-Options:SAMEORIGIN
X-XSS-Protection:1; mode=block
******** body
{
  "id": "56f24add80b3d07833a7e8f9",
  "contents": "asdfasdfasdfa",
  "created_at": "2016-03-23T07:50:53.618Z",
  "updated_at": "2016-03-23T07:50:53.618Z",
  "posted_by": "7b732aa2fdc011e3acbb22000a7c8883",
  "likes": [],
  "attachments": [],
  "comments": []
}

***** Done comment
CLOSED: [2016-04-02 Sat 15:16]
***** /api/v1/comments/:id
****** Done get : 不要
CLOSED: [2016-03-26 Sat 12:36]
******* req
******** header
******** body
******* res
******** header
******** body
****** Done put
******* req
******** header
Content-Type: application/json
Accept: application/json
Authorization: "Bearer  K1iJTJ91j4ubcj1VGRkQndUmRRBfMsPKPriYlq2vrmIuaZOj0Uj8Qj5WuHJ4mDk6wA7XPqnuW58xJKVFJBrdxLOWhXM2sP8GFQja5ZRjRYxSnzSBFclPOXlNFraihmu3"

******** body
{
  contents: 'comment contents'
}
******* res
200

******** header
******** body
{
  id: '56beda25b17d32274aa05a92',
  contents:   'comment contents',
  created_at: '1970-01-01T00:00:00.001Z',
  updated_at: '1970-01-01T00:00:00.001Z',
  posted_by: 'user id',  // ALL-IN側のユーザID
  likes: [ 'user id'], // ALL-IN側のユーザIDの配列
  attachment_files: [
    attachment_filesモデルの配列
  ],
  feed_id: '56beda25b17d32274aa05a89'
}
****** Done delete
******* req
******** header
Content-Type: application/json
Accept: application/json
Authorization: "Bearer  K1iJTJ91j4ubcj1VGRkQndUmRRBfMsPKPriYlq2vrmIuaZOj0Uj8Qj5WuHJ4mDk6wA7XPqnuW58xJKVFJBrdxLOWhXM2sP8GFQja5ZRjRYxSnzSBFclPOXlNFraihmu3"

******** body
{
なし
}
******* res
******** header
******** body
なし
***** /api/v1/comments/
****** Done get : 不要
CLOSED: [2016-03-26 Sat 12:36]
******* req
******** header
******** body
******* res
******** header
******** body
****** Done post
******* req
******** header
Content-Type: application/json
Accept: application/json
Authorization: "Bearer  K1iJTJ91j4ubcj1VGRkQndUmRRBfMsPKPriYlq2vrmIuaZOj0Uj8Qj5WuHJ4mDk6wA7XPqnuW58xJKVFJBrdxLOWhXM2sP8GFQja5ZRjRYxSnzSBFclPOXlNFraihmu3"

******** body
    {
      contents:   'comment contents',
      feed_id: '56beda25b17d32274aa05a89'
    }

******* res
******** header
******** body
    {
      id: '56beda25b17d32274aa05a92',
      contents:   'comment contents',
      created_at: '1970-01-01T00:00:00.001Z'
      updated_at: '1970-01-01T00:00:00.001Z',
      posted_by: 'user id',  // ALL-IN側のユーザID
      likes: [ 'user id'], // ALL-IN側のユーザIDの配列
      attachment_files: [
        attachment_filesモデルの配列
      ],
      feed_id: '56beda25b17d32274aa05a89'
    }
***** Done like
CLOSED: [2016-04-04 Mon 15:00]
***** /api/v1/feeds/:id/Like
- [ ] : like
    - [ ] : 自分のIDで書き込める
    - [ ] : fail like. 同一accountで複数回likeできない事
    - [ ] : fail like. 異なるcompany_idでは書き込み不可
- [ ] : unlike
    - [ ] : success
    - [ ] : success unlike. 自身のaccount_idのみunlikeされる事
    - [ ] : fail unlike. likeしていない場合unlike失敗
****** post
******* req
******** header
Content-Type: application/json
Accept: application/json
Authorization: "Bearer  K1iJTJ91j4ubcj1VGRkQndUmRRBfMsPKPriYlq2vrmIuaZOj0Uj8Qj5WuHJ4mDk6wA7XPqnuW58xJKVFJBrdxLOWhXM2sP8GFQja5ZRjRYxSnzSBFclPOXlNFraihmu3"

******** body
{
  id: '56beda25b17d32274aa05a89', // feedのID
  like: 'true'  // Likeを設定する時はtrue、Likeを解除するときはfalse
}
******* res
******** header
******** body
なし
***** /api/v1/comments/:id/Like
- [ ] : like
    - [ ] : 自分のIDで書き込める
    - [ ] : 2回目のlikeを出しても、再書き込みされないこと
    - [ ] : 他のaccountでは、書き込みできる事
- [ ] : unlike
    - [ ] : 自分のIDで削除可能
    - [ ] : 2回目のlikeを出しても、失敗すること
    - [ ] : 他のaccountでは、削除できない事
****** post
******* req
******** header
Content-Type: application/json
Accept: application/json
Authorization: "Bearer  K1iJTJ91j4ubcj1VGRkQndUmRRBfMsPKPriYlq2vrmIuaZOj0Uj8Qj5WuHJ4mDk6wA7XPqnuW58xJKVFJBrdxLOWhXM2sP8GFQja5ZRjRYxSnzSBFclPOXlNFraihmu3"

******** body
{
  id: '56beda25b17d32274aa05a89',  // commentのID
  like: 'true'  // Likeを設定する時はtrue、Likeを解除するときはfalse
}
******* res
******** header
******** body
なし
***** Done attachment
CLOSED: [2016-04-21 Thu 11:02]
***** Todo 以下テスト追記
****** 社内SNSは、現在フロント側で、画像ファイルのみアップ出来るように制限しています。
後、一度のアップロード操作で、添付出来るファイルは10ファイルまでです。
アップロードを複数に分ければ、10ファイル以上アップロード出来ます

****** fileみ指定の場合400が返るようになった
test修正

***** /api/v1/attachments/upload/?feed_id=xxxx
****** post
******* req
******** header
Content-Type: application/json
Accept: application/json
Authorization: "Bearer  K1iJTJ91j4ubcj1VGRkQndUmRRBfMsPKPriYlq2vrmIuaZOj0Uj8Qj5WuHJ4mDk6wA7XPqnuW58xJKVFJBrdxLOWhXM2sP8GFQja5ZRjRYxSnzSBFclPOXlNFraihmu3"

******** body
なし
******* res
******** header
******** body
{ id: '56ff6d171eb9c2ba37692312',
  created_at: '2016-04-02T06:56:23.423Z',
  updated_at: '2016-04-02T06:56:23.423Z',
  posted_by: '7b732aa2fdc011e3acbb22000a7c9000',
  filename: 'test.jpq',
  size: 0,
  content_type: 'application/octet-stream',
  url: 'http://localhost:5000/uploads/6a86645ee27811e59948080027599000/08faa15b-2b27-48f3-9af0-25f062e11fa2.jpq',
  company_id: '6a86645ee27811e59948080027599000',
  feed_id: '56ff6d171eb9c2ba376922d1',
  comment_id: null }
***** /api/v1/attachments/upload/?comment_id=xxxx
****** post
******* req
******** header
******** body
******* res
******** header
******** body
***** Done /api/v1/attachments/:id/download
CLOSED: [2016-03-26 Sat 12:36]
****** Done get : 不要
CLOSED: [2016-03-26 Sat 12:36]
******* req
******** header
******** body
******* res
******** header
******** body
***** /api/v1/attachments/:id
****** delete
******* req
******** header
******** body
******* res
******** header
******** body

*** Done [#B] wiki作成 - API
CLOSED: [2016-09-29 Thu 12:30]
- 実動作と変わっている可能性があるので確認
- 最終的には更新が必要

*** Done [#B] wiki作成 - WS
CLOSED: [2016-09-29 Thu 12:30]
https://bbank-devs.atlassian.net/wiki/display/~y-shibata/WS

以下の内容を転写
ただし、実動作と違いがあるので、一つ一つ確かめる
https://git.ruby-dev.jp/business_bank_group/allin-sns/issues/12

*** Done [#B] server構成の聞き取り
CLOSED: [2016-09-29 Thu 12:30]
deploy settingに必要

**** prd
        production : {
            user : "node",
            host : "xx.xx.xx.xx",
            ref  : "origin/master",
            repo : "git@github.com:allin-xxxxxxxxxxxxxxxx.git",
            path : "/var/node",
            "post-deploy" : "npm install; pm2 startOrRestart ./app/config/process/production.json --env prodution",
            env  : {
                NODE_ENV: "production"
            }
        },

**** pre
        prerelease : {
            user : "node",
            host : "xx.xx.xx.xx",
            ref  : "origin/master",
            repo : "git@github.com:allin-xxxxxxxxxxxxxxxx.git",
            path : "/var/node",
            "post-deploy" : "npm install; pm2 startOrRestart ./app/config/process/prerelease.json --env prerelease",
            env  : {
                NODE_ENV: "prerelease"
            }
        },

**** stg
        staging : {
            user : "node",
            host : "xx.xx.xx.xx",
            ref  : "origin/master",
            repo : "git@github.com:allin-xxxxxxxxxxxxxxxx.git",
            path : "/var/node",
            "post-deploy" : "npm install; pm2 startOrRestart ./app/config/process/staging.json --env staging",
            env  : {
                NODE_ENV: "staging"
            }
        },
*** Done [#B] cross zone 負荷分散は必要か?
CLOSED: [2016-06-23 Thu 14:08]
試せばいいか

*** Done [#D] 監視設定?
CLOSED: [2016-09-29 Thu 12:30]
- backup fileの状態は?
- mongo server
    - replication状態
- sns server
- elasticash

*** Done [#D] namespace / room / group_id / compnay_id
CLOSED: [2016-09-29 Thu 12:29]
https://bbank-devs.atlassian.net/browse/RUBYDEV-100?jql=text%20~%20%22namespace%22

*** Done [#D] nginx performance tuning
CLOSED: [2016-09-29 Thu 12:29]
調べよう

*** Paused [#E] wiki作成 - model
CLOSED: [2016-09-13 Tue 19:16] DEADLINE: <2016-06-10 Fri>

https://bbank-devs.atlassian.net/wiki/display/~y-shibata/model

以下の内容を転写
ただし、実動作と違いがあるので、一つ一つ確かめる
https://git.ruby-dev.jp/business_bank_group/allin-sns/issues/1


*** Waiting [#D] DB index付与
CLOCK: [2016-04-11 Mon 14:31]--[2016-04-11 Mon 16:32] =>  2:01
CLOCK: [2016-04-11 Mon 14:11]--[2016-04-11 Mon 14:28] =>  0:17
CLOCK: [2016-04-08 Fri 14:33]--[2016-04-11 Mon 09:41] => 67:08
CLOCK: [2016-04-08 Fri 11:42]--[2016-04-08 Fri 13:53] =>  2:11
CLOCK: [2016-04-07 Thu 14:07]--[2016-04-07 Thu 19:00] =>  4:53
CLOCK: [2016-04-06 Wed 16:57]--[2016-04-06 Wed 19:00] =>  2:03
CLOCK: [2016-03-30 Wed 11:07]--[2016-03-30 Wed 12:21] =>  1:14
:PROPERTIES:
:ARCHIVE_TIME: 2016-04-11 Mon 09:24
:ARCHIVE_FILE: ~/.org/gtd/projects.org
:ARCHIVE_OLPATH: SNS/todos
:ARCHIVE_CATEGORY: projects
:ARCHIVE_TODO: Todo
:ARCHIVE_ITAGS: bb BB
:END:

https://bbank-devs.atlassian.net/browse/RUBYDEV-201

**** ?
***** indexはなんのために?
索引をつけ、検索速度をあげる

***** 注意点
- 無条件でつけるわけではない

- 検索方法(条件)では、indexが使われないケースがある。
  そのため、coding、何に対してindexをはったのか考慮が必要

- delete, update時など、indexが更新されため、頻繁な左記動作がある場合、
  indexをつけない場合もある

- index数の目安
    - 6~7 (とはあるが、本当?)
    - 更新が頻繁にあるならば、2~3

- データの挿入，削除，更新が遅くなる

- data量が少ない際は、速さの差がでない場合も?

***** sort
.sort()の場合、どんな設定が必要か?
問題点は?
index側でsortした方がいいとあるが
**** experiments
***** IDのみ検索は早い
  0sec

***** index順に検索条件を記述する必要がある
基本、順番が前後すると、indexが使われなくなる
と思ったが、company_idが先頭だとindexが使用される

**** ref
***** https://github.com/syokenz/marunouchi-mongodb/tree/master/20141011/fetaro
***** 注意点
- インデックスは読込は速くなりますが、書込みは遅くなります。
- 非効率なインデックスは性能を下げます。（例えば性別をインデックスにする等）
- インデックスがメモリに乗っていれば高速ですが、インデックスがメモリに乗らない状況だとディスクＩＯが発生するためより低速になります。インデックスとよく使うデータ(いわゆる「ワーキングセット」)がメモリに乗っている状態が理想です。

***** インデックスの種類

***** http://itpro.nikkeibp.co.jp/article/COLUMN/20060111/227105/
***** http://qiita.com/kkyouhei/items/e3502ef632c48d94541d

**** command
***** create / delete
db.feed.createIndex( { number : 1 } )
db.feed.createIndex( { company_id: 1, group_id: 1, created_at: -1, posted_by: 1} )

db.feed.dropIndexes()
db.feed.dropIndex( { company_id: 1, group_id: 1, created_at: -1, posted_by: 1} )

# 途中経過
db.currentOp()

***** explain
https://docs.mongodb.org/manual/reference/explain-results/

| "nReturned":           |      1 | 見つかったドキュメント数 |
| "executionTimeMillis": | 59msec | 59                       |
| "totalKeysExamined":   |      0 | 検索したインデックス数   |
| "totalDocsExamined":   | 100000 | 検索したドキュメント数   |

scanAndOrder

***** find
# valid
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1'}).explain("allPlansExecution")
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__'}).explain("allPlansExecution")
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__', posted_by:'7b732aa2fdc011e3acbb22000a7c88833'}).explain("allPlansExecution")obje
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__', posted_by:'7b732aa2fdc011e3acbb22000a7c88830', '_id': ObjectId("570721dae138232af448eeb3")}).explain("allPlansExecution")
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__', posted_by:'7b732aa2fdc011e3acbb22000a7c88830', '_id': ObjectId("570721dae138232af448eeb3")}).explain("allPlansExecution")

# valid sort
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1'}).sort({created_at: -1}).explain("allPlansExecution")
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__'}).sort({created_at: -1}).explain("allPlansExecution")
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__', posted_by:'7b732aa2fdc011e3acbb22000a7c88833'}).sort({created_at: -1}).explain("allPlansExecution")obje
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__', posted_by:'7b732aa2fdc011e3acbb22000a7c88830', '_id': ObjectId("570721dae138232af448eeb3")}).sort({created_at: -1}).explain("allPlansExecution")
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__', posted_by:'7b732aa2fdc011e3acbb22000a7c88830', '_id': ObjectId("570721dae138232af448eeb3")}).sort({created_at: -1}).explain("allPlansExecution")

# invalid
db.feed.find({group_id: '__all__'}).explain("allPlansExecution")
db.feed.find({posted_by:'7b732aa2fdc011e3acbb22000a7c88833'}).explain("allPlansExecution")
db.feed.find({'_id': ObjectId("570627e7e1382337facb039e")}).explain("allPlansExecution")

db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', '_id': ObjectId("570627e7e1382337facb039e")}).explain("allPlansExecution")
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', '_id': ObjectId("570627e7e1382337facb039e"), group_id: '__all__', posted_by:'7b732aa2fdc011e3acbb22000a7c88833'}).sort({created_at: -1}).explain("allPlansExecution")


***** query optimizer
クエリオプティマイサ / HINT()
どのインデックスを使えば指定されたクエ リが最も効率的に実行できるかを判断するソフトウェア部品

1. scanAndOrder を避ける。クエリがソートを含むものなら、インデックスを使ってソート するようにする。
2. すべてのフィールドの条件を、インデックスによる制約で満たす。クエリセレクタ中の フィールドを含むインデックスを使うようにする。
3. クエリで範囲が指定されていたりソートを含んでいたりするなら、使われている最後の キーがその範囲やソートを満たすインデックスを選択する。

***** profiler
use stocks
db.setProfilingLevel(2)

level 1 : 低速(100 ミリ秒)な操作だけを記録する
level 2 : 全て記録


use stocks db.setProfilingLevel(1, 50)

特定の閾値をミリ秒で指定し、それ以上の時間がかかる操作だけを記録するなら、2 番目の引数と
してミリ秒での数値を渡します。

**** test data
***** in source
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__'}).sort({created_at: -1}).skip(0).limit(10)

***** valid
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1'}).explain("allPlansExecution")
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__'}).explain("allPlansExecution")
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__', posted_by:'7b732aa2fdc011e3acbb22000a7c88833'}).explain("allPlansExecution")
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__', posted_by:'7b732aa2fdc011e3acbb22000a7c88834', '_id': ObjectId("57072cbe6617646a29ffb9de")}).explain("allPlansExecution")

***** valid sort
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1'}).sort({created_at: -1}).explain("allPlansExecution")
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__'}).sort({created_at: -1}).explain("allPlansExecution")
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__', posted_by:'7b732aa2fdc011e3acbb22000a7c88833'}).sort({created_at: -1}).explain("allPlansExecution")
db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__', posted_by:'7b732aa2fdc011e3acbb22000a7c88834', '_id': ObjectId("57072cbe6617646a29ffb9de")}).sort({created_at: -1}).explain("allPlansExecution")

***** invalid
db.feed.find({group_id: '__all__', posted_by:'7b732aa2fdc011e3acbb22000a7c88834', '_id': ObjectId("57072cbe6617646a29ffb9de")}).explain("allPlansExecution")
db.feed.find({group_id: '__all__', '_id': ObjectId("57072cbe6617646a29ffb9de")}).explain("allPlansExecution")

db.feed.find({posted_by:'7b732aa2fdc011e3acbb22000a7c88834'}).explain("allPlansExecution")
db.feed.find({posted_by:'7b732aa2fdc011e3acbb22000a7c88834', '_id': ObjectId("57072cbe6617646a29ffb9de")}).explain("allPlansExecution")

db.feed.find('_id': ObjectId("57072cbe6617646a29ffb9de")}).explain("allPlansExecution")

db.feed.find({group_id: '__all__', company_id: '44388244b2af11e5802c0800275eaa7c1', posted_by:'7b732aa2fdc011e3acbb22000a7c88834', '_id': ObjectId("57072cbe6617646a29ffb9de")}).explain("allPlansExecution")
db.feed.find({group_id: '__all__', posted_by:'7b732aa2fdc011e3acbb22000a7c88834', company_id: '44388244b2af11e5802c0800275eaa7c1', '_id': ObjectId("57072cbe6617646a29ffb9de")}).explain("allPlansExecution")

db.feed.find({company_id: '44388244b2af11e5802c0800275eaa7c1', group_id: '__all__', posted_by:'7b732aa2fdc011e3acbb22000a7c88834', '_id': ObjectId("57072cbe6617646a29ffb9de")}).explain("allPlansExecution")



**** Done random数値
CLOSED: [2016-04-08 Fri 21:35]
で書き込んで、index作って
find

**** Done queryを変更する必要は?
CLOSED: [2016-04-08 Fri 20:52]
ありそう。怖いな
実験が必要だ

なさそう
**** Done test dataの作成方法
CLOSED: [2016-04-08 Fri 20:52]
- rubyでコード組んでやるか
- vagrantでtest (local動作させていない)
- aws上で

**** Done data構造の列挙と、indexが使用されるパターンの確認
CLOSED: [2016-04-08 Fri 20:52]
http://hachi.hatenablog.com/entry/20150103/1420301699

**** Done slow query?の探査
CLOSED: [2016-04-08 Fri 20:52]
***** profileを有効にする

use x
db.setProfilingLevel(2)

***** 特定の閾値をミリ秒で指定し、それ以上の時間がかかる操作だけを記録するなら、2 番目の引数としてミリ秒での数値を渡します。
use stocks db.setProfilingLevel(1, 50)


**** 後からindexを付ける場合の問題点
175page

***** 書き込みロック
175page

最後のフィールドの msg は、構築の進行状況を示します。
また、ここでインデックスの構築が書 き込みロックを取得していることを示している、lockType にも注意してください。
が実働環境であるなら、これは明らかにまずい事態になっています。
このた めに、長時間を要するインデックスの構築は、非常にやっかいなことになる可能性があるのです。
この問題に対して考えられる対策を、この後 2 つ見ていきましょう。

****** 対処 : backgroundでのindexか
インデックスをバックグラウンドで構築するよう指定できます
そうしても、インデック スの構築によって書き込みロックが取られてしまうことには変わりありませんが、
構築のジョブは 他のリーダーやライターに対してデータベースのアクセスを明け渡すようになります

db.values.ensureIndex({open: 1, close: 1}, {background: true})

****** 対処 : offline
プリカノードをオフラインにし、そ のノードだけでインデックスを構築し、その後にマスターレプリカにレプリカノードを追いつか せるという方法

**** 全query test / _idのみ検索
findoneなど抽出して、擬似的にコマンドラインから実行

**** どのqueryに付与するべきか?
- 頻繁に行われるもの
- _IDが自動でindex作成されている

**** Done lock / background
CLOSED: [2016-04-11 Mon 14:28]

***** 試しに
- 書き込みができないわけではない。恐らく、Queueに入る。
  index作成完了後に、書き込みが行われる。

- backgroundを入れると、即時書き込みが可能
  14:24:45
  14:26:

***** 結果
正確ではないが、
通常作成では1分弱
background処理では、2分弱

2倍前後の時間を要する模様

**** 各queryの実測値確認
CLOCK: [2016-04-11 Mon 14:11]--[2016-04-11 Mon 14:11] =>  0:00
console.time
console.timeEnd
を埋め込んで全箇所確認

***** model - feed
- index       : 80.978ms
- write       : 2.908ms
- update      : 4.474ms
- delete      : 3.452ms
- add like    : 2.800ms
- remove like : 4.114ms

- write attachment id  : 7.487ms
- remove attachment id : 6.766ms

- add comment id    : 2.622ms
- remove comment id : 2.005ms

***** model - comment
- write       : 5.006ms
- update      : 4.235ms
- delete      : 6.450ms
- add like    : 2.356ms
- remove like : 3.026ms

- write attachment id  : 3.226ms
- remove attachment id : 2.990ms

***** model - attachment
呼び出し方わからんかった

**** 他確かめておくことは
**** 報告
@y-shibata:

お疲れ様です

以下test dataでindexつけました
feed    : 1千万件
comment : 数万件

https://allin-development.ruby-dev.jp/#/groupware/sns

現状、DB側が極端に遅くなるは無いです。(各種読み込み、削除、書き込み)
ただ、コメント数が多いと画面の更新処理でブラウザが重いです。

**** wikiへ
https://bbank-devs.atlassian.net/wiki/pages/viewpage.action?pageId=37224703
*** Done [#A] Vagrant環境の統合
CLOSED: [2016-06-16 Thu 12:54] SCHEDULED: <2016-06-10 Fri>
CLOCK: [2016-06-16 Thu 09:30]--[2016-06-16 Thu 11:30] =>  2:00
CLOCK: [2016-06-13 Mon 14:07]--[2016-06-13 Mon 18:30] =>  4:23

- [X] 単一vmでいきましょう
    - [X] 問題点の確認. とりあえずどうしている
    - [X] 起動確認

- [X] chef
    - [X] ImageMagick / GraphicsMagick
    - [X] mongodb / mongodb-server / mongo small file
        - [X] receipe / roll
    - [X] snsへimage magickを
    - [X] npm installは手動で

- [ ] 調査 debug
    - [ ] supervisorが動かなかったらしい. こちらでは再現せず

- [-] wikiの修正
    - [X] 編集権限がない。竹中氏へmention済み
    - [ ] sns周りのsetupについて記述

      cd allin-sns
      npm install
      pm2 start app/app.js

      cd allin-sns-notification
      npm install
      pm2 start app/app.js

- [X] PR
    - [X] review
    - [X] merge

- dir structure
  /vagrant
  ┣━allin
  ┣━allin-sns
  ┗━allin-sns-noficitcation

- setup
  allin-sns / allin-sns-notification それぞれへcdし、以下コマンドで起動する
  $ npm install
  $ pm2 app/app.js

*** Done [#A] 画像間のmargin / 編集後の画像直接化修正
CLOSED: [2016-06-10 Fri 12:41] SCHEDULED: <2016-06-10 Fri>
merge指示あり
http://ec2-54-64-57-99.ap-northeast-1.compute.amazonaws.com/cru/ALLIN-CR-2017#details

*** Done [#A] reisize
CLOSED: [2016-06-08 Wed 10:16] DEADLINE: <2016-06-07 Tue>

06/06の週中頃にmerge予定
rebaseしたほういいよな?
310は既にmerged


**** setup env
brew install imagemagick
brew install graphicsmagick

**** Done image / fileの判定
CLOSED: [2016-06-01 Wed 12:45]
https://github.com/BusinessBank/allin/pull/2753/commits/72a94a0a5691aed5ec5c8e6167c83f6190c80bb2

arg のtypeで判定
image or file

**** Done install packages
CLOSED: [2016-06-01 Wed 12:46]
brew install imagemagick
brew install graphicsmagick

**** Done install npm
CLOSED: [2016-06-01 Wed 12:46]
npm install gm

**** Done resize手法 : 環境変数
CLOSED: [2016-06-02 Thu 11:32]
- 最高WxHを決める
  480 x 270

**** format拡張子判別
- isImage?みたいなのあるか
- UIの方で絞られているから、いいか?
  余裕があれば、拡張しや内部フォーマットのチェックも入れいたところだが

**** Done controller -> model
CLOSED: [2016-06-02 Thu 14:44]
console.log(req.query.file_type);

これって、modelへメソッドをもたせた方がよく無いか?
business logicとは?

**** format test
- [X] bmp
- [X] png
- [X] jpg
- [ ] gif
- [ ] tif
- [ ] pdf
- [ ] svg?
- [ ] tga
- [ ] ttf
- [ ] mpeg?
*** Done [#A] 構築手順列挙
CLOSED: [2016-04-12 Tue 12:45] SCHEDULED: <2016-03-29 Tue>
CLOCK: [2016-03-28 Mon 14:40]--[2016-03-28 Mon 17:02] =>  2:22
:PROPERTIES:
:ARCHIVE_TIME: 2016-04-05 Tue 19:24
:ARCHIVE_FILE: ~/.org/gtd/projects.org
:ARCHIVE_OLPATH: SNS/todos
:ARCHIVE_CATEGORY: projects
:ARCHIVE_TODO: Todo
:ARCHIVE_ITAGS: bb BB
:END:

- 実際centosでは、動かしていない

**** ?
- [X] : os - centos6.5
- [ ] : staging, pre-Release, production
        違いは?

**** todos
***** Done wiki修正
CLOSED: [2016-04-04 Mon 14:59]

**** 前提条件
- 全serverは、同一AZ内に設置する

**** security group
// 以下、全てinbound条件.
既存環境に合わせ適宜変更が必要.

- ELB
    - http  : 送信元 [0.0.0.0/0]
    - https : 送信元 [0.0.0.0/0]

- app server
    - ssh       : 送信元 [0.0.0.0/0]
    - port 5000 : 送信元 [0.0.0.0/0]
    - http      : [ELB sgを指定]

- mongo
    - ssh        : 送信元 [0.0.0.0/0]
    - port 27017 : [app server sgを指定]
    - port 27017 : [当mongo sgを指定]

- redis
    - port 6379 : [app server sgを指定]

**** ELB
- VPC    : [app server, mongo, redisなどと同一のVPCへ]
- AZ     : [app server, mongo, redisなどと同一のAZへ]
- subnet : [任意]

- listner
    - http         : [port 5000へforward]
    - tcp port 443 : [port 5000へforward] // https指定の場合、証明書指定が必要のため

- security group
    - 前工程で作成した、ELB用security groupを適用

- SSL
    - ~~~証明書           : [*.all-in.xyzの証明書を指定]~~~
    - ~~~security policy : [ELBSecurityPolicy-2015-05]~~~
    - 各APP serverが終端するため、設定不要

- HTTP:80/health.html
    監視間隔 : 任意

- クロスゾーン負荷分散 : [無効]

**** mongo cluster
***** hardware
EC2 instance 3台

- t2.small : 2台 [primary, secondary]
- t2.nano  : 1台 [arbiter] (実質replicationはしない端末。障害時のprimary選出権のみ持つ)
- HDD
    - primary/secondaryは、HDDをsytem, data diskに分ける
    - disk snapshotで、data diskをbackupする想定

***** software
- centos 6.7 (or 6.50
- mongodb 3.2.4

***** setting
****** ec2
- IP
    - private IPを固定。(値は任意. nodejs, mongodb cluster作成時に必要となる)

- EBS
    - system disk
        - 20G
        - 汎用SSD
    - mongo専用 disk
        - 40G
        - 汎用SSD

- security group
    - 前工程で作成した、mongo sgを指定

- key pair
    - 任意

****** install, setup
以下、official site の how to install

https://docs.mongodb.org/manual/tutorial/install-mongodb-on-red-hat/
- install mongo
    #+begin_src
    $ sudo rpm --import https://www.mongodb.org/static/pgp/server-3.2.asc
    $ sudo emacs /etc/yum.repos.d/mongodb-org-3.2.repo
    #+end_src

    #+begin_src
    [mongodb-org-3.2]
    name=MongoDB Repository
    baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.2/x86_64/
    gpgcheck=1
    enabled=1
    gpgkey=https://www.mongodb.org/static/pgp/server-3.2.asc
    #+end_src

    #+begin_src
    $ sudo yum install -y mongodb-org
    $ sudo chkconfig mongod on
    #+end_src

- setup replica set
    - $ vi /etc/mongod.conf
    - bind ip : [0.0.0.0]へ修正
    - 以下、追記
          #+begin_src shell-script
          replication:
             replSetName: allin-mongo
          #+end_src

- disk mount : mongo DB専用disk
    #+begin_src shell-script
    $ sudo rm -rf /var/lib/mongo/*
    $ sudo mkfs.ext4 /dev/xvdb
    $ sudo mount /dev/xvdb /var/lib/mongo/
    $ sudo chown mongod:mongod /var/lib/mongo/
    $ sudo rm -rf /var/lib/mongo/*
    #+end_src

- /etc/fstab へ上記mount設定を反映
    - 以下、設定例

    #+begin_src shell-script
    #
    LABEL=/     /              ext4    defaults,noatime  1   1
    tmpfs       /dev/shm       tmpfs   defaults        0   0
    devpts      /dev/pts       devpts  gid=5,mode=620  0   0
    sysfs       /sys           sysfs   defaults        0   0
    proc        /proc          proc    defaults        0   0
    /dev/xvdb   /var/lib/mongo ext4    defaults,noatime  1   1
    #+end_src

- start mongo
    - 3台全て構築後に起動
    - $ sudo /etc/init.d/mongo start

- replica set
    - primary serverにて、以下scriptを実行
        - IPは適宜修正
        - primary server を、priority 10
        - secondary serverを、priority 1
        - arbiter serverを、 aribiterOnly : true

        #+begin_src shell-script
        #!/bin/bash

        # run replica set
        #   must be runnning all mongo db process on nodes
        mongo <<EOT
        cfg = {
         _id : "allin-mongo",
         members : [
          { _id : 0, host : "10.0.1.100:27017", priority : 10},
          { _id : 1, host : "10.0.1.101:27017", priority : 1},
          { _id : 2, host : "10.0.1.103:27017", arbiterOnly : true} ] }

        rs.initiate(cfg)
        rs.status()
        EOT
        #+end_src

****** replica状態確認
#+begin_src shell-script
$ mongo
rs.status()
#+end_src


以下の様な表示で正常

#+begin_src shell-script
allin-mongo:PRIMARY> rs.status()
{
        "set" : "allin-mongo",
        "date" : ISODate("2016-03-10T07:49:37.093Z"),
        "myState" : 1,
        "term" : NumberLong(1),
        "heartbeatIntervalMillis" : NumberLong(2000),
        "members" : [
                {
                        "_id" : 0,
                        "name" : "10.0.1.100:27017",
                        "health" : 1,
                        "state" : 1,
                        "stateStr" : "PRIMARY",
                        "uptime" : 86,
                        "optime" : {
                                "ts" : Timestamp(1457596168, 2),
                                "t" : NumberLong(1)
                        },
                        "optimeDate" : ISODate("2016-03-10T07:49:28Z"),
                        "infoMessage" : "could not find member to sync from",
                        "electionTime" : Timestamp(1457596168, 1),
                        "electionDate" : ISODate("2016-03-10T07:49:28Z"),
                        "configVersion" : 1,
                        "self" : true
                },
                {
                        "_id" : 1,
                        "name" : "10.0.1.101:27017",
                        "health" : 1,
                        "state" : 2,
                        "stateStr" : "SECONDARY",
                        "uptime" : 19,
                        "optime" : {
                                "ts" : Timestamp(1457596168, 2),
                                "t" : NumberLong(1)
                        },
                        "optimeDate" : ISODate("2016-03-10T07:49:28Z"),
                        "lastHeartbeat" : ISODate("2016-03-10T07:49:36.182Z"),
                        "lastHeartbeatRecv" : ISODate("2016-03-10T07:49:35.862Z"),
                        "pingMs" : NumberLong(0),
                        "syncingTo" : "10.0.1.100:27017",
                        "configVersion" : 1
                },
                {
                        "_id" : 2,
                        "name" : "10.0.2.101:27017",
                        "health" : 1,
                        "state" : 2,
                        "stateStr" : "SECONDARY",
                        "uptime" : 19,
                        "optime" : {
                                "ts" : Timestamp(1457596168, 2),
                                "t" : NumberLong(1)
                        },
                        "optimeDate" : ISODate("2016-03-10T07:49:28Z"),
                        "lastHeartbeat" : ISODate("2016-03-10T07:49:36.195Z"),
                        "lastHeartbeatRecv" : ISODate("2016-03-10T07:49:35.881Z"),
                        "pingMs" : NumberLong(2),
                        "syncingTo" : "10.0.1.100:27017",
                        "configVersion" : 1
                }
        ],
        "ok" : 1
}
allin-mongo:PRIMARY>
#+end_src

****** passwrod
保留中

# 以下、official site参考箇所
# https://docs.mongodb.org/manual/tutorial/enable-authentication/
# https://docs.mongodb.org/manual/tutorial/manage-users-and-roles/

# # id, passwordは任意
# - admin
#     $ mongo
#     > use admin
#     > db.createUser(
#         {
#             user: "myUserAdmin",
#             pwd: "abc123",
#             roles: [ { role: "root", db: "admin" } ]
#         }
#       )

# 以下、server種によってdb名変動
# sns-production, sns-prelease, sns-staging, sns-delopment
# - database
#     $ mongo
#     > use sns-production
#     > db.createUser(
#         {
#           user: "user_name",
#           pwd: "12345678",
#           roles: [
#              { role: "readWrite", db: "sns-production" }
#           ]
#         }
#       )

# ssh ec2-user@52.196.49.95 -i ~/.ssh/allin-sns-demo.pem

****** backup
- script設置
    - 任意の場所へ以下をscript設置
        - volume idを、mongo用disk(恐らく/dev/xvdb)のvolume idへ修正

        #+begin_src shell-script
        #!/bin/bash

        date=`date +"%Y-%m-%d_%H:%M"`
        echo "create mongodb snaphost $date"
        aws ec2 create-snapshot --volume-id [mongo diskのvolume id] --description "allin-sns-mongodb-backup_$date"
        #+end_src

- cron設定
    以下、script pathは任意
    #+begin_src cron
    * 2 * * *  /home/centos/script/backup_mongo.sh 2>&1 /home/ec2-user/script/log
    #+end_src

- 注意
  古いbackup dataの削除が必要。(上述のscriptには未実装)
  backupは差分backupのため、容量が甚大になることはないと思われる。
  が、web interfaceでbackupを確認するさい、膨大に表示されるめ、削除は必要。

***** データ抽出
- 各nodeのprivate IPs (app serverの環境変数へ設定)

**** redis
***** hardware
AWS ElastiCache

- cache.t2.small : 1台 (冗長構成無し)

***** setting
- elasticache web interceを開く
- Launch Cache Clusterを選択
- Select Engine
    - redis選択

- Specify Cluster Details
    - Engine Version Compatibility : [2.8.24]
    - port : [default]
    - parameter group    : [default]
    - Enable Replication : [無効化]

    - cluster name : [任意]
    - Node Tyep    : cach.t2.small

- Configure Advanced Settings
    - Cache Subnet Group : [※ ec2 intanceと同一のvpcへ]
    - Availability Zone  : [※ ec2 intanceと同一のAZへ]
    - VPC Security Group : [※ 前工程で作成した、ElastiCache用SGを指定]
    - Maintenance Window :
        - Start Day  : [Saturday]
        - Start Time : [02:00]
        - Duration   : [1 Hour]
    - Topic for SNS Notification* : [任意]

***** data抽出
- nodeのendpoint name (app serverの環境変数へ設定)

**** Storage
***** hardware
S3 bucket
添付ファイル保存に用いる

各種環境様のbucketを要する
- production
- prerelease
- staging

***** setting
- S3専用IAMの作成
  IAM policyへS3のアクセス権を付与する。

  - 以下、ruby-dev-allin-snsなどに当たる部分がbucket名となる

  - 以下、IAMへのpolicy設定例
  #+begin_src IAM
  {
      "Version": "2012-10-17",
      "Statement": [
          {
              "Effect": "Allow",
              "Action": [
                  "s3:*"
              ],
              "Resource": [
                  "arn:aws:s3:::development-ruby-dev-allin-sns",
                  "arn:aws:s3:::development-ruby-dev-allin-sns/*",
                  "arn:aws:s3:::staging-ruby-dev-allin-sns",
                  "arn:aws:s3:::staging-ruby-dev-allin-sns/*",
                  "arn:aws:s3:::ruby-dev-allin-sns",
                  "arn:aws:s3:::ruby-dev-allin-sns/*",
                  "*"
              ]
          }
      ]
  }
  #+end_src

***** data抽出
- IAMのクレデンシャル (app serverの環境変数へ設定)
- bucket names (app serverの環境変数へ設定)

**** app server
***** hardware
ec2 instance

- t2.small : 1台

***** software
- centos 6.7 (or 6.5)
- nodebrew
- nodejs v5.6.0
- npm packages (local)
    - deploy時、自動install

- npm packages (global)
    - pm2

***** setting
****** SE linux
disable selinux

****** install package
#+begin_src shell-script
$ sudo yum install perl git
#+end_src

****** user追加
#+begin_src shell-script
$ useradd node
$ sudo su - node
#+end_src

****** make nodejs dir
#+begin_src shell-script
$ sudo mkdir  /var/node/
$ sudo chown node:node /var/node/
#+end_src

****** ssh
- github鍵を設置 (deploy用)
- user [centos]のauthorized_keyを、user [node]へcopy

****** setup nodejs
- nodejs
    - install nodebrew
        #+begin_src shell-script
        $ curl -L git.io/nodebrew | perl - setup
        $ export PATH=$HOME/.nodebrew/current/bin:$PATH
        $ echo 'export PATH=$HOME/.nodebrew/current/bin:$PATH' >> ~/.bashrc
        #+end_src


    - install nodejs
        #+begin_src shell-script
        $ nodebrew install-binary v5.6.0;
        $ nodebrew use v5.6.0
        #+end_src


- npm install global
    #+begin_src shell-script
    $ npm install pm2 -g
    #+end_src

****** ssl証明書
以下dirへ、各種file設置

#+begin_src shell-script
$ cd /home/node/ssl/
#+end_src

- ./server.key # 鍵
- ./cert       # 証明書
- ./ca         # 中間証明書

****** 環境変数 -
.bashrcへ、適宜修正し、書き込み

#+begin_src shell-script
# aws credential
export AWS_ACCESS_KEY_ID=[id]
export AWS_SECRET_ACCESS_KEY=[key]

# ssl証明書
export SSL_KEY_PATH=/home/node/ssl/server.key
export SSL_CERT_PATH=/home/node/ssl/cert
export SSL_CA_PATH=/home/node/ssl/ca

# redis URI
# pass無し
export REDIS_URL=allin-sns.hc7k9f.0001.apne1.cache.amazonaws.com  # redis url
export REDIS_PASS=''

# mongodb cluster IPs
#  現状 user, pass無し
export MONGO_URL="mongodb://10.0.1.100:27017/sns-development,10.0.1.101:27017/sns-development,10.0.1.103:27017/sns-development"
export MONGO_USER=''
export MONGO_PASS=''

# allin 認証server. /api/v1/grant
export AUTH_SERVER_URL=all-in.xyz  # allin server

# S3 : bucket name
export S3_BUCKET=production-all-in-sns
export S3_EP=s3-ap-northeast-1.amazonaws.com

# dispatch. Websocketの接続先URL (自serverのURL)
export DISPATCH_URL=sns-app-002.ruby-dev.jp:5000  # 自server url:5000
#+end_src


****** deploy from local
- install pm2
    #+begin_src ssh
    $ npm install pm2 -g
    #+end_src

- write host to ssh config
    - ssh configへ、IP/hostの組み合わせを記述
        - [ENV]は環境に合わせる。prodcution, prelease, staging, development
        - numberは、node数増加に合わせ001から加算
        - IPは、deploy対象serverのIPを記述

    - $ vi ~/.ssh.config
    #+begin_src ssh
    Host allin-sns-[ENV]_001
        user          centos
        port          22
        Hostname      [IP]
        IdentityFile  ~/.ssh/allin-sns-demo.pem
    #+end_src

- run init deploy
    #+begin_src ssh
    $ cd [allin-sns dir]

    # 環境毎[ENV] procution, prelrease, staging, development
    $ pm2 deploy ./app/config/deploy/deploy.json [ENV] setup
    $ pm2 deploy ./app/config/deploy/deploy.json [ENV] update --force
    #+end_src

**** allin server
***** software
***** setting
****** bower
#+begin_src setting yml
$ bin/rake bower install
#+end_src

****** config編集
# 環境に合わせ記述
- 対象files
    ./config/settings/*

- all-in server指定
    host, base_url

- sns server指定
    api/endpoint
    webscoket/endpoint

    # port 5000指定

#+begin_src setting yml
host: all-in.xyz # all-in server
model:
  shared_file:
    path: <%= Rails.root.join("contents", "shared_files") %>
port: 3000
protocol: http
view:
  links:
    accounting:
new_screen:
  base_url: "http://all-in.xyz" # all-in server
  url_suffix: "index.html"
sns:
  api:
    endpoint: "https://sns-app-002.ruby-dev.jp" # all-in sns server
#+end_src

*** Done [#A] githubにPR提出
CLOSED: [2016-04-06 Wed 16:06]
*** Done [#A] QA
CLOSED: [2016-04-06 Wed 11:04] SCHEDULED: <2016-04-05 Tue>
CLOCK: [2016-04-05 Tue 14:24]--[2016-04-05 Tue 19:23] =>  4:59
CLOCK: [2016-04-05 Tue 11:09]--[2016-04-05 Tue 13:37] =>  2:28

- [ ] test項目列挙
      やりながら考えるか

- [ ] QA

- [ ] 提出

以下、test項目です
https://docs.google.com/spreadsheets/d/1UwIhGC8tPZuSE6AGqWGQiBB_VJKVqoavqkCySPe-9Mg/edit

気になったところは、Jiraに書きました
https://bbank-devs.atlassian.net/browse/RUBYDEV-245
https://bbank-devs.atlassian.net/browse/RUBYDEV-246
https://bbank-devs.atlassian.net/browse/RUBYDEV-247
https://bbank-devs.atlassian.net/browse/RUBYDEV-248
https://bbank-devs.atlassian.net/browse/RUBYDEV-249
https://bbank-devs.atlassian.net/browse/RUBYDEV-250

*** Done [#A] log 調査
CLOSED: [2016-04-06 Wed 11:03] DEADLINE: <2016-04-03 Sun>
CLOCK: [2016-03-30 Wed 13:30]--[2016-03-30 Wed 14:10] =>  0:40

佐藤さんが代わりにやってくれたよ！


- logを取るべき対象
    - pm2
    - node

- log取得方法

- どんなログが必要なのか

- logrotateの手法は?


**** 参考サイト
https://www.google.co.jp/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0ahUKEwiIwLG_uc7LAhXDHJQKHbpiAXYQFggbMAA&url=http%3A%2F%2Fwww.yoheim.net%2Fblog.php%3Fq%3D20130903&usg=AFQjCNHcpPppN1IW8Ya5f4SE2x_2b7-hBQ
https://www.google.co.jp/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&uact=8&ved=0ahUKEwiIwLG_uc7LAhXDHJQKHbpiAXYQFggiMAE&url=http%3A%2F%2Fqiita.com%2Fjanus_wel%2Fitems%2F1deba15ddcbf172ef1ff&usg=AFQjCNGdFszV5yanuyvxY9ITrfzqRsUfGA
https://www.google.co.jp/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&uact=8&ved=0ahUKEwiIwLG_uc7LAhXDHJQKHbpiAXYQFggqMAI&url=http%3A%2F%2Fqiita.com%2Foret%2Fitems%2F32291e1afee55e0f8526&usg=AFQjCNFiYuTMNcXPI2OUuQcUxZ3XSss3hA

**** todos
***** Todo pm2 logs
logって、pm2のlogも必要だよな
公式に、log周りが少しありそう
https://github.com/Unitech/pm2

***** Todo pm2 versioning
Added: [2016-03-29 Tue 13:27]

- 過去ファイルは保存されている?
- 設定が必要か?
***** Todo pm2 host deploy
Added: [2016-03-29 Tue 13:28]

startOrrestart
環境変数の更新は適切になされるのか?

**** 方針
- ~/.pm2/logs
    この出力左記を /var/node/shared/logs
    に帰るか?

- express log
  log4jsがなんとか書いてたな、ここを調べよう

*** Done [#A] sns環境更新
CLOSED: [2016-04-04 Mon 22:03] SCHEDULED: <2016-04-04 Mon>

まずこはここまでをまとめよう

**** Done all : アクセス先URL
CLOSED: [2016-04-04 Mon 17:48]
    - [X] : domain付与 :
            host: ruby-dev-allin.ruby-dev.jp
            base_url: "http://ruby-dev-allin.ruby-dev.jp"

**** Done sns : bashrc setting
CLOSED: [2016-04-04 Mon 17:49]
    - [X] : redis
    - [X] : auth config (allin server)
    - [X] : dispatchConfig (自server)

**** Done aws : ssl
CLOSED: [2016-04-04 Mon 17:49]
    - ELBのssl設定は不要。forwardのみ.
      instanceが、httpsで立ち上がるためELB側での終端は不要

**** Done sns : dispatch uRL
CLOSED: [2016-04-04 Mon 17:49]
- export DISPATCH_URL=sns-app-002.ruby-dev.jp:5000

**** Done allin serverへdomain付与
CLOSED: [2016-04-04 Mon 14:35]
**** aws 開発server上の設定を控えておこう
- sns server
  ~/.bashrc

- allin server
  ~/config/setting/*

**** Done allin server ELBへdomain付与
CLOSED: [2016-04-04 Mon 15:48]
**** Done allin domainへ、httpsアクセス
CLOSED: [2016-04-04 Mon 15:48]
**** Done tokenは?
CLOSED: [2016-04-04 Mon 15:58]
query

?access_token=

**** Done allin <-> sns間の認証が問題
CLOSED: [2016-04-04 Mon 16:19]
ログに出てこないので、server間で届いていないように見える

- 証明書が間違っていた
- .bashrcでの、URL指定方法が間違っていた

**** Done 設定手順に上記修正を適用
CLOSED: [2016-04-04 Mon 16:27]
**** Done force ssl設定
CLOSED: [2016-04-04 Mon 16:29]

**** Done port閉塞
CLOSED: [2016-04-04 Mon 16:59]
sg-1b4c8a7f (for_ec2_instances)
10.0.0.0/16
116.91.89.10/32
125.199.211.186/32
153.151.189.237/32
210.128.101.38/32

**** Done upload test
CLOSED: [2016-04-04 Mon 16:37]
endpoint指定がなくともいけるか

**** Done upload test
CLOSED: [2016-04-04 Mon 17:12]
複数個

**** Done 図更新
CLOSED: [2016-04-04 Mon 18:25]

*** Done [#A] staging update
CLOSED: [2016-03-28 Mon 12:34] SCHEDULED: <2016-03-28 Mon>
CLOCK: [2016-03-28 Mon 10:30]--[2016-03-28 Mon 12:34] =>  2:04

**** setting/development.rb
host: 52.193.39.75
model:
  shared_file:
    path: <%= Rails.root.join("contents", "shared_files") %>
port: 3000
protocol: http
view:
  links:
    accounting:
new_screen:
  base_url: "http://52.193.39.75"
  url_suffix: "index.html"
sns:
  api:
    endpoint: "https://sns-app-002.ruby-dev.jp:5000"
  websocket:
    endpoint: "https://sns-app-002.ruby-dev.jp:5000/sns"
    event: "allin_sns_demo"

**** websocket
// var ioSocket = io.connect('<%= Settings.sns.websocket.endpoint %>');
var ioSocket = io.connect('http://sns-app-002.ruby-dev.jp:5000/sns');

**** comment
// var ioSocket = io.connect('<%= Settings.sns.websocket.endpoint %>');
var ioSocket = io.connect('http://sns-app-002.ruby-dev.jp:5000/sns');

**** feed
var resource =  $resource("<%= Settings.sns.api.endpoint %>/api/v1/feeds/:id/:action", {}, {
// var resource =  $resource("https://sns-app-002.ruby-dev.jp:5000/api/v1/feeds/:id/:action", {}, {

*** Done [#A] staging test
CLOSED: [2016-03-28 Mon 15:19] SCHEDULED: <2016-03-28 Mon>
CLOCK: [2016-03-28 Mon 12:35]--[2016-03-28 Mon 14:30] =>  1:55


**** feed
- [X] : 書き込める事
    - [X] : 画面更新される事
    - [X] : 先頭に追記される事
    - [X] : 他のuserが開いている、browerへ通知され更新できること
- [X] : 削除できる事
    - [X] : 削除ボタン押下で、確認画面が出る事
    - [X] : 削除ボタン押下後、キャンセルで適切にキャンセルでること
    - [X] : 削除ボタン押下で、対象feedが削除できる事
    - [X] : 画面更新される事
    - [X] : 他のuserが開いている、browerへ通知され更新できること
- [X] 編集
    - [X] : 編集ボタン押下で、編集モードになること
    - [X] : 取り消しボタンで、編集モードから抜ける事
    - [X] : 値入力後、投稿ボタン押下で、編集できる事
    - [X] : 他のuserが開いている、browerへ通知され更新できること
- [X] DL
    - [X] : クリップマーク押下後、ファイル名が表示される事
    - [X] : file name押下後、DLできること
    - [X] : file name押下後、当該ファイルがDLできること
    - [X] : DL済みファイルが正常に開ける事
- [ ] :
- [ ] : もっと読むで、正常に更新される事
    - [ ] : コメント、画像も適切に読み込まれる事
- [ ] : 画面遷移後も全動作正常に、上述全てのテストが問題なく動作すること

**** comment
- [X] : 書き込める事
    - [X] : 画面更新される事
    - [X] : 先頭に追記される事
    - [X] : 他のuserが開いている、browerへ通知され更新できること
- [X] : 削除できる事
    - [X] : 削除ボタン押下で、確認画面が出る事
    - [X] : 削除ボタン押下後、キャンセルで適切にキャンセルでること
    - [X] : 削除ボタン押下で、対象commentが削除できる事
    - [X] : 画面更新される事
    - [X] : 他のuserが開いている、browerへ通知され更新できること
- [X] 編集
    - [X] : 編集ボタン押下で、編集モードになること
    - [X] : 取り消しボタンで、編集モードから抜ける事
    - [X] : 値入力後、投稿ボタン押下で、編集できる事
    - [X] : 他のuserが開いている、browerへ通知され更新できること
- [X] DL
    - [X] : クリップマーク押下後、ファイル名が表示される事
    - [X] : 複数ファイル存在する場合、複数表示できる事
    - [X] : file name押下後、当該ファイルがDLできること
    - [X] : DL済みファイルが正常に開ける事
- [ ] :
- [ ] : もっと読むで、正常に更新される事
    - [ ] : コメント、画像も適切に読み込まれる事
- [ ] : 画面遷移後も全動作正常に、上述全てのテストが問題なく動作すること

**** like
- [100%]feed
    - [X] : like押下でカウント1増える事
    - [X] : 他のユーザー画面への反映される事
- [100%] comment
    - [X] : unlike押下でカウント1減る事
    - [X] : 他のユーザー画面への反映される事
**** attachment
- [100%] feed
    - [X] : uploadボタン押下で、ファイル選択画面が開く事
    - [X] : form直下に、thumbnailが表示される事
    - [X] : 本文入力し、投稿ボタン押下後、正常に投稿される事
    - [X] : 他ユーザーへも反映される事
- [100%] comment
    - [X] : uploadボタン押下で、ファイル選択画面が開く事
    - [X] : form直下に、thumbnailが表示される事
    - [X] : 本文入力し、投稿ボタン押下後、正常に投稿される事
    - [X] : 他ユーザーへも反映される事

**** 問題点
- offsetが正常な値を返さない

- firefoxでは動作が異常
    - 添付ファイルの削除ボタンが、若干したにずれている。そのため、投稿ボタンに被り、押下がしにくい
    - 添付ファイルをserverへuploadできない (後述するものと重複?)

- 稀にuploadできない (file選択は可能)
    network logを見るに、attachmentのupload requestが無い。
    画面更新するとuploadできる。(場合がある)
    feed / comment共に発生する

- 投稿済みfeedで、upload押下、ファイル選択で即時uploadされる。当動作で問題ないか?

- like, unlikeで画像がreloadする様に見える

*** Done [#A] wiki作成 - API
CLOSED: [2016-03-23 Wed 16:44]
https://bbank-devs.atlassian.net/wiki/display/~y-shibata/API

以下の内容を転写
ただし、実動作と違いがあるので、一つ一つ確かめる
https://git.ruby-dev.jp/business_bank_group/allin-sns/issues/9

*** Done [#A] development環境update
CLOSED: [2016-03-23 Wed 09:23] SCHEDULED: <2016-03-22 Tue>

allinにsnsが組み込まれた。
updateし、動作確認。

- [X] AMI作成
- [X] mongodb replica set 復旧
    - [X] nano構築
    - [X] replica set. setup
    - [X] コマンドまとめ
    - [X] nodejs, mongoidへの再設定
    - [X] 動作確認
- [X] allin upate
    - [X] git clone
    - [X] とりあえず通常起動
- [X] 動作試験
    - [X] 印象 :: 微妙
    - [X] 画面遷移すると画面更新されなくなる
    - [X] 初期状態でupload不可

*** Done [#A] MR - env
CLOSED: [2016-03-22 Tue 13:07]
env抽出 and commit

**** nodejs - ssl
productionだけhttps. 他環境では、http

export SSL_KEY_PATH=/home/node/ssl/server.key
export SSL_CERT_PATH=/home/node/ssl/cert
export SSL_CA_PATH=/home/node/ssl/cert_c

**** mongodb / redis
export REDIS_URL=allin-sns.hc7k9f.0001.apne1.cache.amazonaws.com
export REDIS_PASS=''

export MONGO_URL="mongodb://10.0.1.100:27017/sns-development,10.0.1.101:27017/sns-development,10.0.2.101:27017/sns-development"
export MONGO_USER=''
export MONGO_PASS=''

export AUTH_SERVER_URL=10.0.1.114

**** s3
export S3_BUCKET=ruby-dev-all-in

**** Done railsはいらない
CLOSED: [2016-03-15 Tue 16:35]

*** Done [#A] 料金調査
CLOSED: [2016-03-22 Tue 13:04] DEADLINE: <2016-03-22 Tue>

**** base
- allinへの展開は23日以降
- 柴田さんへの提出は22日

- なるべく料金は少ない構成で
    - Mongo : 2台構成
    - AZ    : 一つだけ

**** todos
***** [83%] 固定費
- [X] : 最小構成での構成図

- [ ] : 最低必要な性能を調査
    - [ ] : sns app
    - [ ] : mongo primary
    - [ ] : mongo secondary
    - [ ] : elasticash
- [X] : ec2
    - [X] : sns app
    - [X] : mongo primary
    - [X] : mongo secondary
- [ ] : mongo
    - [ ] : 差分backup (EBS auto snapshotで)
            data保存専用のsecondaryも良さそうだが、常時稼働にはコストが高い
- [X] : Elastic IP
    - [X] : x1
- [X] : load balancer
- [X] : elastic cash

***** 変動費
- [ ] : ec2 - app

- [ ] : ec2 - mongo

- [X] : elasti cash
    - [X] : 通信料なし

- [ ] : s3

***** 実験 / 調査
- [-] : ec2
    - [X] : top pageをloadした際の、全通信量
            Firefox : 1,776.36kB
            Chrome  : 20.2kB

    - [X] : 100文字書き込んだ際の、全通信量
            Firefox : 0.36kB
            Chrome  : 1.8kB

    - [X] : 秒間2〜4回。100文字書き込んだ際のCPU使用率
            最大6%
    - [X] : backup不要。固有dataはlogのみ
    - [ ] : 状態保持する必要があるか?
            聞き取りが必要だな
- [-] : ec2 - mongo
    - [X] : 秒間2〜4回。100文字書き込んだ際のCPU使用率
            3% - primary
            2% - secondary
    - [X] : 100文字、10万件書き込んだ際のDB消費容量
            3.25M
    - [X] : 月の平均書き込み数。文字数は100文字とする。
            user          : 1,000
            feed write    : 10
            comment write : 9
            ttl : 100k (feed 10k + comment 90k)
    - [X] : 月の消費HDD容量
             100k 件 / 日
            3100k 件 / 月

            232.5M  / 月
    - [X] : mongoに差分backupはあるか?
            oplogでできそう？
            外部サービス
    - [X] : HDD backupで代用できないか?
        - [X] : down timeは?
                なし.
                point timeのsnap shotはすばやく作成される。
                書き込まれているデータのみbackupされ、OS, memoryにキャッシュされているデータは対象とならない
                s3への転送は時間がかかる。
                backupは、差分として作成される。
                一部が削除しても、全体のbackupは完全。
        - [X] : 70GB HDDの場合、70GBかかるのか?
          　　　　差分で可能
    - [X] : snapshot 料金は?
            0.095/GB
    - [-] : commandからのbackup
        - [X] : aws-configure
        - [X] : shell作成
        - [ ] : AMI作成
    - [X] : HDD容量全てが課金対象か?
            実際に使用する分のみ
    - [X] : resotre実験
    - [X] : 偶数台での運用
        - [X] : voteの合計を、奇数にする
                2台でprimary / secondaryで動いてる
                では、primaryが落ちた際は?
- [X] : ELBの月の処理量
    - [X] : read時の総容量
            19.5kB
    - [X] : 日の想定 read回数
            100k
- [X] : app serverの月の処理容量
    - [X] : API : 書き込み時の容量 (out)
            1.8kB
    - [X] : ws  : 書き込み時の容量 (out)
            0.9B
    - [X] : 日の想定書き込み回数
            10万回
- [X] : elasti cash
    - [X] : backup要否
            不可。t1.micro. t2.*はsupportされていない
    - [X] : memory 消費
            1GByte程度で十分とする
    - [X] : cpu 使用量
            秒間数回の書き込みrequestでは
            1%以下
- [X] : s3

***** 実験値
|               | 80k   | 120k   | 160k   | 200k  | 210k  |
|---------------+-------+--------+--------+-------+-------|
| df            | 421MB | 425MB  | 428MB  |       |       |
| du            | 3.0MB | 4.5MB  | 6.0MB  | 7.5M  | 7.83M |
| col(in mongo) | 2.9MB | 4.49MB | 5.98MB | 7.47M | 7.9M  |

***** 他にはあるかな?

*** Done [#A] mongoDBのaws service調査
CLOSED: [2016-03-09 Wed 09:49] SCHEDULED: <2016-03-03 Thu>

*** Done [#A] mongoDB - which are better replication / sharding
CLOSED: [2016-03-14 Mon 12:43] DEADLINE: <2016-03-08 Tue>

**** Done mongo repo
CLOSED: [2016-03-10 Thu 12:50]
[mongodb-org-3.2]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/amazon/2013.03/mongodb-org/3.2/x86_64/
gpgcheck=0

**** Done sharding
CLOSED: [2016-03-09 Wed 23:32]
- 最低台数が4-5台になるため微妙
- データは各nodeに分散し重複しない。
 そのため、sharding + replica構成になるため
 しぬ
- そんな面倒は見たくない
- よって、replica set

**** replica set
http://qiita.com/y13i/items/78c9f45acd07a9478d2d
https://www.cyberagent.co.jp/technology/ca_tech/report/8987184.html
http://www.slideshare.net/htty_hasumi/mongo-db-41882893

***** Done best practics など
CLOSED: [2016-03-09 Wed 23:32]
http://dqn.sakusakutto.jp/2011/12/mongodb_3.html

***** Done 最低台数は
CLOSED: [2016-03-09 Wed 23:32]
Replica Setがその機能を果たすためには、最低3台のMongoDBサーバーが必要です。
これは1台のPrimary、
1台以上のSecondary、
0台または1台のArbiterから構成されます。

偶数はNG
http://matsukaz.hatenablog.com/entry/20110711/1310381034

***** Done お互いの監視感覚
CLOSED: [2016-03-10 Thu 11:48]
- heatbeat : レプリカセットのそれぞれのメンバーは、他のメンバーに 2 秒毎に ping

***** 同期用のファイル opfile
- op file
- 通常HDDの5%が割り当てられる
- 変更する場合は
  mongod --replSet myapp --oplogSize 1024

- 溢れた際は dump / restore

***** replicationのtimingは?
- 非同期のみの様子
- priority 0なら replication timingを少し設定できるもよう
- また、driverの方で、書き込み保証を入れられる?

***** Done 書き込み保証
CLOSED: [2016-03-10 Thu 16:07]
http://qiita.com/rubytomato@github/items/8dc31949b79d46cd4f66

どこまで保証させたものか...
性能劣化

基本メモリへ書き込み、その後、diskへ書き込み/60sec

***** 固定ファイルで設定できるか?
できないっぽい?
コマンドで登録してた

***** 優先順位の定義
priority
0にすると primaryにはならない
一つはbackup専用がいいか?

***** Done host server
CLOSED: [2016-03-10 Thu 12:03]
料金がheavy
https://www.compose.io/
https://mlab.com/welcome/

***** 設定方法は?
- rs.initiate() と rs.add()

***** Done repl設定はどこに保存される?
CLOSED: [2016-03-10 Thu 12:03]
config は、設定ドキュメントを保持している単純な変数です。
レプリカセットの各メンバーは、 初期化された時にこの設定ドキュメントのコピーを
local db の system.replset コレク ションに保存します。

***** 設定の変更は?
 レプリカセットの設定を変更するには、独立したコマンドとして replSetReconfig が用意されて います。
このコマンドは、新しい設定ドキュメントを引数として取ります。
新しいドキュメントで は、レプリカセットのメンバーの追加や削除、そしてメンバー固有あるいはグローバルなオプショ ンの変更を
指定できます
***** まとめ
ここまでに解説したすべてのことを踏まえれば、レプリケーションが非常に有用であり、
ほとん どの動作環境において欠かせないものであることは明らかでしょう。
MongoDB のレプリケーショ ンは簡単に使えるはずであり、通常はセットアップもまた簡単です。
しかし、バックアップやフェ イルオーバーに関しては、見えない複雑さが存在します。
そうした複雑なケースに対しては、経験 を積み、そして本章を多少の助けとして、精通するようにしてください。
**** backupは?
***** mongodump
mongodump --host localhost:27020 --db mydb --out /data/mongo/dump
mongodumpによる方法はデータベースが稼働中でもデータベース全体をdumpすることができます

***** mongorestore
mongod --port 27021 --dbpath /data/mongo/restore

--dropコマンドは既に同じコレクション名が存在している場合には先にコレクションのデータをを削除してからリストアするオプションです。
mongorestore --port 27021 --db mydb --drop --dbpath /data/mongo/dump
***** どこで
- secondary
- 容量がでかい場合は?
- 何かてはあるか?

**** secondary専用は可能か?
可能

**** mongodbの書き込み
http://doryokujin.hatenablog.jp/entry/20110614/1308010072

60秒間隔で、memoryからdiskへ書き込まれている

// 起動時のコマンドラインオプション"--syncdelay"で変更可能
secondaryとの通信が増えるため、当値の変更は推奨しない. (singleでの稼働なら可)

// "set write concern"で書き込みを保証する
実行性能が低下する

// journal - 100ms単位でjournal fileへ書き込むらしい
30%ほど実行性能が落ちるらしい

**** fail over時
- 30秒くらいのdown timeが発生する?

**** 真っさらな node を追加する場合
- 古い記事ではdump / restore?
  http://doryokujin.hatenablog.jp/entry/20110519/1305737343

**** password設定
**** 結論
- replica set
 primary   x1
 secondary x2

- 64bit
- write-ahead journalinは有効に
- Mongo MMSでサービスをグラフ化して監視しましょ

- 完全な無停止は難しい?

- 認証付与

- index付与.
  どこにつける?

- scalingなどの拡張設定調査

- 書き込み保証
  必要か?
  必要としてどのレベルの?

- osの調整
  file open数
  https://docs.mongodb.org/manual/reference/ulimit/

- oplogは大きく
  8時間分のデータを保持できる程度には大きくする必要がある
  1時間計測するとの事だが予想できないからな

*** Done [#A] nginxいらないらしいが　
CLOSED: [2016-03-14 Mon 14:15] SCHEDULED: <2016-03-14 Mon>
CLOCK: [2016-03-14 Mon 13:30]--[2016-03-14 Mon 14:15] =>  0:45

80portでの対応が面倒そうなので通すか。
ただperfomance tuningが必要だろう

勉強だな

*** Done [#A] nginx
CLOSED: [2016-03-14 Mon 09:05]

結論として、いらないらしい
柴田さん、佐藤さんの話し合い曰く


- nginx web socket 経由及び、https 終端
  http://d.hatena.ne.jp/ASnoKaze/20150424/1429897362

- http終端

- ELBは無いと思う
  websocketは、ELBを経由しないため

- nginx
  websocketは、httpを用いる?
  様なのでポートなどがわかれば、nginx噛ませていけるかも

- nodejs
  へ直接?
  nginx噛ませない時はこれかな
  そもそも、websocketの仕組みがわかっていない

- 5000portをnginx / nodejsで繋ぐにはどうする

*** Done [#A] IAM作成 for S3
CLOSED: [2016-03-14 Mon 16:24] SCHEDULED: <2016-03-14 Mon>
CLOCK: [2016-03-14 Mon 14:15]--[2016-03-14 Mon 16:24] =>  2:09

**** create upload bucket
"arn:aws:s3:::development-ruby-dev-allin-sns",
"arn:aws:s3:::development-ruby-dev-allin-sns/*",
"arn:aws:s3:::staging-ruby-dev-allin-sns",
"arn:aws:s3:::staging-ruby-dev-allin-sns/*",
"arn:aws:s3:::ruby-dev-allin-sns",
"arn:aws:s3:::ruby-dev-allin-sns/*"

**** IAMユーザー作成
| Access Key Id     | AKIAIJEDQPGAQA376YGQ                     |
| Secret Access Key | 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 |

**** set random password for new user
**** create new policy
特定S3へのアクセス権限のみ付与

{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "s3:*"
            ],
            "Resource": [
                "arn:aws:s3:::development-ruby-dev-allin-sns",
                "arn:aws:s3:::development-ruby-dev-allin-sns/*",
                "arn:aws:s3:::staging-ruby-dev-allin-sns",
                "arn:aws:s3:::staging-ruby-dev-allin-sns/*",
                "arn:aws:s3:::ruby-dev-allin-sns",
                "arn:aws:s3:::ruby-dev-allin-sns/*",
                "*"
            ]
        }
    ]
}

**** set new policy to new user
**** export
# valid
export AWS_ACCESS_KEY_ID=AKIAIJEDQPGAQA376YGQ
export AWS_SECRET_ACCESS_KEY=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

# test
export AWS_ACCESS_KEY_ID=AKIAJFIDZ6W5WKP5AGWQ
export AWS_SECRET_ACCESS_KEY=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

**** write export to bashrc
sudo su - node
echo 'export AWS_ACCESS_KEY_ID=AKIAIJEDQPGAQA376YGQ' >> ~/.bashrc
echo 'export AWS_SECRET_ACCESS_KEY=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' >> ~/.bashrc

*** Done [#A] https設定
CLOSED: [2016-03-15 Tue 15:58] SCHEDULED: <2016-03-14 Mon>
CLOCK: [2016-03-15 Tue 11:38]--[2016-03-15 Tue 15:58] =>  4:20

**** ELB
***** ELB作成時に登録
- private key
- 証明書
- 中間証明書

***** port forward
- 80  to 80
- 443 to 80

***** security groupでの解放忘れずに
http
https

***** session
_allin_sns_demo_session

**** nodejs
***** nodejs source
# 実験中

# ciphersの根拠は、
# 基本は、ELBの標準設定を踏襲
# 及び以下のサイトより
# https://certsimple.com/blog/a-plus-node-js-ssl
# https://www.openssl.org/docs/manmaster/apps/ciphers.html#CIPHER_LIST_FORMAT
# https://iojs.org/api/tls.html#tls_tls_createserver_options_secureconnectionlistener
# https://certsimple.com/blog/a-plus-node-js-ssl

'use strict';

// デフォルトは「development」環境で起動
process.env.NODE_ENV = process.env.NODE_ENV || 'development';

const config = require('./config/config');
const events = require('./controllers/events');
const express = require('./config/express');
const debug = require('debug')('sns');
// const http = require('http');
const https = require('https');
const app = express();

const fs = require('fs');

const options = {
    'key' : fs.readFileSync('/home/node/ssl/server.key').toString(),
    'cert': fs.readFileSync('/home/node/ssl/cert').toString(),
    'ca': fs.readFileSync('/home/node/ssl/cert_c').toString(),
    'ciphers' : [
        "ECDHE-RSA-AES256-SHA384",
        "DHE-RSA-AES256-SHA384",
        "ECDHE-RSA-AES256-SHA256",
        "DHE-RSA-AES256-SHA256",
        "ECDHE-RSA-AES128-SHA256",
        "DHE-RSA-AES128-SHA256",
        "HIGH",
        "!aNULL",
        "!eNULL",
        "!EXPORT",
        "!DES",
        "!RC4",
        "!MD5",
        "!PSK",
        "!SRP",
        "!CAMELLIA"
    ].join(':')
};

const apiServer = https.createServer(options, app);
// const apiServer = https.createServer(app);
const io = require('socket.io')(apiServer);

const redis = require('socket.io-redis');

// RedisのPub/Subを使用して、別プロセスに接続されているクライアントに対してメッセージ送信
io.adapter(redis({ host: config.redisConfig.host, port: config.redisConfig.port }));

// snsネームスペースを使用
const ioNS = io.of('/sns');

require('./config/socketio')(io, ioNS);
// Socket.ioの保存
events.io = io;
events.ioNS = ioNS;

// API Serverの起動
apiServer.listen(config.port);
debug(`ALL-IN SNS Server running at http://localhost:${config.port}`);
module.exports = app;

***** nodejs port
うーん、80番ポートやってみる?

***** rails
- domain設定
- https指定

**** 動作チェック

*** Done [#A] APIの変更
CLOSED: [2016-04-13 Wed 11:20] SCHEDULED: <2016-04-08 Fri>
CLOCK: [2016-03-09 Wed 12:15]--[2016-03-09 Wed 14:10] =>  1:55

更新のAPI修正.

恐らく、bodyが帰らない点か?
実装もそういう動作なら、修正が必要か?

*** Done [#B] 開発環境作成
CLOSED: [2016-05-30 Mon 11:37] DEADLINE: <2016-06-03 Fri>

- なるべく早くだが優先度は少し低い
- allin vagrant 環境で, sns, sns-notificationを動かしたい

chefでやることになりそう
ticket切るのお忘れなく

*** Done [#B] 本番環境構築 / deploy
CLOSED: [2016-03-29 Tue 13:47]
**** Done init
CLOSED: [2016-03-11 Fri 17:37]
- deploy方法を調査
- elasticbeans talk
- pm2

**** Done 選定
CLOSED: [2016-03-11 Fri 17:37]
- deployはどーすればいいの?
  http://qiita.com/taizo/items/52921ab6fa027a840842

***** elacticbeans talk
****** good
- 複数nodeへのdeployはやってくれる
- aws環境周りの設定を自動でしてくれる (default値)
- cloudwatchも自動設定
- 何かあったら指定メールアドレスへ通知してくれる

****** hmm
- 5.6 suportしてない
  http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/concepts.platforms.html#concepts.platforms.nodejs

- linux kernelの問題かbuildできない、node_moduleをbuildできない

- macへのコマンド導入方法

- auto scalingが必須ならば、こちら一択？
  uniqloの時の様にAMI作って総入れ替えもあるが...session保持したい場合は?

- 使い勝手がわからないのが問題。若干くせがありそうだが、なれれば…

- domain cnameが自動で着くが
  これはDNS設定で解決可能

****** research
- default以外の設定は?
- nginxの設定は?

****** info
- 動かしてみた
  http://d.hatena.ne.jp/j3tm0t0/20120425/1335323953

- eb for beginner
  http://www.slideshare.net/shimy_net/aws-elastic-beanstalk-23314834?next_slideshow=1

- 環境構築
  http://qiita.com/supertaihei02/items/b2373890b7e739ded318

- nodejs aws入門
  http://www.slideshare.net/shimy_net/nodejsawsnodejs-on-aws-elastic-beanstalk-aws-sdk-for-nodejs

****** install / setup flow
******* AWS
- elasctic beans talk 環境構築

******* Local
# - npm install aws-sdk
- brew install aws-elasticbeanstalk

- containerの設定変更
  http://docs.aws.amazon.com/ja_jp/elasticbeanstalk/latest/dg/create_deploy_nodejs.container.html

***** pm2
****** good
- 高機能 (foreverなどと比較し)
- hot deploy可能 (fileの変動を検知)
- 問題点は?

****** hmm
- 複数台へのdeployは手動になりそう (未調査)
    pm2の設定ファイルで複数可能

****** research
- deploy時のversioningは?
- multi processが可能なんだっけ?
  注意点がありそう

****** info
- nodejs デメリットと解決方法
  http://qiita.com/hshimo/items/156249ec8e6dbf75205a

- pm2 official
  https://github.com/Unitech/pm2

- PM2でnodeなWebアプリをデプロイしてみた
  http://strix01.blogspot.jp/2014/11/pm2nodeweb.html

***** capistrano
無し

**** Done pm2 setting - base
CLOSED: [2016-03-11 Fri 17:56]
***** server side
****** yum auto update off
****** ssh key to github
- git (gitlab) へのaccess key設置
- ssh config適宜修正

****** create node user
- sudo su -
- useradd node

****** setup work dir
- ssh server
- sudo su -

- mkdir /var/node
- chown node:node /var/node

****** setup nodejs
- sudo su - node

- curl https://raw.githubusercontent.com/hokaccha/nodebrew/master/nodebrew | perl - setup
- echo 'export PATH=$HOME/.nodebrew/current/bin:$PATH' > ~/.bashrc
- source ~/.bashrc

- nodebrew install v5.6.0
- nodebrew use v5.6.0

- npm install pm2 -g
- npm install bower -g

****** nginx
- yum install nginx
- sudo chkconfig on nginx

***** local
****** ssh config
// key適宜修正

Host allin-sns-dev_001
    user          ec2-user
    port          22
    Hostname      52.69.10.142
    IdentityFile  ~/.ssh/allin-sns-demo.pem


Host allin-sns-dev_002
    user          ec2-user
    port          22
    Hostname      52.193.222.86
    IdentityFile  ~/.ssh/allin-sns-demo.pem

****** intall pm2 commands
npm instal pm2 -g

***** deploy to development
// 初回
- pm2 deploy ./app/config/deploy/deploy.json development setup

// update
- pm2 deploy ./app/config/deploy/deploy.json development update --force

***** deploy to staging
// 初回
- pm2 deploy ./app/config/deploy/deploy.json staging setup

// update
- pm2 deploy ./app/config/deploy/deploy.json staging update --force

***** deploy to production
// 初回
- pm2 deploy ./app/config/deploy/deploy.json production setup

// update
- pm2 deploy ./app/config/deploy/deploy.json production update --force

**** Done pm2 setting - needed
CLOSED: [2016-03-29 Tue 13:45]
***** Done proccess様json作成
CLOSED: [2016-03-11 Fri 16:40]
- dev
- stg
- production

***** Done git commit
CLOSED: [2016-03-29 Tue 13:45]
***** Done where version file
CLOSED: [2016-03-29 Tue 13:45]
***** Done 環境変数設定
CLOSED: [2016-03-29 Tue 13:45]
- vagrant
- 実server

**** Done [0%] hot deploy
CLOSED: [2016-03-29 Tue 13:30]

startOrRestartでok

**** pm2 commands
http://nodejs.osser.jp/node/node-pm2/
http://pm2.keymetrics.io/docs/usage/deployment/#related-commands

**** 今後、必要そうな事
scalingを考えるなら、AMIだが
初期設定ははどこまで対応する?

deployは?

***** nodejs
- 自動起動

***** 監視設定?
**** 現在の、server構築上必要そうな事
***** base env info
- allin-sns
  - ブランチ : master

- allin_sns_demo
  - ブランチ : master

- nodejs
  - production

- S3 key : serverへ設定
    export AWS_ACCESS_KEY_ID=AKIAJ22ZFJZY62TLV6FQ
    export AWS_SECRET_ACCESS_KEY=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

***** sns
****** Done rails起動
CLOSED: [2016-03-09 Wed 17:38]

****** redis設定 (elasticashへ)
- nodejs

****** Done mongo設定 (mongo serverへ向ける)
CLOSED: [2016-03-09 Wed 17:38]
- nodejs
- rails

****** Done npm install
CLOSED: [2016-03-09 Wed 17:38]

****** 自己IPへ向ける
****** これらをrepositoryに入れるか?
****** 修正箇所1
******* allin-sns
******** app/config/env/*
  host: 'allin-sns.hc7k9f.0001.apne1.cache.amazonaws.com',

******** app/config/env/test.js
******** app/config/express.js
  origin: '*'

******** app/models/attachment.js
const upload_dest = 'http://localhost:5000/uploads/';

******* allin_sns_demo
******** app/assets/javascripts/resources/v1/comment.coffee
-    resource = $resource 'http://localhost:5000/api/v1/comments/:id/:action', {id: '@id'}, methods
+    resource = $resource 'http://52.193.187.111:5000/api/v1/comments/:id/:action', {id: '@id'}, methods

******** app/assets/javascripts/resources/v1/feed.coffee
-    resource = $resource 'http://localhost:5000/api/v1/feeds/:id/:action', {id: '@id'}, methods
+    resource = $resource 'http://52.193.187.111:5000/api/v1/feeds/:id/:action', {id: '@id'}, methods

******** app/assets/javascripts/resources/v1/attachment.coffee
-    resource = $resource 'http://localhost:5000/api/v1/feeds/:id/:action', {id: '@id'}, methods
+    resource = $resource 'http://52.193.187.111:5000/api/v1/feeds/:id/:action', {id: '@id'}, methods

******** app/assets/javascripts/services/web_socket.coffee
-    ioSocket = io.connect('http://localhost:5000')
+    ioSocket = io.connect('http://52.193.187.111:5000')

******** config/mongoid.yml
host
IPを修正
******** ws/server
port

******** ws/client
port

****** s3
export AWS_ACCESS_KEY_ID=AKIAJ22ZFJZY62TLV6FQ
export AWS_SECRET_ACCESS_KEY=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

***** allin
- allin起動
- allin初期設定
- db情報転送

***** mongo
****** Done install
****** Done 初期設定
****** Done backup
ebs snapshot

****** password設定
****** provision
***** 修正1
https://git.ruby-dev.jp/business_bank_group/allin_sns_demo/blob/master/app%2Fassets%2Fjavascripts%2Fservices%2Fweb_socket.coffee
6行
ioSocket = io.connect('http://localhost:5000/sns')
↓
ioSocket = io.connect('http://localhost:5000/')

***** 修正箇所2
****** 【②BB ファイルアップロードデモ】
・allin-sns
    ・ブランチ：file-upload-demo
    ・production以外で立ち上げる. devで

・allin_sns_demo
    ・ブランチ：master

****** 【修正内容】
https://git.ruby-dev.jp/business_bank_group/allin_sns_demo/blob/master/app%2Fassets%2Fjavascripts%2Fservices%2Fweb_socket.coffee
6行
ioSocket = io.connect('http://localhost:5000/sns')
↓
ioSocket = io.connect('http://localhost:5000/')

**** create S3 bucket / IAM
- IAM作成のとこ参照して本番用の手順を
- angularに組み込まれているURLは、ELB
- bucket名も 環境変数にするか?

**** env設定
.bashrcへ
productionだけhttps. 他環境では、http

***** nodejs - ssl
export SSL_KEY_PATH=/home/node/ssl/server.key
export SSL_CERT_PATH=/home/node/ssl/cert
export SSL_CA_PATH=/home/node/ssl/cert_c

***** mongodb / redis
export REDIS_URL=
export REDIS_PASS=''

# export MONGO_URL="mongodb://10.0.1.100:27017/sns-development,10.0.1.101:27017/sns-development,10.0.2.101:27017/sns-development"
export MONGO_URL=""
export MONGO_USER=''
export MONGO_PASS=''

# export AUTH_SERVER_URL=10.0.1.114
export AUTH_SERVER_URL=

***** s3
# export S3_BUCKET=ruby-dev-all-in
export S3_BUCKET=""

*** Done [#B] deployへPre-release追加
CLOSED: [2016-03-29 Tue 13:47] SCHEDULED: <2016-03-29 Tue>
CLOCK: [2016-03-28 Mon 17:15]--[2016-03-29 Tue 13:47] => 20:32

*** Done [#B] session名確認
CLOSED: [2016-03-29 Tue 13:47] SCHEDULED: <2016-03-28 Mon>
session名を入力 : [※ 確認中]
source見ればわかるか?

sessionなし

*** Done [#B] ruby-dev214へgitlab URL記述
CLOSED: [2016-03-28 Mon 17:41]
- [X] : ruby-dev214へgitlab URL記述
  https://git.ruby-dev.jp/business_bank_group/allin-sns/issues/20

*** Done [#D] 4.5 : url自動link
CLOSED: [2016-06-23 Thu 14:07]
review中
*** Done [#D] ulimit
CLOSED: [2016-05-24 Tue 15:08] SCHEDULED: <2016-03-20 Sun>
CLOCK: [2016-03-14 Mon 16:25]--[2016-03-14 Mon 16:32] =>  0:07

認証通らないと、反映されないらしい
そのため、scriptへ書き込む必要がある。らしい

http://staffblog.yumemi.jp/%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%87%E3%82%A3%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%82%BF%E6%95%B0%E3%81%AE%E4%B8%8A%E9%99%90%E5%A4%89%E6%9B%B4%E3%81%A8limits-conf%E3%81%AE%E7%BD%A0-2/

*** Done [#D] elastiCash
CLOSED: [2016-03-30 Wed 10:59]

**** 読め
- setting 方法まとめを見つけよう
- まずは、instance作成で
- security 設定? firewall?

https://aws.amazon.com/jp/elasticache/faqs/
http://techlife.cookpad.com/entry/2014/05/22/elasticache-for-redis/
http://qiita.com/supertaihei02/items/f3ef9148fd5235ee2816

**** password設定
調査及び、設定
調査結果、設定不可

**** 残り
- 料金表の作成
- redis clusterの扱い. scaleできるの?
- ec2 sideが複数時に動作するか確認
- backup方法 (構造の確認)
  master, slave, replication?
- restore方法
- 1台でok?

**** description
- 失敗したノードを自動的に検出して置き換え、自己管理インフラストラクチャと関連付けられたオーバーヘッドを減らします。
- データベースの過負荷により、ウェブサイトとアプリケーションのロード時間が低下するリスクを軽減する回復力のあるシステムを提供します
- ノードに関連付けられた主要パフォーマンスメトリックスの可視性を強化します

**** 対応製品
- memcached
- redis

**** 料金
https://aws.amazon.com/jp/elasticache/pricing/

- 従量課金制
- 消費したリソースのみについて時間単位
- reserved instanceは割安

- 無料枠
  新規ユーザー : 1 か月あたり 750 時間まで t1.micro または t2.micro が対象

- 転送料金
  同一リージョンの異なる Availability Zone にある Amazon EC2 インスタンスと Amazon ElastiCache ノード間でデータを転送する場合、
  標準の Amazon EC2 リージョンデータ着信/発信料金が 0.01 USD/GB
  // ec2側にのみ発生.

***** instance
rate 113

|------------------+------+-------+----------+------------+----------+-------------+
|                  | vcpu |   mem | $ / hour | yen / hour | yen /day | yen / month |
|------------------+------+-------+----------+------------+----------+-------------+
| cache.t2.micro   |    1 | 0.555 | $0.026   |      2.938 |   70.512 |    2185.872 |
| cache.t2.small   |    1 |  1.55 | $0.052   |      5.876 |  141.024 |    4371.744 |
| cache.t2.medium  |    2 |  3.22 | $0.104   |     11.752 |  282.048 |    8743.488 |
| cache.m3.medium  |    1 |  2.78 | $0.120   |      13.56 |          |             |
| cache.m3.large   |    2 |  6.05 | $0.240   |      27.12 |          |             |
| cache.m3.xlarge  |    4 |  13.3 | $0.485   |     54.805 |          |             |
| cache.m3.2xlarge |    8 |  27.9 | $0.965   |    109.045 |          |             |
|------------------+------+-------+----------+------------+----------+-------------+


**** node種類
https://aws.amazon.com/jp/elasticache/details/

**** 制約 - agreement
https://aws.amazon.com/jp/agreement/


**** backup
https://aws.amazon.com/jp/elasticache/pricing/

- 自動スナップショット
- およびユーザー開始型のスナップショットに関連するストレージです。

アクティブな Redis 用 ElastiCache クラスターごとに、1 つのスナップショットのストレージ領域を無料で提供しています。
追加のバックアップストレージは、毎月 0.085 USD/GB（すべてのリージョンで同じ価格）です。また、スナップショットを使用したデータ転送は無料です。

***** スナップショットの作成はパフォーマンスにどのような影響がありますか?
スナップショットの作成中に、短い時間ですが、ノードでレイテンシーが増える場合があります。
スナップショットは Redis の組み込み BGSAVE を使用し、その強度と制限による影響を受けます。
具体的には、Redis プロセスは分岐し、親は継続してリクエストに対応しますが、子はデータをディスクに保存すると終了します。
この分岐により、スナップショット生成中はメモリの使用量が増えます。
このメモリ使用がキャッシュノードの使用可能なメモリ容量を超えるとスワップがトリガーされ、ノードがさらに低速になる場合があります。
このため、スナップショットを（マスターではなく）リードレプリカのいずれかで生成することをお勧めします。
また、予約メモリパラメータを設定してスワップの使用量を最小化することをお勧めします。
詳細については、こちら をご覧ください。

***** 保存期間
保持期間は、自動スナップショットが保持される期間です。
例えば、保持期間が 5 に設定された場合、本日作成されたスナップショットは削除されるまでに 5 日間保持されます。
1 つ以上の自動スナップショットをコピーし、手動で保存するように選択すると、保持期間が過ぎても削除されません。

**** 用語
***** Cache Security Group
キャッシュクラスターの中のキャッシュノードへのアクセスを制限します

***** Cache Cluster
キャッシュノードの集合体です。各クラスターは特定のアベイラビリティゾーンに配置されます

***** Cache Node
キャッシュクラスターを形成する、処理/ストレージを行うユニットがキャッシュノードです。
クラスター内のノードの数は必要に応じて増減できます。
各ノードは、特定のバージョンのキャッシュエンジンを用います。
ノードのキャッシュサイズは6GBから67BGまで選択できます。
DNS名がノード作成時に割り当てられます

***** Cache Engine
キャッシングプロトコルやアルゴリズムを実装しているものをキャッシュエンジンと呼びます。
ElastiCacheの最初のリリースでは、Memcached のバージョン1.4.5をサポートしています

***** Cache Parameter Group
キャッシュエンジンに設定できる一連の設定のためにこのパラメータグループを用いて設定します

**** setup on aws
***** vpc作成
***** subnet作成
****** name
allin-sns

****** description
allin-sns

****** VPC-ID
前項目で作成した、sns用VPC
もしくは、default?

****** availability zone
cross zoneにする場合は、1a/1cで二つのsubnetを追加?

****** security group
******* for ec2 instance
22
80
5000
13000

******* for elasticash
6379 : security group 指定 [for ec2 instance]

****** 注意
******* 自動割り当て public IP
有効化

******* route table
route talbeへigwを紐付ける

***** select engine
select redis

***** speciry cluster details
- engins version  : 2.8.24
- port            : 6379
- parameter group : default redis (must be make parameter group?)
- replication     : ???????????????
    - multi AZ  : ?????

- cluster name    : any name
- node type       : t2.small

- S3 Location of Redis RDB file : bucke name  # for backup?

***** Configure Advanced Settings
- subnet             : allin-sns
- availability zone  : 未指定
- security group     : for_elasticashe_redis group
- maintenance window : no
- SNS notification   : disable

*** Done [#D] 現状、必要な設定、調査項目をまとめる
CLOSED: [2016-03-30 Wed 10:57]
**** elasticash
**** mongodb
**** S3
**** 認証API
- 2月中旬頃に、ruby開発で追加
- 今の所globalでok
- アクセス範囲を決めるのはbbさん

**** nodejs
- local保存後、ec2からs3へアップロード

*** Done QA:英字 102365文字付近の投稿でシステムエラーが出る
CLOSED: [2016-04-18 Mon 18:32] SCHEDULED: <2016-04-07 Thu>
CLOCK: [2016-04-08 Fri 10:15]--[2016-04-08 Fri 11:29] =>  1:14
CLOCK: [2016-04-06 Wed 11:04]--[2016-04-06 Wed 15:13] =>  4:09

feed / commentとも

facebookの文字数の調査して、わかればその文字数制限に合わせる。
わからなければ、1024文字とする。

**** Done 文字数調査
CLOSED: [2016-04-07 Thu 10:47]
63206
http://mashable.com/2011/11/30/facebook-status-63206-characters/#lwVLtVbfNgq4

aaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaA123456
あああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああ
ああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああ

ああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああ
ああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああ

68242 = 34121
あああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああ
漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞漢字阿部氏難駄目殴亞難駄目殴亞漢字阿部氏難駄目殴目殴

**** Done angular側に文字数制限を入れる
CLOSED: [2016-04-06 Wed 14:36]
**** Done nodejs側に文字数制限を入れる
CLOSED: [2016-04-06 Wed 15:13]
size limitを入れる

aaaaaaaaaa

**** Done request json limit あげる
CLOSED: [2016-04-06 Wed 14:36]

**** Done 報告
CLOSED: [2016-04-08 Fri 10:24]
お疲れ様です

以下対応しました
https://bbank-devs.atlassian.net/browse/RUBYDEV-245

allin / allin-sns双方を修正しています
https://github.com/BusinessBank/allin-sns/pull/25
https://github.com/BusinessBank/allin/pull/2457

**** Done 4,000
CLOSED: [2016-04-08 Fri 11:28]
aaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaAaaaaaaaaaA
ああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああああ


@y-shibata, @r-hirota
失礼しました
改めてPRしましたので、ご確認お願い致します

https://github.com/BusinessBank/allin/pull/2457/commits
https://github.com/BusinessBank/allin-sns/pull/26/commits

*** Done 他社account
CLOSED: [2016-04-04 Mon 23:12]
curl -v -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '{
"company_name":          "ruby-develoment",
"email":                 "h-sato@ruby-dev.jp",
"password":              "h-sato@ruby-dev.jp",
"password_confirmation": "h-sato@ruby-dev.jp",
"last_name":             "h",
"first_name":            "s" }'  https://allin-development.ruby-dev.jp/api/v1/preregistrations


y-shibata@ruby-dev.jp
h-sato@ruby-dev.jp
r-hirota@ruby-dev.jp
s-numasawa@ruby-dev.jp


curl -v -H "Accept: application/json" -H "Content-type: application/json" -X POST -d '{ "company_name": "ruby-develoment",  "email": "r-hirota@ruby-deve.jp",  "password": "r-hirota@ruby-deve.jp",  "password_confirmation": "r-hirota@ruby-deve.jp",  "last_name": "r-hirota",  "first_name": "r-hirota" }'  https://allin-development.ruby-dev.jp/api/v1/preregistrations




*** Done 不具合伝達
CLOSED: [2016-04-04 Mon 17:27]

feedの書き込みで確認 (commentは未確認) (edited)

- タイムラインを開く
- upload file選択
- 書き込み実行 (文字列は適当) (edited)
- 再度 upload fileを選択、前述とは異なるfileを選択
- upload 対象となる file listが表示される
- 新規書き込みのため、1件表示が期待されるが、2件分表示される
- 書き込むと2件分uploadされる

*** Done commentのdestroyメソッドに、自分自身をDBから削除する処理を追加
CLOSED: [2016-04-04 Mon 17:28] SCHEDULED: <2016-04-02 Sat>
CLOCK: [2016-04-02 Sat 10:00]--[2016-04-02 Sat 10:28] =>  0:28

https://bbank-devs.atlassian.net/browse/RUBYDEV-226

271

CommentSchema.methods.destroy= function (callback) {
    const Feed = require('./feed');
    const Attachment = require('./attachment');

    Feed.removeCommentId(this._id, (err, doc) => {
        if (err || !doc) {
            debug(err);
        }
    });

    this.attachments.forEach((id) => {
        Attachment.findByIdAndRemove(id, (err, doc) => {
            if (err || !doc) {
                debug(err);
            } else {
                doc.deleteFile();
            }
        });
    });
    return callback(null, this);
};

*** Done model作成
CLOSED: [2016-03-30 Wed 11:02]
**** 疑問
- stg, prd下の、nodejsの待ち受けportは?

**** Done attachment fileの扱い
CLOSED: [2016-03-30 Wed 11:02]
gridfsのIDは？
そもそも、保存の仕方は?
**** Done binary dataの型
CLOSED: [2016-02-22 Mon 17:13]

buffer
**** Done database作成から
CLOSED: [2016-03-30 Wed 11:02]
***** model
****** feed
******* グループ名
column : group_name
type   : string

******* 投稿記事
column : feed
type   : string

******* 投稿作成日時
column : created_at
type   : date

******* 投稿更新日時
column : updated_at
type   : date

******* Likes
column: likes
******** Like数
column : count
type   : number

******** ユーザIDの配列
column : users
type   : [number]

******* 企業ID
column : company_id
type   : number

******* ユーザ
posted_user

******** 投稿ユーザID
column : id
type   : number

******** 投稿ユーザ名
column : name
type   : string

******* コメントモデルの_IDの配列
column : comments
type   : [number]

******* 添付ファイルの配列 (一ファイルのみ持てる)
column: attachment_file

******** GridFSで保存したファイル_ID
column : id
type   : number

******** ファイル種別
column : extention
type   : string

******** サムネイル (ファイル種別が画像の場合は、持った方がよいか？)
column : thumbnail
type   : mixed

****** comment
******* コメント内容
column : comment
type   : string

******* コメント作成日時
column : created_at
type   : date

******* コメント更新日時
column : updated_at
type   : date

******* feed modelの_ID
column : feed_id
type   : number

******* ユーザ
column: comment_user

******** コメントしたユーザ_ID
column : id
type   : number

******** コメントしたユーザ名
column : name
type   : string

******* 添付ファイルの配列
column: attachment_file

******** GridFSで保存したファイル_ID
column : id
type   : number

******** ファイル種別
column : extention
type   : string

******** サムネイル（ファイル種別が画像の場合は、持った方がよいか？）
column : thumbnail
type   : mixed

***** init thought
- env/development.jsから (nodejs? mongoose?)
  - どうやらDBを作成するためのものではなく、接続処理用?

- その後、prodcution, stagingを

- 記述方法、実行方法 (nodejs? mongoose, mongoDB?)

**** Done model作成
CLOSED: [2016-02-22 Mon 17:12]
- validationは適当
- schema, model 作成
- feed, comment, model
- まずは, feed, comment modelから

- 各場所は?

**** Done ref
CLOSED: [2016-03-30 Wed 11:02]
comment modelのrelation

**** Done modelへのmethods追加
CLOSED: [2016-03-30 Wed 11:02]
- static.methods追加

**** Done api作成
CLOSED: [2016-03-30 Wed 11:02]
   apiのURL
   GET /api/1.0/feeds
   POST /api/1.0/feeds
   GET /api/1.0/feeds/1

**** 型一覧
http://mongoosejs.com/docs/schematypes.html
http://yone-public.blogspot.jp/2012/11/mongoose1.html

var schema = new Schema({
  name:    String,
  binary:  Buffer,
  living:  Boolean,
  updated: { type: Date, default: Date.now }  // デフォルト値を使用
  age:     { type: Number, min: 18, max: 65 } // 数字は18~65の間
  mixed:   Schema.Types.Mixed,                // 何でもあり
  array:      [],                             // Arrayの中に何も指定しなければMixedになる
  ofString:   [String],                       // String型の配列
  ofNumber:   [Number],
  ofDates:    [Date],
  ofBuffer:   [Buffer],
  ofBoolean:  [Boolean],
  ofMixed:    [Schema.Types.Mixed],           // [], Array, [{}]でも同じ
})

**** file relation
***** model, schema
****** config/mongoose.js
// load the application model
require('../app/models/user.server.model');
require('../app/models/article.server.model');

****** app/model/*
用書き方調査

***** config
****** config/env/*
要書き方調査

**** 参考app
article.server.model.js
schema作成、model定義

**** 実ソースでの、接続先設定箇所
- file
  app/config/env/production.js
  env.js
  staging.js

- 環境毎にDB名を変える
- 書き方調査、validation

**** 添付ファイルモデル
mongodbオライリー本の324pageあたりを参照

*** Done ansible refactoring
CLOSED: [2016-03-30 Wed 11:04]
これはあれだな
server構成決まらないと、実装できない

[2016-03-30 Wed]
現状使ってないので、いらなさそう

*** Done confilict解消
CLOSED: [2016-03-30 Wed 09:09] SCHEDULED: <2016-03-29 Tue>
CLOCK: [2016-03-29 Tue 13:45]--[2016-03-29 Tue 14:29] =>  0:44
https://git.ruby-dev.jp/business_bank_group/allin-sns/merge_requests/91

*** Done mongo setup for replica set
CLOSED: [2016-03-15 Tue 09:08]
CLOCK: [2016-03-10 Thu 11:00]--[2016-03-11 Fri 18:00] => 7:00

setting 参考 site
https://github.com/syokenz/marunouchi-mongodb/tree/master/20120926/fetarodc
http://gihyo.jp/dev/serial/01/mongodb/0004?page=2

official
https://docs.mongodb.org/manual/tutorial/deploy-replica-set/
https://docs.mongodb.org/manual/reference/configuration-options/
https://docs.mongodb.org/manual/tutorial/remove-replica-set-member/

**** Done AWS setting
CLOSED: [2016-03-10 Thu 13:21]
***** security group
mongo dbは、以下二つのSGからのinboundを許可する
EC2 / mongo

**** Done install 手順
CLOSED: [2016-03-10 Thu 14:29]
***** Done repository追加
CLOSED: [2016-03-10 Thu 13:21]
[mongodb-org-3.2]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/amazon/2013.03/mongodb-org/3.2/x86_64/
gpgcheck=0

***** Done sudo yum install mongodb-org
CLOSED: [2016-03-10 Thu 13:21]
***** Done replica set setup
CLOSED: [2016-03-10 Thu 13:44]
****** daemon startup setting
****** set variable
cfg = {
 _id : "allin-mongo",
 members : [
  { _id : 0, host : "10.0.1.100:27017", priority : 10},
  { _id : 1, host : "10.0.1.101:27017", priority : 1},
  { _id : 2, host : "10.0.2.101:27017", priority : 5} ] }

****** run
> rs.initiate(cfg)

****** status check
rs.status()

****** add sample data
> use xxxxxxxxx
> for(var i=1; i<=100000; i++) db.logs.insert({"uid":i, "value":Math.floor(Math.random()*100000+1)})

****** slave
> db.getMongo().setSlaveOk()
> db.logs.count()

****** fail over
- primary kill
- fail over
  20sec - 30secくらい
  この間はおそらく書き込めない

****** config 再設定
rs.reconfig(cfg)

****** adjust priority
https://docs.mongodb.org/manual/tutorial/adjust-replica-set-member-priority/

****** stop replicate
- 設定ファイルから, replicateの設定を削除

- > use local
- > db.dropDatabase();

- secondaryの方はデータが残るっぽいので
  sudo rm -rf /var/lib/mongo/*
  でファイル全削除

****** add secondary
- cfgへ追加
- rs.reconfig(cfg)

data量にもようだろうが、数十秒で同期した

****** drop secondary
- cfgへ追加
- rs.reconfig(cfg)

***** Done priority setting
CLOSED: [2016-03-10 Thu 14:12]
***** etc
なんかあるか?
とりあえずok

**** Deploy方法考察
これを、shellでやる?
ansible?
replicaの設定ファイルは?

***** 初期起動はAMIから
***** Done logrotate setting
CLOSED: [2016-03-10 Thu 15:35]

***** Done log level
CLOSED: [2016-03-10 Thu 15:37]

set to 0 to conf
***** Done password
とりあえず今はなし
export使おう

***** disk setting
ok

***** setup scriptの設置
***** mongoを手動起動
- 全server mongo起動済みとする
- security group / subnet など適正に設定する

***** run setup shell

**** backupどうする

**** setting方法
***** create vpc
***** create subnet : az-a
***** create subnet : az-c

***** create security group loadbalancer
tcp port 80  : 0.0.0.0
tcp port 443 : 0.0.0.0

***** create security group ec2
tcp port 22   : 0.0.0.0
tcp port 80   : elb sgを指定
tcp port 443  : elb sgを指定
tcp port 5000 : 0.0.0.0

***** create security group mongo
tcp port 22    : 0.0.0.0
tcp port 27017 : ec2 sgを指定
tcp port 27017 : 当mongo db sgを指定



***** create load balancer
# TODO

***** create ec2 app server
# TODO

***** create mongo primary node
****** instance type
small or medium

****** instance詳細
- network (VPC)    : allin-sns
- availabilty zone : a
- primary IP       : 10.0.1.100

****** Disk
/dev/sdbの容量をprd / stg / dev用途で増減

****** instance tag
key   : name
value : 任意 (allin-mongo_Primaryなど)

****** security group
前項で作成したmongo sg

****** ssh key
任意

***** run mongo replica set
- ssh to server
- bash setup_mongo_replica_set.sh
- mongo

# 以下の様な表示で正常
- allin-mongo:PRIMARY> rs.status()
{
        "set" : "allin-mongo",
        "date" : ISODate("2016-03-10T07:49:37.093Z"),
        "myState" : 1,
        "term" : NumberLong(1),
        "heartbeatIntervalMillis" : NumberLong(2000),
        "members" : [
                {
                        "_id" : 0,
                        "name" : "10.0.1.100:27017",
                        "health" : 1,
                        "state" : 1,
                        "stateStr" : "PRIMARY",
                        "uptime" : 86,
                        "optime" : {
                                "ts" : Timestamp(1457596168, 2),
                                "t" : NumberLong(1)
                        },
                        "optimeDate" : ISODate("2016-03-10T07:49:28Z"),
                        "infoMessage" : "could not find member to sync from",
                        "electionTime" : Timestamp(1457596168, 1),
                        "electionDate" : ISODate("2016-03-10T07:49:28Z"),
                        "configVersion" : 1,
                        "self" : true
                },
                {
                        "_id" : 1,
                        "name" : "10.0.1.101:27017",
                        "health" : 1,
                        "state" : 2,
                        "stateStr" : "SECONDARY",
                        "uptime" : 19,
                        "optime" : {
                                "ts" : Timestamp(1457596168, 2),
                                "t" : NumberLong(1)
                        },
                        "optimeDate" : ISODate("2016-03-10T07:49:28Z"),
                        "lastHeartbeat" : ISODate("2016-03-10T07:49:36.182Z"),
                        "lastHeartbeatRecv" : ISODate("2016-03-10T07:49:35.862Z"),
                        "pingMs" : NumberLong(0),
                        "syncingTo" : "10.0.1.100:27017",
                        "configVersion" : 1
                },
                {
                        "_id" : 2,
                        "name" : "10.0.2.101:27017",
                        "health" : 1,
                        "state" : 2,
                        "stateStr" : "SECONDARY",
                        "uptime" : 19,
                        "optime" : {
                                "ts" : Timestamp(1457596168, 2),
                                "t" : NumberLong(1)
                        },
                        "optimeDate" : ISODate("2016-03-10T07:49:28Z"),
                        "lastHeartbeat" : ISODate("2016-03-10T07:49:36.195Z"),
                        "lastHeartbeatRecv" : ISODate("2016-03-10T07:49:35.881Z"),
                        "pingMs" : NumberLong(2),
                        "syncingTo" : "10.0.1.100:27017",
                        "configVersion" : 1
                }
        ],
        "ok" : 1
}
allin-mongo:PRIMARY>

**** primary
- ip : 10.0.1.100
- repo
- install
- replica set
- priority

**** secondary1
- ip : 10.0.1.101
- repo
- install
- replica set
- priority

**** secondary2
- ip : 10.0.2.101
- repo
- install
- replica set
- priority

**** secondary3

*** Done 仮想開発環境作成 | base, devops
**** vagrant : 1.8.x
**** ansible : 2.0.x
***** python : 2.7.x
**** Centos  : 6.5
*** Done package
CLOSED: [2016-02-22 Mon 14:25]
書籍
https://drive.google.com/drive/u/0/folders/0By_vdgUt8tGjYVFSYzJlSmdlZTA

**** Jasmine : 2.4.1
test framework
他にもframeworkがあるらしいので、どれがいいか選定

**** Karma : 0.13.19
test runner
他にもtest runnerがあるらしいので、どれがいいか選定

npm

**** Mongoose : 4.4.1
node.js, mongodb間のdriver
型管理、valiationでもいいらしい

他にもdriverがあるらしいので、要調査
***** getting start
http://mongoosejs.com/docs/index.html

*** Done node.js
CLOSED: [2016-02-22 Mon 14:25]
**** そもそも、node.jsってなにさ
server side javascript
non-blocking I/O (DB accessと、描画を別々に行う)

http://liginc.co.jp/web/programming/node-js/85318
http://gihyo.jp/dev/serial/01/nodejs/0001
http://qiita.com/hshimo/items/1ecb7ed1b567aacbe559

**** 書籍
**** ドットインストール
**** node.jsのversion管理
// nvmがいいとかなんとか

***** nvm commands
****** install
指定されたバージョンの Node とその環境で使用される npm をインストールします。
インス トール後はもう使用できる環境になっているため、use コマンドを実行する必要はありません。
バージョンは v0.8.3 のように指定します。
また、latest と指定すると最新のバージョンを指 定したことになり、stable と指定すると最新の安定バージョンを指定したことになります。

****** use
指定されたバージョンの Node を使う環境を整備します。
具体的には、指定されたバージョン のディレクトリ下の bin ディレクトリにパスを通します。
nvm は子シェルを立ち上げることな く現在のシェルに変更を適用します。
使用するバージョンが決まっている場合には、.bashrc などのファイルに(. ~/.nvm/nvm.sh の記述のあとに)nvm use v0.8.3 の
ように記述してお くと便利です。

****** ls
現在入手可能な Node のバージョンの一覧を表示します。すでにインストールされているバー ジョン番号は青色で表示されます。

****** ls [version]
指定された文字列にマッチするバージョンを表示します。

****** deactivate
現在のシェルの環境変数 PATH と MANPATH から nvm に関係したものを削除します。

****** sync
nvm ls で表示する入手可能なバージョンのキャッシュを更新します。

****** alias [alias] [version]
指定されたバージョンに指定されたエイリアス(別名)を登録します。
エイリアスとして default を指定した場合は、use コマンドを実行せずとも登録したバージョンが使用可能にな ります。

***** nave

**** package管理
***** npm
node.jsのパッケージマネージャー

***** npm commands
****** search for module
$ npm search [package name]

****** global install
$ npm install express -g

パッケージをプロジェクト横断的に使えるよう にインストールすることをグローバルにインストールすると言います

****** list of global install
$ npm ls -g

**** install for linux
***** python 2.6 or 2.7
$ apt-get install Python、git、curl

***** nvm install
$ cd ~
$ git clone git://github.com/creationix/nvm.git ~/.nvm
$ source ~/.nvm/nvm.sh

***** setting nvm
// デフォルトのnodeのバージョンを設定
$ nvm alias default 5.5.0

// ターミナル起動時にnvmコマンドが実行できるように設定
vi ~/.bash_profile

--------------------------------
if [[ -s ~/.nvm/nvm.sh ]];
  then source ~/.nvm/nvm.sh
fi
--------------------------------

***** install latest 5.x.x
// install可能なversion list
$ nvm ls-remote

// install latest 5系
$ nvm install 5.5.0

// インストールされたことの確認
$ node -v

***** sample program
// helloworld.jsを作る
$ vi helloworld.js

// vargrant内へ接続する場合は、[0.0.0.0:3000] へ
----------------------------------------------------------------
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/');
----------------------------------------------------------------


// 実行
$ node helloworld.js


// ブラウザに以下URLを貼り付けて「Hello World」と出たら成功です
  http://127.0.0.1:1337/

***** sample chat program
http://socket.io/get-started/chat/

// clone
git clone https://github.com/rauchg/chat-example

// install pacages
npm install --save express
npm install --save socket.io

// run
node index.js

// open page
open page in your browser
now you can start chat

**** version
- 5系を採用
  柴田さん、佐藤さん判断
  とりあえずは5系を採用。
  問題あれば都度考えましょう。

- LTS
  https://nodejs.org/en/blog/release/v4.2.0/
  http://www.publickey1.jp/blog/15/nodejs_long_term_support_argon.html

  18ヶ月はacitveは更新
  18ヶ月後は、12ヶ月間のサポート期間

  // よくわからん

**** frame work
- express
  日本語情報有り

- koa
  日本語情報無し. 情報自体が少ない
  simple (call back関数が簡潔に書ける)

**** module
***** load
- In /path/to/somewhere.js
  require(’./modulename’); // => /path/to/modulename と し て 解 決

- /で始まるパスは、絶対パスとして解決されます。
  require(’/path/to/modulename’);

- これら 2 つ以外のパスの場合は、
  - node_modules ディレクトリを検索して解決されたファイルのパス
  - NODE_PATH 環境変数の値を検索して解決されたファイルのパス

- require(’modulename’);
  - /path/to/somewhere/node_modules/
  - /path/to/node_modules/
  - /path/node_modules/
  - /node_modules/

***** require
同じfileからrequireした場合、同じオブジェクトになる。
// 同一オブジェクトのため、instance変数の値が共有される

*** Done MongoDB
CLOSED: [2016-02-22 Mon 14:25]
**** そもそも、MongoDBってなにさ
https://ja.wikipedia.org/wiki/MongoDB
http://qiita.com/suguru03/items/c7eb44ed90c7e79bbedc
http://qiita.com/ANTON072/items/e0534daa4b2fb0f553eb

nosql
little endian systemで動作
json / bson
ドキュメント型NoSQL

**** 書籍
**** .install

*** Done install Babel
CLOSED: [2016-02-10 Wed 09:16] SCHEDULED: <2016-02-08 Mon>

*** Done install redis
CLOSED: [2016-02-10 Wed 09:16] SCHEDULED: <2016-02-08 Mon>


http://qiita.com/n0bisuke/items/2448010c0dfaf8a20167

*** Paused [#B] refactoring
CLOSED: [2016-03-15 Tue 09:08]
**** code重複
https://github.com/briankircho/mongoose-schema-extend

**** routing
https://github.com/expressjs/express-resource

**** review requestの出し方があるらしい
crusibleから
教えてもらえなさそうならやっちまうか
資料はあったと思う

https://github.com/BusinessBank/allin/pull/2457
https://github.com/BusinessBank/allin-sns/pull/25

https://bbank-devs.atlassian.net/wiki/display/ALLIN/Development+workflow
https://bbank-devs.atlassian.net/wiki/display/ALLIN/Code+Review

* Done spf設定を考察
CLOSED: [2016-09-29 Thu 12:31]
Added: [2015-10-13 Tue 10:53]

// そもそも、この設定を考えるのは僕の仕事だったな

*** 経緯
佐藤さん設定により [google spf] 設定のみになっている。
以前の設定では、amazon ses / ec2 serverのIPを登録していた。

*** 考察点
   - amazon sesは不要だろう。
   - ec2 server IPの登録は必要か?
       - どの IPを登録すれば良いのか?
       - SMTP serverとあるが、google STMP serverを経由すれば良いのか?
       - ec2 sendmailから送信する場合は、どうなる?
         testが必要ではないか?
* Done メール送信機能 - 再調査                                :bussiness_bnk:
CLOSED: [2016-09-29 Thu 12:31]
Added: [2015-10-13 Tue 14:05]
*** 要件
**** 送信元を変えたい
**** クリックトラック
**** 柔軟性

**** Synergy! の機能を参考とする
https://drive.google.com/open?id=0By_vdgUt8tGjeVRLS3JvSENYZVU

**** AWS SESは、「送信元アドレス指定機能」に対応できないのでNG
**** 優先して実装する機能は以下の通り
マーケティングメール（単発の一斉配信機能）
プランニングメール（定期的なメルマガ配信機能）
コンテンツ差込み配信（とりあえず顧客名のみ対応）
配信停止フラグ対応（顧客 × メルマガ 単位のフラグ管理）
送信元アドレス指定機能（任意のメアドを指定可能とする）

**** 今後実装を検討する機能は以下の通り
オートメール（自動配信機能）
ステップメール（ストーリーに沿った自動配信メール）
クリックカウント機能（HTMLメール開封率レポート、クリックフィードバックレポート機能）
コンテンツ差込み配信（顧客の属性に合わせた動的文面）
承認配信機能（承認フロー付きの配信機能）
現状、ビジネスバンク社自身は、月20万通のメルマガを配信して、ジェイシティ社に3、4万支払っているとのこと

*** 確認点
**** sendgrid - 上限数確認
***** 疑問点 [%]
****** Done 月の上限は、マーケティングにも適用されるのか?
適用される。

以下、料金の考え方
https://sendgridjp.zendesk.com/hc/ja/articles/202688479-%E5%88%A9%E7%94%A8%E6%96%99%E9%87%91%E3%81%AE%E8%A8%88%E7%AE%97%E6%96%B9%E6%B3%95%E3%82%84-%E8%AB%8B%E6%B1%82%E3%81%AE%E3%82%BF%E3%82%A4%E3%83%9F%E3%83%B3%E3%82%B0%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E6%95%99%E3%81%88%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84-

silverで、marketing mailが超過した場合
100 + 30 / 1,000
発生する。

****** Done マーケティングメールと通常の送信方法の違い
- マーケティングメールは 30円 / 1000通
- クリックトラック、一括送信などが使用できる

****** Done 時間あたりに送信できるメール数の制限
無し
ただし、相手先に届くとは限らないので、対策が必要。

対応については以下
https://sendgrid.kke.co.jp/blog/?p=1300

****** Done ruby APIはあるか?
有り
https://sendgrid.kke.co.jp/blog/?p=1140

対応言語一覧
https://sendgrid.kke.co.jp/blog/?p=1295

****** 一斉配信時、どの程度で送信が完了するか?
別の言い方をすると、本当にまとめて一斉に配信するのか?

***** 問い合わせ先
03-5318-3093

受付時間帯：弊社営業日9:00-17:00

**** 価格比較
**** ses - 別の承認interfaceがないか
***** Done 調査
- document : 無し。既存の二種のみ
- web      : 無し

***** Done AWS SES : 問い合わせ中
CLOSED: [2016-03-30 Wed 10:50]
状態忘れたのでDONEとする [2016-03-30 Wed]

*** 再販するさい
https://sendgridjp.zendesk.com/hc/ja/articles/205590193-%E5%86%8D%E8%B2%A9%E3%82%84-SendGrid%E3%82%92%E8%87%AA%E7%A4%BE%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%81%AB%E7%B5%84%E3%81%BF%E8%BE%BC%E3%82%80%E9%9A%9B%E3%81%AE%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85%E3%82%92%E6%95%99%E3%81%88%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84

sendgridへ確認が必要

*** 他サービス都の比較
developers向けのサービスを抽出
mailサービスの抽出

developer 向けサービスか?

- 料金表 - 1へ一般的な
- 料金表 - 2の方へ従量課金グラフ
- 機能  -


http://tech.cunited.jp/post/96318734265/ses-sendgrid-mandrill-mailgun

**** SES
**** mail chimp
http://mailchimp.com/
http://www.loftwork.jp/column/2013/20131010_mailchimp.aspx

マーケティングメールでは、人気な様子

***** 料金
送信先アドレス数で料金が変わる
10,000人で $75
100,000人で $475

***** 注意点
・インターフェースやサポートが全て英語
メールの文面では日本語が使えますが、操作画面は全て英語です。
非常に分かりやすく作られているので、Webサービスをよく利用する方であれば問題ないと思いますが、
サポートも英語なので、英語にアレルギーがあると結構苦労するかもしれません。

・文字化けが起こる
⇒元々英語（1バイト）圏向けに開発されているツールだと思うので、日本語では結構文字化けが発生します。
Outlook/Hotmail宛に送ったメールのタイトルが文字化けを起こしたり、iPhoneに送ったメールが暗号みたいになってしまったりと、
1年間使っただけですが、結構な頻度で文字化けに遭遇しています。
現時点では完全な回避策に辿り着けてはおらず、件名の文字化けには、件名を短くして対応するなど個別に対策をとり、回避しています。
（いつも化けているよ！という方いましたら、こちらからこっそり教えて下さい…。）

完全に回避できている訳ではないですが、現状の回避策は…

・件名の文字化け
MailChimpのサポートに、メールしてみたところ、件名が長すぎるよ。
と丁寧にお返事を頂けたので、30文字以内に抑えるようにしてからは安定しています。

・iPhoneでの文字化け
文字コードの改行位置で、「続きを読み込む」となった時に、日本語を正常に解釈できなくて文字化けを起こしているのだと思っているので、
「続きを読み込む」と表示される前のテキストを何文字か削ったり増やしたりして調整しています。

**** [X] Mailgun
domain登録が必要

- develop向け
- ruby api sdkあり

http://www.mailgun.com/pricing

***** price
| free | 10,0000  |
| $45  | 100,0000 |
| $95  | 200,0000 |
| $135 | 300,0000 |

$0.5〜0.1 千通当たり
送るほどに安くなる

**** [O] sendgrid 各種
https://sendgrid.kke.co.jp/?p=about.plan

***** 送信実験
numasawa@ruby-dev.jp
ruby@ruby.jp

など適当なアドレスで送信可能であった。
ただし、スパムスコアが上がる
spam扱いされたケースもあり。

送信元の確認は在った方が無難

**** [X] Mandril
domain登録が必要
bounceを個別に取得不可

***** price
https://www.mandrill.com/pricing/

first 25,000 $9.95
移行、$0.2〜0.1

***** API
ruby API有り
**** etc
- [ ] Postmark
- [ ] Mailjet
- [ ] Elastci Email
- [ ] Socket Labs
- [ ] Leader Send
- [ ] turboSMTP
- [ ] PostageApp
- [ ] Critesend
- [ ] ニフティクラウド ESS

*** SESが安いわけ
こんな感じで、SESとSendGrid Liteプランが安いのには理由があり、いろいろ提供していません。

- SESとSendGrid Liteは固定IPを提供していません。
- SESとSendGrid Liteは開封やクリックのトラッキング機能も提供していません。
- SES、Mailgun、SocketLabsなどのいくつかのサービスはニュースレター送信用のWYSIWYGを提供していません。
- SES、LeaderSend、SocketLabsなどのいくつかのサービスはメール受信APIを提供していません。


* Done mail                                                           :bb:BB:
CLOSED: [2016-09-29 Thu 12:28]

*** 経緯
**** [2016-02-03 Wed]
***** 今後の予定
自動IPウォームアップ

- リリース前に、以下の確認を行う予定
    - 自動IPウォームアップを使用したメール送信の動作確認
    - バウンド発生や迷惑メール扱い時、SendGrid管理画面でどの様な情報が確認出来るか？

***** 口頭での確認
- BB社のアカウントで送信を試す
    - ruby社のaccountは現状使わない
      つまり、現状ではあまり無茶なテストはできない。

- BBさんに、sendgridの画面を見てもらう

- BBさんにメーリングアドレスがないか聞いてみる

- 1、2個程度のbounseなら発生させて確認したい
     - 過剰にreputationが低下する行為は試さない。
       そこまでする必要があるのか、判断材料がない。

**** [2016-02-03 Wed] 以前
- 柴田さん、佐藤さん見識では、自動IP wamrupは本番で適用すれば良い。
  事前の確認は不要。

- 竹中さんに、そんな感じのことを説明
  ぶっつけ本番でやるの?
  という反応

- 柴田さんに改めて、やらないとなった理由を聞いたが
  釈然としない

  とりあず、事前のIP warmupはできないという認識。
  恐らく、時間との戦いなので、できればやりたくなかった？
  という感じか？
  いまいち条件が見えない。

  ただ、そこらへんを考えるの僕の仕事である模様。

* Done AWS セキュリティ調査                                   :organic_style:
CLOSED: [2016-09-29 Thu 12:28]
Added:      [2015-11-01 Sun 15:29]

*** Done [#B] S3へのアクセス権限調査
CLOSED: [2016-09-29 Thu 12:27]
起点は、柴田さんの「誰でも勝手にuploadできるようにならん?」という言葉

* Done uniqlo auto start/stop
CLOSED: [2016-06-02 Thu 15:13]
Added: [2015-07-10 Fri 16:51]

条件を追加
現在、private IPのみでfilterしている。
tag名でのfilterを追加しよう。

* Done uniqlo develop                                                :uniqlo:
CLOSED: [2016-06-02 Thu 15:13]
Added: [2015-09-09 Wed 16:26]
*** uniqlo rspec
*** uniqlo-hashtag
- model, conrtoller, stab, mock当たりでテストはかける

*** main
*** crontab
*** view
*** 基本方針
**** 更新方法 : 個々人でbranch作成してpush
**** brakeman/rubocopのエラーをとる
- Taskを抽出し、展開予定?? # pivotal?
- repository/個人で担当予定?

**** その後、test作成?

*** rubocop
- coding規約を決める予定 (佐藤さん?)

*** brakeman
- 個人で調べて対応?
- まずは整理して、teamへ展開 (助田さん)

* Done Maintenance page調査
CLOSED: [2016-02-23 Tue 17:48] SCHEDULED: <2016-02-23 Tue>

https://siguniang.wordpress.com/2015/01/25/route53-cloudfront-s3-makes-planned-site-downtime-made-easy/
http://hiroohi.hatenablog.com/entry/2016/02/01/123959


domain を [xxx.xyz] と仮定する
DNS failoverを用い、参照先サーバーを切り替える。
503応答については、CloudFrontを用いる。(S3はerror code 設定不可)

*** S3設定
**** [xxx.xyz] という名前でbucketを作成する
**** プロパティから、静的webを公開
**** アクセス権をつける
***** アクセス許可から、バケットポリシーを選択
***** 下記を書き込む
# domainは適宜修正

{
	"Version": "2012-10-17",
	"Statement": [
		{
			"Sid": "AddPerm",
			"Effect": "Allow",
			"Principal": "*",
			"Action": "s3:GetObject",
			"Resource": "arn:aws:s3:::test-elb-maintenance.mruby.jp/*"
		}
	]
}
**** error-pages/sorry.htmlを設置

*** CloudFront設定
- 上記で作成した、bucketをcache (細かな作成方法は適当)

**** create distribution
- 前項で作成した S3のbucketを指定 (pull downで指定可能)
- [origin path]            : [/]
- [Alternate Domain Names] : [xxx.xyz] # 対象となるURLを記述
- その他は、default

**** 403エラーが出た場合、503へ変更。かつ、上述の error-pages/sorry.html を返す
- error pages tabを選択
- createを選択
- [http error code] : 403を選択。 (存在しないfileを選択すると403が返る)
- [Error Caching Minimum TTL] : 60
- [Customize Error Response ] : yes
- [Response Page Path] : /sorry.html
- [HTTP Response Code] : 503

**** 蛇足
# 勝手に、cloudfrontへのアクセス権限?が設定される

{
	"Version": "2012-10-17",
	"Statement": [
		{
			"Sid": "AddPerm",
			"Effect": "Allow",
			"Principal": "*",
			"Action": "s3:GetObject",
			"Resource": "arn:aws:s3:::test-elb-maintenance.mruby.jp/*"
		},
		{
			"Sid": "2",
			"Effect": "Allow",
			"Principal": {
				"AWS": "arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity EROQJJU5YKG6K"
			},
			"Action": "s3:GetObject",
			"Resource": "arn:aws:s3:::test-elb-maintenance.mruby.jp/*"
		}
	]
}
*** Route53 Fail over setting
**** [xxx.xyz] priamry settingを作成
- [create]
- [Name]  : [xxx.xyz] なので、sub domainは不要
- [Type]  : Aレコード
- [alias] : yes
- [alias target]                : pull downで、対象のS3を選択
- [Routing Policy]              : Fail over
- [Failover Record Type]        : Primary
- [Evaluate Target Health]      : Yes
- [Associate with Health Check] : No

**** [xxx.xyz] secondary settingを作成
- [create]
- [Name]  : [xxx.xyz] なので、sub domainは不要
- [Type]  : Aレコード
- [alias] : yes
- [alias target]                : cloudfrontのURLを直接記述. [d3ck8you47rrig.cloudfront.net]
- [Routing Policy]              : Fail over
- [Failover Record Type]        : Secondary
- [Evaluate Target Health]      : No
- [Associate with Health Check] : No

*** 動作チェック
- ELBからEC2切り離し
- sorry pageかつ、503応答になっているか
    curl -D - http://~~~~~

* Done BB. All-in
CLOSED: [2016-02-08 Mon 11:42]
*** 要件
- all-in serverとは別に配信serverを設置

- 配信先
  主に、smartphoneの一般的なapp
  - linux, androi(version?)
  - mac, iphone(version?)
  - windows, win phone

- caldav必要な事
  - 配信方法
  - 既存データの変換方法
  - 既存データ読み込み(ruby?)
  - 既存データの解析

*** 疑問点
**** カレンダーの配信
書き込み、読み込み双方必要か?

**** 配信方法
- APIの様に、特定URIを叩いて情報を取得する形式か?
- それとも、caldav形式が前提か?

- Google calendarでは、URIからの追加が可能
  https://help.cybozulive.com/hlpb201206181140/

  cybozuでは、カレンダーをURI出力。
  これを受け、google calendarで受信するそうな。
  当機能は、認証が必要なく。URIにアクセスすれば誰も開ける模様。

- 自社cybozuで試行可能

*** Todo server調査、選別
*** Todo caldav server構築
*** Todo macでcaldav serverへaccess test
*** Todo 他nodeへの配信方法調査
*** Todo 認証 : 元データの解析
- DB?
- any
- format?
- 認証データの解析
- all-inのカレンダーは一つ

- caldav serverの認証機能の確認が必要
- 直接DBへアクセスするか、API経由とするか?

*** Todo caldav serverへのdata引き渡し方法調査
*** Todo data変換処理DB to ical
- ruby?
- rails?
- gem?
- 選定方法は?
- DB接続時意外、railsの意味があるか?

*** Todo 既存カレンダーデータのフォーマット調査
*** Todo caldav server 仕様/設定方法を調査
更新受付interval
認証 - 既存dataとのbindは以下に?

*** Todo Exchange
androidへの配信方法がわからないので、これを試す

- どんなサービスか
- caldav読み込めるか?

*** Todo 仕様の違いの把握
- iCal
- All-In

- 仕様上、漏れる項目の調査
- 双方の仕様確認
* Done Finc bug対応
CLOSED: [2016-01-06 Wed 12:01] DEADLINE: <2015-12-18 Fri>
*** Todo 他にもある
- 他にもあるか再確認
- とりあえずこれ分確認
- 佐藤さんからも割り当てがくるだろうか
- 佐藤さんの分も僕がわかるものは対応するのか?

*** Todo こちらも確認
https://github.com/FiNCDeveloper/wellness_survey/issues/3853

*** 送信処理について
**** 整理
***** 既知の情報 and 編集可能
****** ストレスチェックを実施する直前1ヶ月の労働時間（時間外・休日労働時間を含む）
counseling_hearing更新ならOKか?

******* data
counseling_hearing.working_hours

****** その他のストレス要因となる勤務状況
counseling_hearing更新ならOKか?

******* data
counseling_hearing.stressor

****** 面談実施年月日
counseling.start_at を直接書き換えるのは微妙。
意見書側に持つか?

******* data
counseling.decorate.counseling_date

def counseling_date
date = object.start_at.strftime("%Y年%m月%d日")
end

****** 医師氏名
operator.nameを書き換えるのはNG。
意見書側に持つか?

******* data
counseling.operator.name

***** 入力時 複合validte / 送信時はlogicで対応すればよいか
- 主要措置項目
  条件:
  職場への指導等の必要性があるものについて「あり」と答えた場合に入力必須としてください。

- 措置期間 / 次回面接予定日 / 面接者

  条件:
  ストレス反応についての結果において、「再面接を要す」を選択した場合にのみ、こちらの入力を必須としてください。

- 就業条件や職場環境の改善に関する意見
  条件:
  就業条件や職場環境等の調査の必要性が「あり」と答えたものについて入力必須としてください。

*****
**** 回答
***** 事前アンケートおよびストレスチェックで入力済みの項目について
次のG列でＹＥＳとある項目です。
https://docs.google.com/spreadsheets/d/1iRUEfS4SBiLendIaqg4E-pNQOGXbUEL8scbknTcCc6g/edit?ts=56456c62#gid=1525121193

***** 事前アンケートおよびストレスチェックで入力済みの項目について
次のファイルリンクのGでＹＥＳとある項目です。こちらは事前アンケートもしくはストレスチェックの結果を参照ください。
https://docs.google.com/spreadsheets/d/1iRUEfS4SBiLendIaqg4E-pNQOGXbUEL8scbknTcCc6g/edit?ts=56456c62#gid=1525121193

***** 産業医が編集可能な項目　（今回新規に説明列を追加しました）
次のI列でＹＥＳとある項目です。
https://docs.google.com/spreadsheets/d/1iRUEfS4SBiLendIaqg4E-pNQOGXbUEL8scbknTcCc6g/edit?ts=56456c62#gid=1525121193

operatorが編集不可であるべき項目も多数あるかと思います。

上述のリンクのI列　で、NOであるのが、編集不可の項目と理解ください。

他、以下のお答えになるかと思いますが。事前アンケートで入力されているものであっても、I列が編集可能としている項目については、編集可能としてください。
事前にデータが入力してあった場合、事前の入力項目を消すのではなく、変更するようにする、ということです。

意見書側で、事前アンケートの既存データ編集機能を実装する. (CounselingHearing(事前アンケート) のデータを直接編集する)
事前アンケートで入力必須ではない、かつ意見書側で必須の項目のみ編集可能とすればよいか?
事前アンケート以外の、既存データの編集は不要。

***** 送信時のバリデーション項目　
入力が必須となる項目で、送信時にバリデ―ションが必須となる項目です。
Ｊ列に記載しています。
https://docs.google.com/spreadsheets/d/1iRUEfS4SBiLendIaqg4E-pNQOGXbUEL8scbknTcCc6g/edit?ts=56456c62#gid=1525121193

ＹＥＳは、入力必須項目になります。
尚、３つの条件つきバリデーション（条件つきＹＥＳ）について、詳しく説明します。

***** 主要措置項目
職場への指導等の必要性があるものについて「あり」と答えた場合に入力必須としてください。

***** 措置期間 / 次回面接予定日 / 面接者:
ストレス反応についての結果において、「再面接を要す」を選択した場合にのみ、こちらの入力を必須としてください。

***** 就業条件や職場環境の改善に関する意見
就業条件や職場環境等の調査の必要性が「あり」と答えたものについて入力必須としてください。

***** 医師の所属先について
事前の入力はありません。編集可能「入力必須」　としてください。こちらは再々変更で申し訳ありません。

***** 送信不可の事象にはまるポイントは無いか　
各項目の入力のパターンは８パターンありますが、データが無く、編集できず、送信不可に陥るのは、１パターンです。今回、のスプレッドシートでご説明した項目には、このパターンは該当しません。

意見書が送信不可となるパターン
https://docs.google.com/spreadsheets/d/1iRUEfS4SBiLendIaqg4E-pNQOGXbUEL8scbknTcCc6g/edit?ts=56456c62#gid=1844796791

*** first
**** Done [#B] 4071
CLOSED: [2016-07-26 Tue 20:45]
https://github.com/FiNCDeveloper/wellness_survey/issues/4071

***** Done DB : counseling_reportへ項目追加
CLOSED: [2015-12-24 Thu 16:58]
以下、[既存情報あり] + [編集可能]

****** ストレスチェックを実施する直前1ヶ月の労働時間
- working_hour
- int

****** その他のストレス要因となる勤務状況
- stressor
- string(255)

****** 面談実施年月日
- Counseling.start_at
- date

****** 医師氏名
- operator
- string

****** 医師の所属先
- places
- int -> string

- [事前情報無し]
- [編集可能]

***** Done DB : null許可
CLOSED: [2015-12-24 Thu 16:42]
not null属性解除

- Done phisical_~~~~~_note
- Done stress_reaction_note

- Done 主要措置項目
- Done 措置期間 / 次回面接予定日 / 面接者
- Done 就業条件や職場環境の改善に関する意見

***** Done UI : _form / 入力form追加
CLOSED: [2015-12-24 Thu 19:21]
controllerで設定した方がいいな

- ストレスチェックを実施する直前1ヶ月の労働時間（時間外・休日労働時間を含む）
  working_hour

- その他のストレス要因となる勤務状況
  stressor

- 医師の所属先
  places

- 面談実施年月日
  counseling_date

- 医師氏名
  operator

***** Done UI : _report / 取得変数変更
CLOSED: [2015-12-24 Thu 19:21]
***** Done UI : 特定の値が有効時のみ、入力可能とする
CLOSED: [2015-12-25 Fri 13:12]
js調整
確認結果。不要

****** 主要措置項目
職場への指導等の必要性があるものについて「あり」と答えた場合に入力必須としてください。

****** 措置期間 / 次回面接予定日 / 面接者
ストレス反応についての結果において、「再面接を要す」を選択した場合にのみ、こちらの入力を必須としてください。

****** 就業条件や職場環境の改善に関する意見
就業条件や職場環境等の調査の必要性が「あり」と答えたものについて入力必須としてください。

***** Done UI : formの色
CLOSED: [2015-12-25 Fri 12:41]

***** Done StrongParameter
CLOSED: [2015-12-24 Thu 19:31]
working_hour
stressor
counseling_date
operator
places

***** validate
怖いから見直し

****** ストレスチェックを実施する直前1ヶ月の労働時間（時間外・休日労働時間を含む）
特になし

****** 複合validate
DB    : null許可
model : null不許可 (複合validate)

- 心理的な負担の状況及び心身の状況
- ストレス反応について
- Done 主要措置項目
- 措置期間 / 次回面接予定日 / 面接者
  represetative
  next_counseling_date
  interviewee
- 就業条件や職場環境の改善に関する意見

***** DB : float型にならない
***** Done validate 保存時
CLOSED: [2015-12-25 Fri 12:42]
- 意見書側だけ確認すれば良い
- validate項目見直し忘れず

***** Done validate 送信時
CLOSED: [2015-12-25 Fri 12:43]
送信不可となると非常に問題なので注意

presentと確認できなかった2項目
所属部 / ストレス反応の程度の評価

***** Done 意見書を作成する / 保存するを選択すると500エラーが表示される。
CLOSED: [2015-12-25 Fri 12:44]
not null解除
***** Done UI調整
CLOSED: [2015-12-25 Fri 12:47]
checkboxの内容を表示する際、セパレータがない。

問題ないと思われるが、微妙にせまいな

***** 送信・編集・表示ボタン
編集ボタンだけサイズが違う

class指定は同一なのだが...

***** working_hour と 時間のmargin
**** Done [#B] 3952
CLOSED: [2015-12-23 Wed 11:57]
https://github.com/FiNCDeveloper/wellness_survey/issues/3952
https://github.com/FiNCDeveloper/wellness_survey/pull/3977

<Bug>産業医コンソール / 面談一覧 / 個人詳細・面談メモ / 意見書編集 /
ストレスチェックを実施する直前1ヶ月の労働時間（時間外・休日労働時間を含む）の値がuserの事前アンケートの時間と違う

**** Done [#C] 3951
CLOSED: [2015-12-23 Wed 11:58]
<Bug>産業医管理コンソール：送信した意見書の内容が表示されるPDFに一部反映されていない
https://github.com/FiNCDeveloper/wellness_survey/issues/3951

**** Done [#C] 3945
CLOSED: [2015-12-21 Mon 09:09]
<Bug>産業医コンソール / 面談一覧 / 個人詳細、面談メモ / 面談メモが文字が多すぎると500エラーの表示がでる。(警告はでなかった。)
https://github.com/FiNCDeveloper/wellness_survey/issues/3945

aaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaXaaaaaaaaaX



if @counseling.update(save_note_params)
flash.now[:notice] = I18n.t("operators.industrial_physicians.counselings.personal_detail.success_update")
render :personal_detail
else
flash.now[:notice] = I18n.t("operators.industrial_physicians.counselings.personal_detail.failed_update")
render :personal_detail
end


= render partial: '/users/validation_errors', locals: {instance: @counseling}

**** Done [#C] 3956
CLOSED: [2015-12-18 Fri 19:12]
<修正依頼>産業医・保健師管理コンソール / 面談一覧 / 個人詳細・面談メモ / [事前ヒアリング結果]という文言を[事前アンケート]に変更

https://github.com/FiNCDeveloper/wellness_survey/issues/3956

**** Done [#C] 3946
CLOSED: [2015-12-23 Wed 11:59]
<Bug>産業医管理コンソール：各プルダウンメニューのデフォルト値が空でない
https://github.com/FiNCDeveloper/wellness_survey/issues/3946
https://github.com/FiNCDeveloper/wellness_survey/issues/3944

**** Todo [#C]  3944 / 3942
<Bug>産業医管理コンソール：入力必須項目"その他のストレス要因となる勤務状況の値"が入力できていなくても保存できる

https://github.com/FiNCDeveloper/wellness_survey/issues/3944


***** 回答 [2015-12-17 Thu]
@Satoshi-Numasawa 確認ありがとうございます。2点お願いします。
外部参照について

[その他のストレス要因となる勤務状況] は、CounselingHearing の

「ストレスの要因とないうる職場の人間関係や（前回検査した場合）業務・役割の変化があれば教えてください。」を参照いただきたいです。
- [医師の所属先] は、IndustrialPhysicianWorkPlace より　参照で問題ありません。（前回から変更なし）
意見書送信時の必須か否かについて

送信時、他modelの必須データの確認を考慮しておりませんでした。対応致します。

お願いします。

尚、上述の二点ですが。

[その他のストレス要因となる勤務状況]　>　必須
[医師の所属先] >任意　こちらは仕様を訂正します。入力必須ではないので。

以下、「ストレスの要因とないうる職場の人間関係や（前回検査した場合）業務・役割の変化があれば教えてください。」　の項目です。

***** 確認内容 [2015-12-17 Thu]
https://github.com/FiNCDeveloper/wellness_survey/issues/3944
https://github.com/FiNCDeveloper/wellness_survey/issues/3942 の内容を含めて記載させていただきます。


## 状況
以下2項目のデータが無い場合において、意見書の保存が可能。双方ともに、外部modelへのデータ参照を前提とする
- [その他のストレス要因となる勤務状況] は、CounselingHearing より
- [医師の所属先] は、IndustrialPhysicianWorkPlace より

## 確認点

### 意見書の保存
- 意見書 [作成・編集]
    - 可で良いか? (意見書作成後、当該2項目は他機能において編集可 / 必ずデータが存在する と仮定)
    - 不可とする場合、画面遷移不可とするか?
- [その他のストレス要因となる勤務状況] について
    - 必須項目であれば、当該modelにてvalid checkが望ましいと考える。
        - 当対応を実施する場合、機能担当者への依頼が必要か?
- [医師の所属先]
    - x > 0と想定してよいか?

### 送信処理について (必須対応)
送信時、他modelの必須データの確認を考慮しておりませんでした。対応致します。

**** Done [#D] 3942
CLOSED: [2016-03-30 Wed 10:50]
<Bug>産業医コンソール：必須項目：医師の所属先が空で保存ができる
https://github.com/FiNCDeveloper/wellness_survey/issues/3942
@Satoshi-Numasawa 医療機関は任意としてください。こちら仕様というか要件を訂正いたします。
CC. @NaotoOta

参考
https://docs.google.com/spreadsheets/d/1iRUEfS4SBiLendIaqg4E-pNQOGXbUEL8scbknTcCc6g/edit#gid=1525121193

**** Done [#D] 3947
CLOSED: [2015-12-23 Wed 12:02]
<Bug>チェックボックスにチェックをつけなくても、テキスト入力ができる
https://github.com/FiNCDeveloper/wellness_survey/issues/3947

**** Done [#D] 3953
CLOSED: [2015-12-23 Wed 12:03]
産業医コンソール / 面談一覧 / 個人詳細・面談メモ / 意見書編集 / 心理的な負担の状況及び心身の状況において初見なしでもテキストを打ち込むことができる
https://github.com/FiNCDeveloper/wellness_survey/issues/3953

**** Done [#D] 3932
CLOSED: [2015-12-21 Mon 15:28]
<Bug>産業医管理コンソール：個人詳細・面談メモ 項目の文言修正 SKYPE
https://github.com/FiNCDeveloper/wellness_survey/issues/3932

**** Done [#D] 3938
CLOSED: [2015-12-24 Thu 10:00]
<Bug>産業医管理画面: 文言修正依頼(正："就業状況や職場環境の改善に関する意見")
https://github.com/FiNCDeveloper/wellness_survey/issues/3938

com/FiNCDeveloper/wellness_survey/issues/3938 確認中
PDFの文言も変更が必要そう

**** Done [#D] 3943
CLOSED: [2015-12-25 Fri 15:52]

***** Todo やり直し
https://github.com/FiNCDeveloper/wellness_survey/pull/4032

- 共通部ならmoduleに切り出すとの事
  やり方がわからないので確認が必要。
- そもそも、完全に共通ではないので、別個にかけばいいんじゃないか?

***** Done 本文はdone
<Bug>産業医管理コンソール：意見書編集画面で入力値が枠外にはみ出ている
https://github.com/FiNCDeveloper/wellness_survey/issues/3943

*** second
**** Done #4109
CLOSED: [2015-12-25 Fri 18:11]
個人詳細・面談メモ / skypeを起動するリンクの文字を14pxにする
https://github.com/FiNCDeveloper/wellness_survey/issues/4109

**** Done #4108
CLOSED: [2015-12-25 Fri 18:11]
個人詳細・面談メモ / 面談メモに入力される文字を14pxにする
https://github.com/FiNCDeveloper/wellness_survey/issues/4108

**** Done #4047
CLOSED: [2016-03-30 Wed 10:50]
意見書: stress_reaction_note がnot: nullだがdefault値がないとエラーが出る
https://github.com/FiNCDeveloper/wellness_survey/issues/4047

* Done 動作確認                                               :organic_style:
CLOSED: [2015-11-03 Tue 17:20]
Added: [2015-10-15 Thu 14:46]

*** やること
**** 機能一覧の動作確認、実装状態の確認、バグ出し
**** user case?
**** scenario?
**** 画面遷移図?
*** use case
**** 商品を購入する (クレジット)
- [ ] ユーザーは、商品詳細から購入ボタンをクリックする
- [ ] ユーザーは、購入画面に注文者情報を入力する(ログイン状態であれば、アカウント情報表示)
- [ ] ユーザーは、支払方法を選択する
- [ ] ユーザーは、クレジットカード払いを選択した場合、クレジットカード情報を入力する
- [ ] ユーザーは、購入ボタンをクリックする
- [ ] ユーザーは、購入完了画面からマイページに移動する(動画購入以外)
- [ ] ユーザーは、購入完了画面から動画閲覧ページに移動する(動画購入の場合)

**** 商品を購入する (銀行振り込み)
- [ ] ユーザーは、商品詳細から購入ボタンをクリックする
- [ ] ユーザーは、購入画面に注文者情報を入力する(ログイン状態であれば、アカウント情報表示)
- [ ] ユーザーは、支払方法を選択する
- [ ] ユーザーは、銀行振り込みを選択する
- [ ] ユーザーは、購入ボタンをクリックする
- [ ] ユーザーは、購入完了画面からマイページに移動する
- [ ] ユーザーは、振込案内メールを確認し、指定口座に代金を支払う

**** 購入動画を見る
- [ ] ユーザーは、マイページにログインする
- [ ] ユーザーは、閲覧したい動画を選択する
- [ ] ユーザーは、動画閲覧ページから動画を閲覧する
- [ ] ユーザーは、動画閲覧ページから関連動画を選択し、閲覧することができる

**** スクール動画を見る
- [ ] ユーザーは、マイページにログインする
- [ ] ユーザーは、受講するスクールを選択する
- [ ] ユーザーは、スクールページからス閲覧したい動画を選択する
- [ ] ユーザーは、動画閲覧ページから動画を閲覧する
- [ ] ユーザーは、動画閲覧ページからスクールの関連動画を選択し、閲覧することができる

**** スクール欠席連絡をする
- [ ] ユーザーは、マイページにログインする
- [ ] ユーザーは、欠席するスクールを選択する
- [ ] ユーザーは、スクールページから欠席するスクールを選択し、欠席対応を選択する

**** 購入履歴を見る
- [ ] ユーザーは、マイページにログインする
- [ ] ユーザーは、購入履歴をクリックする
- [ ] ユーザーは、注文の履歴を検索する
- [ ] ユーザーは、注文履歴から領収書(銀振3万円以上除く)出力と、商品評価ができる

**** 問い合わせをする
- [ ] ユーザーは、マイページにログインする
- [ ] ユーザーは、問合せ内容を選択して、問合せ内容を記載し、送信ボタンをクリックする
- [ ] ユーザーは、まなつく事務局からの問い合わせ回答をメールで確認する

*** 各機能の詳細の確認資料
https://drive.google.com/drive/folders/0B32RFNW_xx8eRExkMkZ3MUNQcFk

実際どの画面をみればいいのやら?

- まなつく要件定義書 : 79page以降から
- まなつく残機能    : user各種
* Done 個人情報のマスク対応                                   :organic_style:
CLOSED: [2015-10-26 Mon 00:06]
Added: [2015-10-21 Wed 12:45]
*** Done 1. 講師機能：「顧客一覧」へのリンクを削除
CLOSED: [2015-10-21 Wed 14:17]
- 講師TOPの左サイドメニュー「顧客一覧」リンクを削除する。

*** Done 2. 講師機能：「注文・売上一覧」の検索条件から以下の項目を削除（Model Controllerの対応も必要かも）
SCHEDULED: <2015-10-23 Fri> CLOSED: [2015-10-25 Sun 23:36]
- 顧客名
- 顧客名(カナ)
- 電話番号(先頭一致)
- メールアドレス(先頭一致)

*** Done 3. 講師機能：「注文・売上一覧」の一覧から以下の項目を削除
CLOSED: [2015-10-21 Wed 14:17]
- 顧客名

*** Done 4. 講師機能：「入金一覧」の注文・売上一覧から以下の項目を削除
CLOSED: [2015-10-21 Wed 14:16]
- 顧客名

*** Done 5. 講師機能：「注文・売上一覧」のExcelダウンロードの項目から削除
CLOSED: [2015-10-21 Wed 14:16]
- 顧客名

*** Done 6. ユーザー購入時（注文時）に講師にメールが送信されることにより、購入したユーザーのメールアドレス、氏名が講師に伝わる。
SCHEDULED: <2015-10-23 Fri> CLOSED: [2015-10-25 Sun 23:36]

講師にメールを送信しない様にする。（購入時以外のメール送信の修正も必要。修正対象はソースから調査する）

- [ ] : まずは動作確認
- [ ] : 送信タイミング調査
- [ ] : 修正

* Done 文言変更                                                      :uniqlo:
SCHEDULED: <2015-10-27 Tue> CLOSED: [2015-10-27 Tue 14:25]

*** Done 要件確認
SCHEDULED: <2015-10-26 Mon> CLOSED: [2015-10-26 Mon 15:07]

**** メール
柴田様

お世話になっております。
ソーシャルインフルエンサー登録フォーム(https://lifewear.uniqlo.com/form/jp/)の、
注意事項の文言を変更して頂きたくご連絡差し上げました。
＜ご確認下さい＞部分の文言を下記に変更をお願い致します。

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
＜ご確認下さい＞

・ユニクロは、お客様が各ソーシャルメディアサイトに投稿されたユニクロ商品 の着用画像（静止画・動画を含みます。）を、ユニクロのWEBサイト、SNS、店頭販促物、その他ユニクロの制作する広告に使用することができます。
・お客様の肖像権及び著作権はお客様ご本人に帰属しますが、本フォームの送信 によるインフルエンサ―登録をもって、お客様からユニクロに対し、お客様のユニクロ商品の着用画像を、全世界において非独占的に 使用（複製・公開・送信・頒布・貸与・翻訳・翻案を含みます。）する権利を無期限かつ無償で許諾されたものとします。
・下記に該当するユニクロ商品の着用画像の投稿はお控えください。
-　他人に迷惑、不利益、損害または不快感を与えるもの
-　他人を誹謗中傷し、またはその名誉若しくは信用を毀損するもの
-　他人の著作権その他の知的財産権を侵害するもの
-　他人の財産、プライバシー若しくは肖像権を侵害するもの
-　公共良俗に反するもの

・インフルエンサ―登録後、お客様の貴重な声をユニクロ商品の開発やサービスの向上に活かすため、また、ユニクロ商品をより多くの皆様に知っていただくために、ユニクロからお客様に対して、特別なご依頼をすることや未
公表のユニクロ商品の企画・開発・製造・販売等に関する情報、その他技術上または営業上の情報をお知らせすることがあります。
つきましては、インフルエンサー登録された事実、インフルエンサー登録を通じて知られた上記の情報につき、ユニクロの許可なくいかなる方法でも開示・漏洩・使用されないようお願いいたします。



上記に同意します。登録内容を確認する
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

**** 変更点
以下、全て
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
＜ご確認下さい＞

・ユニクロは、お客様が各ソーシャルメディアサイトに投稿されたユニクロ商品の着用画像（静止画・動画を含みます。）を、ユニクロのWEBサイト、SNS、店頭販促物、その他ユニクロの制作する広告に使用することができます。
・お客様の肖像権及び著作権はお客様ご本人に帰属しますが、本フォームの送信によるインフルエンサ―登録をもって、お客様からユニクロに対し、お客様のユニクロ商品の着用画像を、全世界において非独占的に使用（複製・公開・送信・頒布・貸与・翻訳・翻案を含みます。）する権利を無期限かつ無償で許諾されたものとします。
・下記に該当するユニクロ商品の着用画像の投稿はお控えください。
-　他人に迷惑、不利益、損害または不快感を与えるもの
-　他人を誹謗中傷し、またはその名誉若しくは信用を毀損するもの
-　他人の著作権その他の知的財産権を侵害するもの
-　他人の財産、プライバシー若しくは肖像権を侵害するもの
-　公共良俗に反するもの

・インフルエンサ―登録後、お客様の貴重な声をユニクロ商品の開発やサービスの向上に活かすため、また、ユニクロ商品をより多くの皆様に知っていただくために、ユニクロからお客様に対して、特別なご依頼をすることや未公表のユニクロ商品の企画・開発・製造・販売等に関する情報、その他技術上または営業上の情報をお知らせすることがあります。
　つきましては、インフルエンサー登録された事実、インフルエンサー登録を通じて知られた上記の情報につき、ユニクロの許可なくいかなる方法でも開示・漏洩・使用されないようお願いいたします。

上記に同意します。登録内容を確認する
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

*** Done 文言変更
SCHEDULED: <2015-10-26 Mon> CLOSED: [2015-10-26 Mon 15:07]
*** Done 多言語のファイル修正
CLOSED: [2015-10-26 Mon 15:07]
*** Done Rspec
SCHEDULED: <2015-10-26 Mon> CLOSED: [2015-10-26 Mon 21:04]
*** Done gitlabへ対応 | ssh key
SCHEDULED: <2015-10-26 Mon> CLOSED: [2015-10-27 Tue 14:25]
- [X] edit       : source

- [100%] upload & edit config: dev
      - [X] hashtag
      - [X] hashtag-main
      - [X] hashtag-crontab
- [100%] upload & edit config: stg
      - [X] hashtag
      - [X] hashtag-main
      - [X] hashtag-crontab
- [66%] upload & edit config: stg
      - [X] hashtag
      - [ ] hashtag-main
      - [X] hashtag-crontab

**** ssh config
Host git.ruby-dev.jp
    Hostname       git.ruby-dev.jp
    IdentityFile   /home/mruby/.ssh/gitlab
    TCPKeepAlive   yes
    IdentitiesOnly yes

**** key name
gitlab
*** Done merge to release and master
SCHEDULED: <2015-10-26 Mon> CLOSED: [2015-10-26 Mon 21:04]

- [X] merge request to release
- [X] merge request to master

*** Done backup repo dir
CLOSED: [2015-10-27 Tue 14:25]
- [X] edit : source

- [100%] upload & edit config: dev
      - [X] hashtag
      - [X] hashtag-main
      - [X] hashtag-crontab
- [100%] upload & edit config: stg
      - [X] hashtag
      - [X] hashtag-main
      - [X] hashtag-crontab
- [66%] upload & edit config: prd
      - [X] hashtag
      - [ ] hashtag-main
      - [X] hashtag-crontab

*** Done deploy to dev
CLOSED: [2015-10-26 Mon 21:04]
*** Done AMI remake
SCHEDULED: <2015-10-26 Mon> CLOSED: [2015-10-26 Mon 21:09]

- [X] : admin
- [X] : user
- [X] : sns

*** Done deploy to staging
SCHEDULED: <2015-10-26 Mon> CLOSED: [2015-10-26 Mon 21:04]
*** Done deploy to production
SCHEDULED: <2015-10-27 Tue> CLOSED: [2015-10-27 Tue 14:25]

* Done クーポン割引対応 - customer                            :organic_style:
CLOSED: [2015-11-03 Tue 17:21]
*** Done [#A] coding 購入画面 クーポン
SCHEDULED: <2015-11-01 Sun> CLOSED: [2015-11-02 Mon 09:20]

*** Done [#A] coding : メールクーポン
SCHEDULED: <2015-11-01 Sun> CLOSED: [2015-11-01 Sun 15:38]
ユーザーに送信されるメールの「ご購入金額」をクーポン割引適用後の金額に変更する。

対象のメール:

- 銀行振込で購入した場合の注文完了通知メール
- 銀行振込確認後の視聴可能案内メール
- クレジットカードで購入した場合の注文完了通知メール

* Done ruby-webpage                                                 :insider:
CLOSED: [2015-11-11 Wed 14:01]
CLOCK: [2015-10-07 Wed 10:30]--[2015-10-07 Wed 11:50] =>  1:20
Added: [2015-07-24 Fri 21:47]

多重管理はやめよう。

Added: [2015-09-30 Wed 16:08]
HP、formに必要ではないか?

https://www.ntt.com/ask/pub/inq/jp5351_06
http://www.taiyoseiki.co.jp/contact/
http://www.taiyoseiki.co.jp/privacy/
https://www.hoppy-happy.com/info/toiawase/inquity_site/main.php

*** memo
**** opsworks
- [ ] htpasswd : 自動生成されない. そもそも、passwordを含むfileををgithubにあげていいのか?
- [ ] postgres : 設定file用作成

**** 個人情報保護

*** Releaseについて
**** PC版単独で公開する理由
- 問い合わせページの公開したい（Railsアプリとして）
- 仙台の事務所の情報を変更したい

**** 懸念点
- SEO対策で、モバイルも一緒に提供しないと下がる可能性があり
- ホームページを２つのドメインで、別々にリリースするとSEO rankが低下する可能性がある。

**** 理想
- 8/31にモバイルとPC版を一緒にリリースする。
- mruby.jpドメイン管理を行う。(mail設定、Redirect設定などを行うため)
- Googleのサイト移行の手順を踏む
- https接続対応 (証明書取得に、admin@ruby-dev.jpなどで受信できる必要がある?)

*** todos
**** Done [62%]メール設定
DEADLINE: <2015-10-05 Mon> CLOSED: [2015-10-09 Fri 15:06]
# 最終形態としては、ruby-dev.jpで運用
# mruby.jpも残す
# mruby.jp宛は、ruby-dev.jpで受信出来るよう設定する

- [X] : 初期設定 (柴田氏、佐藤氏、沼沢)
- [X] : domain紐付け(mruby-dev.jp)
- [X] : アカウント設定 (ruby-dev.jp / gmailアカウント発行)
- [X] : mxレコード設定 (rub-dev.jp / gmailへ向ける)

- [ ] : アカウント設定 (mruby.jp / 柴田さん)
- [ ] : mxレコード設定 (mruby.jp / )
        移行タイミング? 移行期間があるので、1,2日は余裕をもって

mxレコード設定の手順、意味など確認していない

**** Todo [#C] server log, resouce, 死活監視など方針を考える

***** log
- log保存期間
- log保存場所 (自己server? fluentdで他serverへ?)

***** HDD
- HDD容量試算
- logでの消費量
- 他の消費項目は
- 現状、DBは未使用?

***** 死活監視
- 運用フェイズでの確認手順
- zabbix適用
- cloudwatchで対応できそう

***** mail
監視通知用のメーリングリスト作成

***** open port調査
22, 80, 442のみ
ssh port閉じるか?
jump gate経由という事で

**** Done [#A] 外部リンク修正
DEADLINE: <2015-10-06 Tue> CLOSED: [2015-10-22 Thu 12:07]

まずは共有

----------------------------------------------------------------
以下、全て一部ページの抜粋。
複数ヶ所の修正が必要かもしれない。

また、営業系のなんらかのサイトに登録している場合、
不明な場合もある。こちらは、営業の方々に確認が必要。


- github
    https://github.com/Ruby-Corporation
    // 登録がmrubyのまま

- 福岡Ruby・コンテンツビジネス振興会議
    http://www.digitalfukuoka.jp/members?locale=ja
    // member企業として登録有り

- 産業雇用安定センター
    http://www.sangyokoyo.or.jp/cgi-bin/sanjo/sanjo_02.cgi?p=13&c=all
    // 賛助会員事業所一覧に乗っている

- 宮城県ICT企業データベース
    http://misadb.jp/detail/index/id/170/
    // URLは見えないが、URL登録済みであれば要修正

- wantedly
    https://www.wantedly.com/companies/mruby/info
    // 大須賀さんの名前で登録あり

- Qlear求人
    http://qlear.jp/job_M000026756.html

- imitsu
    http://imitsu.jp/matome/4013211264867804

**** Done [0%] SEO対策
CLOSED: [2015-10-22 Thu 12:07]
佐藤氏検討中
[[*domain%20schedule][domain schedule]]

- [ ] : 他に有るか?

- [ ] : description meta tag
- [25%] : redirect設定
    - [ ] : www.ruby-dev.jpと同一serverへredirect設定を導入
    - [ ] : 手作業面倒なので、scriptを書こう
    - [ ] : SSL設定
    - [X] : Basic認証
    - [ ] : 旧pageから新pageへredirect。
            移動しましたHPは噛まない。即redirect。
            佐藤氏がmapping作成済み。
    - [ ] : 旧name server設定はしばらく残す
            2ヶ月くらいで削除するか?
**** Todo [#B] [66%] https
https://docs.aws.amazon.com/ja_jp/opsworks/latest/userguide/workingsecurity-ssl.html

- [X] : https証明書取得 (ruby-dev.jpで取得)
- [X] : serverへ設定
        http://docs.aws.amazon.com/ja_jp/opsworks/latest/userguide/workingsecurity-ssl.html#d0e20796

        - [X] : SSL Certificate box
          CRT / サーバー証明書

        - [X] : SSL Certificate Key box
          pem / private key

        - SSL certificates of Certification Authorities
          nginxの場合は空にする。
          証明書チェーンファイルがある場合は、その内容をパブリックキー証明書ファイルに追加する必要がある。

- [X] owncloud
- [X] jenkins
- [ ] gitlab

**** Done [#A] opsworks | 個人的にやろう
CLOSED: [2016-09-13 Tue 19:18]
***** 構築
- [ ] : 全体像の把握、図示するか?
- [-] : postgress
    - [X] : password設定 (jenkins上に設定)
    - [X] : 不具合改善 (reposoitory消えていたので、yumでinstall)

- [ ] : basic認証 (productionでは不要)
- [ ] : server監視設定
        [[*%20A%20server][server監視設定]]

**** Done [#A] おおまかなsite移行手順
SCHEDULED: <2015-09-15 Tue> CLOSED: [2015-09-18 Fri 19:38]
Added: [2015-09-14 Mon 09:32]

まずは必要な事を考えよう

- 開発終了 ([2015-09-18 Fri]午後予定)
- consoleで移行設定
- redirect
- robots.text
- sitemap送信 (旧と新で)

**** Done [#A] google search console site登録
SCHEDULED: <2015-09-18 Fri> CLOSED: [2015-09-18 Fri 19:38]
ruby-dev.jpの登録状態確認
既に登録してあるとの認識だが

**** Done [#A] 移行申請考察
SCHEDULED: <2015-09-18 Fri> CLOSED: [2015-09-18 Fri 19:39]

***** 佐藤氏の手順
- googleの手順に従い、site移行設定をする

- robots.txt
  恐らく、新旧の設定が必要だろう

- search consoleの設定

- 元のサイトと移転先のサイトの両方の所有者であることを確認する

- URL mapping準備
    - 元のサイトと移転先のサイトのURLマップを作成する
    - 全URLの詳細情報を更新する
    - モバイル用ページのアノテーションを更新する
      https://developers.google.com/webmasters/mobile-sites/mobile-seo/configurations/separate-urls?hl=ja
    - 301リダイレクトを準備する

- サイト移転を開始する
    - 元のサイトの’robot.txt’の全てのディレクティブを削除する

    - 移転先のサイトの’robot.txt’で全てのファイルのクロールが許可されていることを確認する。
      画像やCSSやJavaScriptなどのアセットのクロールも許可する。

    - Search Consoleで、元のサイトのアドレス変更の通知を送信する

    - URLマッピングに基いて、元のサイトから移転先のサイトにユーザーとGoogle Botをリダイレクトするように設定する
      (DNSのAレコードを更新する。TTLは事前に短く設定しておく)

    - 移転先のサイトについて、この前の手順で用意した元のURLと新しいURLを含む２つのサイトマップを送信する

    - リダイレクト期間はなるべく長く設定する

- traffic監視

***** 手順考察
以下、アドレス移転手順を参考
https://support.google.com/webmasters/answer/83106?hl=ja

以下、移行前の手順
https://support.google.com/webmasters/answer/6033085?hl=ja&ref_topic=6033084&vid=1-635781345444248696-4225115238

****** アドレス変更ツールの使用
https://support.google.com/webmasters/answer/83106?hl=ja

まずは、実際のコンテンツの移転を完了する
https://support.google.com/webmasters/answer/6033049

上記、ガイドラインを全て完了後、アドレス変更変更リクエストを行う。
// 最初に 301 リダイレクト ディレクティブを設定しないと、アドレス変更リクエストは正しく機能しません。

****** Done Search Console を使用して新しいサイトを追加し、確認
CLOSED: [2015-09-18 Fri 13:08]
アドレス変更リクエストを送信するための最初の手順として、リストから新しいサイトを選択します。
これで、Search Console でサイトが認識されるようになります。

******* [100%] 確認手順
https://support.google.com/webmasters/answer/34592

- [X] : Google アカウントで Google Search Console にログインします。
- [X] : [サイトを追加] ボタンをクリックし、追加するサイトの URL を入力します。「http://www.example.com/」のように、完全な URL を入力してください。
- [X] : [続行] をクリックします。[サイトを確認] ページが表示されます。
- [X] : （省略可）[名前] ボックスにサイトの名前（「個人ブログ」など）を入力します。
- [X] : 確認方法を選択し、表示される手順を行います。

******* Done 既に登録済み
CLOSED: [2015-09-18 Fri 13:09]
mruby.jp / ruby-dev.jp共にsiteに登録されていた
****** Done サイト移行手順
CLOSED: [2015-09-18 Fri 19:10]
https://support.google.com/webmasters/answer/6033049?vid=1-635757446071787350-2323610833

******* 大筋の手順
- 新しいサイトを準備して、全体をテストします。
- 現在の URL から対応する新しい形式への URL マッピングを準備します。
- 元の URL から新しい URL にリダイレクトするようサーバーを設定して、サイト移転を開始します。
- 元の URL と新しい URL 両方のトラフィックを監視します。

******* 新しいサイト : 準備して、全体をテスト
******** Done 新しいサイトの robots.txt を設定する
CLOSED: [2015-09-18 Fri 13:15]
全てにアクセスできるように。
クロールされたくない部分は、設定
sitemapのurlを記述

- Search Console の設定が適切か確認する

******** Done 削除または結合されたコンテンツについてエラーを表示する
CLOSED: [2015-09-18 Fri 13:16]
対象無し
******** Done Search Console の設定が適切か確認する
CLOSED: [2015-09-18 Fri 13:23]
全て https://www.ruby-dev.jp へ集約されるので、okと思うが

******** Done Search Console の設定を確認する
CLOSED: [2015-09-18 Fri 13:31]
- URL パラメータ
- Done 地域ターゲットの設定
- Done クロール速度
- Done 否認済みのバックリンク
  恐らくしてないだろう
******** Done 最近購入したドメインに問題がないかを確認する
******** Done ウェブ解析を使用する
******** Done ウェブ解析を使用する
CLOSED: [2015-09-18 Fri 13:39]
よくわからん
mruby.jp    : 無し
ruby-dev.jp : google analyticsを入れている
******* Done URL mappingの準備
CLOSED: [2015-09-18 Fri 17:34]
マッピングと新しいサイトの準備ができたら、次はマッピングで指定した元の URL から新しい URL への
HTTP 301 リダイレクトをサーバーにセットアップします。

******** Done 現行の URL を特定する
CLOSED: [2015-09-18 Fri 13:40]
現状のURLを網羅的に確認する

******** Done 元の URL から新しい URL へのマッピングを作成する
CLOSED: [2015-09-18 Fri 13:46]
元の URL のリストを用意したら、各 URL をどの URL にリダイレクトするかを決めます。
マッピングの保存方法は、お使いのサーバーやサイト移転の内容によって異なります。
データベースを使用する方法や、共通のリダイレクト パターンについてシステムに何らかの URL 書き換えルールを設定する方法もあります。

******** Done 全 URL の詳細情報を更新する
CLOSED: [2015-09-18 Fri 13:49]

******** Done 301 リダイレクトの準備を行う
CLOSED: [2015-09-18 Fri 17:32]

******* Done サイト移転を開始する
CLOSED: [2015-09-18 Fri 19:10]
******** Done サイトの移動を開始する
CLOSED: [2015-09-18 Fri 17:39]
- robots.txt ok
- Search Console で、元のサイトのアドレス変更の通知を送信します。
- 移転先のサイトについて、この前の手順で用意した元の URL と新しい URL を含む 2 つのサイトマップを送信します。
  恐らく、2URLでsitemap送信を改めて行えば良いと思われる。

******** 外部からのリンクを更新する
******* Search Console を使用してトラフィックを監視する

****** Done アドレス変更をリクエスト
CLOSED: [2015-09-18 Fri 19:39]
サイトの移転によってドメインまたはサブドメインに変更が生じた場合
（たとえば http://fish.example-petstore.com から http://example.com または http://example-petstore.com に変更した場合）は、アドレス変更ツールを使用します。
注: アドレス変更ツールは、現在、サブドメイン名の変更、プロトコルの変更（HTTP から HTTPS への変更）、パスのみの変更によるサイト移転には対応していません。

******* [75%] : 手順
- [X] : Search Console のホームページで、移転するサイトをクリックします。
- [X] : 歯車のアイコンをクリックし、[アドレスの変更] をクリックします。
- [X] : サイトアドレス変更ツールに表示された手順を行います。
- [ ] : URL の変更を伴うサイト移転の説明に沿ってトラフィックを監視します。
      https://support.google.com/webmasters/answer/6033088


***** 参考資料
- アドレス変更ツールの使用方法
  https://support.google.com/webmasters/answer/83106?hl=ja

- 作業手順書
  https://docs.google.com/document/d/1ej7ZLwfAd7eM0vxL4xznhX2auBf7cTmwRav72XI_hU4/edit

***** search console site
https://www.google.com/webmasters/tools/home?hl=ja&authuser=0

**** Done [#A] redirect                                        :ruby-webage:
SCHEDULED: <2015-09-14 Mon> CLOSED: [2015-09-18 Fri 17:45]
Added: [2015-09-11 Fri 23:01]

***** todos
****** Done 末尾に/が余分に入る
CLOSED: [2015-10-06 Tue 13:43]
デグレ対応
本番移行前に

入らなかった。
再確認

****** Done sitemap.xml / robots.txt
SCHEDULED: <2015-09-18 Fri> CLOSED: [2015-09-18 Fri 17:33]
へアクセスした際に、redirectしないように設定

****** Done redirect test
SCHEDULED: <2015-09-18 Fri> CLOSED: [2015-09-18 Fri 17:34]

- 再確認
- 忘れずに。
- 全パータン手動確認
-
***** git release手順
masterからbranch
masterへmerge
release branchへ取り込み

***** base
|---+----------------------------------------------+--------------------------|
|   | /                                            | /                        |
|   | /work/work.php                               | /business                |
|   | /corporate_profile/company.php               | /company                 |
|   | /employment/employment.php                   | /recruiting              |
|   | /on_Rails/engineer_recruitment.php           | /recruiting_rails        |
|   | /engineer_recruitment/engineer.php           | /partner_offer           |
|   | /qualification_support/qualifications.php    | /qualification_support   |
|   | /ask/ask.php                                 | /contact                 |
|   | /sitemap/sitemap.php                         | /sitemap                 |
|   | /policy/policy.php                           | /policy                  |
|   | /staff/staff.php                             | /staff                   |
|   | /links/ruby_info.php                         | /ruby_info               |
|   | /sp/                                         | /m/                      |
|   | /sp/work/work.php                            | /m/business              |
|   | /sp/corporate_profile/company.php            | /m/company               |
|   | /sp/employment/employment.php                | /m/recruiting            |
|   | /sp/on_Rails/engineer_recruitment.php        | /m/racruiting_rails      |
|   | /sp/engineer_recruitment/engineer.php        | /m/partner_offer         |
|   | /sp/qualification_support/qualifications.php | /m/qualification_support |
|   | /sp/ask/ask.php                              | /m/contact               |
|   | /sp/sitemap/sitemap.php                      | /m/sitemap               |
|   | /sp/policy/policy.php                        | /m/policy                |
|   | /sp/staff/staff.php                          | /m/staff                 |
|   | /sp/links/ruby_info.php                      | /m/ruby_info             |
|---+----------------------------------------------+--------------------------|


|-----------------------------------------------------------------|
| http://stg.mruby.jp/                                            |
| http://stg.mruby.jp/work/work.php                               |
| http://stg.mruby.jp/corporate_profile/company.php               |
| http://stg.mruby.jp/employment/employment.php                   |
| http://stg.mruby.jp/on_Rails/engineer_recruitment.php           |
| http://stg.mruby.jp/engineer_recruitment/engineer.php           |
| http://stg.mruby.jp/qualification_support/qualifications.php    |
| http://stg.mruby.jp/ask/ask.php                                 |
| http://stg.mruby.jp/sitemap/sitemap.php                         |
| http://stg.mruby.jp/policy/policy.php                           |
| http://stg.mruby.jp/staff/staff.php                             |
| http://stg.mruby.jp/sp/                                         |
| http://stg.mruby.jp/sp/work/work.php                            |
| http://stg.mruby.jp/sp/corporate_profile/company.php            |
| http://stg.mruby.jp/sp/employment/employment.php                |
| http://stg.mruby.jp/sp/on_Rails/engineer_recruitment.php        |
| http://stg.mruby.jp/sp/engineer_recruitment/engineer.php        |
| http://stg.mruby.jp/sp/qualification_support/qualifications.php |
| http://stg.mruby.jp/sp/ask/ask.php                              |
| http://stg.mruby.jp/sp/sitemap/sitemap.php                      |
| http://stg.mruby.jp/sp/policy/policy.php                        |
| http://stg.mruby.jp/sp/staff/staff.php                          |
|-----------------------------------------------------------------|

***** 複数domain
|---+----------------------+-------------------------+
| x | http://mruby.jp      | https://www.ruby-dev.jp |
| x | http://www.mruby.jp  | https://www.ruby-dev.jp |
|---+----------------------+-------------------------+
| x | https://mruby.jp     | https://www.ruby-dev.jp |
| x | https://www.mruby.jp | https://www.ruby-dev.jp |
|---+----------------------+-------------------------+

|---+------------------------+-------------------------|
| x | http://ruby-dev.jp     | https://www.ruby-dev.jp |
| x | http://www.ruby-dev.jp | https://www.ruby-dev.jp |
|---+------------------------+-------------------------|
| x | https://ruby-dev.jp    | https://www.ruby-dev.jp |
|---+------------------------+-------------------------|

**** Done [#A] sitemap.xml / robots.txt
SCHEDULED: <2015-09-18 Fri> CLOSED: [2015-09-18 Fri 19:39]
- stgのdocument rootへ旧sitemapを設置
- 日付を今日に変更

- robots.txtを旧サイトへ設置
    - 全部クロールできるように設定。
    - sitemap urlを中に記述
    - 他はいらないだろう

- chefにどう組み込むか。
  nginx設定変更を、別の方法で解決できればそれで良いか.

**** Done [#A] google search console権限設定
SCHEDULED: <2015-09-18 Fri> CLOSED: [2015-09-18 Fri 19:39]

- 本社開発室全員で、状態確認できるように設定
さっぱりだな

y-shibata@ruby-dev.jp
h-sato@ruby-dev.jp
m-suketa@ruby-dev.jp
m-kubo@ruby-dev.jp

登録済み
確実な返答はまだ無し

**** Done [#A] 残作業
DEADLINE: <2015-09-20 Sun> CLOSED: [2015-09-29 Tue 18:16]

- nginx.conf
  - [X] : stg廃止
  - [X] : ruby.jpへroot追記
  - [X] : sitemap.xml / robots.txtは、redirect対象外

**** Done analytics setting
CLOSED: [2015-09-18 Fri 08:57]

本社開発室全員へ
**** Done [#D] 動作Test
SCHEDULED: <2015-09-14 Mon> CLOSED: [2015-09-29 Tue 18:17]

まずは観点から考えよう

***** Test 結果
****** PC
- 画面遷移後、カルーセルが自動スライドしない (IE11, Firefoxで確認)
- ヘッダー画面崩れ : 1290 x 1080にてwindowを最大化した場合、左上ロゴが敷居線にかぶる。また、右上の電話番号画像が回りこんでずれる。
- ruby_infoのメイン画像と、ヘッダー間の隙間が他ページと異なる

****** Mobile
- 画面遷移後、カルーセルが自動スライドしない (標準ブラウザ, chromeで確認)
- 横幅全てを使っては表示されない。左右に若干の隙間がある。
  軽いindent程度なので問題ないと言えば、問題ない

***** browsers
- [ ] IE9
- [X] IE11
- [ ] safari

- [X] android : 標準
- [ ] android : chrome

***** mruby.jpをIE9で見るとどうなるか?
***** VMとproductionの比較
同browserで、兩サイトへアクセし差異が無いか確認

***** 助田さんの指摘
www.ruby-dev.jpにはfaviconも表示されないし、カルーセルの黒丸も表示されないです。が、Vagrant にIE9からアクセスしたときは表示されています。
まず、本番環境とvagrantで何か違いがありそうです。ただ、Jenkinsの自動デプロイは正常にできています。
@s-numasawa: 本番環境のwebページに正常にdeployされているか確認してもらってもいいでしょうか？Jenkinsで確認した限りでは、今日の11:51に正常にデプロイされています。

**** Done [100%] domain schedule
CLOSED: [2015-08-28 Fri 19:33]
- [X] : mruby.jp移管。先方へ問い合わせ中
- [X] : 返信有り。予定待ち

- [X] : 旧DNS上のrecord setを頂戴する
- [X] : mruby.jpをDomain移管 (お名前.com)
- [X] : 旧DNS serverのrecord setを、route53へ設定


***** 更新 : 遷移表
https://docs.google.com/spreadsheets/d/1ySmCYlzCdIWQRB1cxWZvX4NmTrGMklBg6Ctc8Q0FzWU/edit#gid=0

***** record setなど
https://drive.google.com/drive/u/0/folders/0B2XVswXGgDX7fk1GbzViWVdaVGl1QXdwbnRDWGUtQkwwSHdGLVh2MnRObTAtTUhmcC1lRXM
https://docs.google.com/document/d/1zZjlpI2w4j0oIXa9a_AHuAWKVyeYY_lVhFHCvSZRtBk/edit

**** Done [100%] server setting for production
CLOSED: [2015-09-29 Tue 18:34]
- [X] productionのhttp/httpsアクセス
      httpsに寄せる?
      では懸念点は?

- [X] 旧mail/webserverの扱い
      当分残す。重複期間あり。期間は未確認
      不要となるタイミングは、それぞれ異なる。
      mail -> google appsと運用方法が整い次第?
      web  -> 公開日移行?

- [X] : ruby-dev.jpで新webpage運用

- [X] opsworks 復旧 : postgre
- [X] chef作成 : postgres install

- [X] nginx設定 : chefへ
- [X] SSL
- [X] mail設定 : 送り先は? ruby-dev.jp?
- [X] 公開日にBasic認証を外す (9月末までに公開予定)

- [X] : googleへHP移動申請 (公開後で良い模様。タイミングは?)

*** Done analytics
CLOSED: [2015-09-30 Wed 17:47]
- [ ] : ruby-dev.jp(gmail)で改めて、google analyticsを設定
        コード再作成と埋め込み
*** coding
**** Done 会社概要 mobile
CLOSED: [2015-10-07 Wed 11:12]
-  取引銀行追加（千葉銀行　天王台支店）
-  取引銀行の下に枠追加
    枠名　"その他"、内容　”社内行事・社員紹介ページ” へのリンクを表示
**** Done 会社概要 PC
CLOSED: [2015-10-07 Wed 11:12]
-  取引銀行追加（千葉銀行　天王台支店）
-  取引銀行の下に枠追加
    枠名　"その他"、内容　”社内行事・社員紹介ページ” へのリンクを表示
**** Done パートナー募集mobile
CLOSED: [2015-10-07 Wed 11:50]
”各種事業連携事案”を削除
**** Done パートナー募集PC
CLOSED: [2015-10-07 Wed 11:50]
”各種事業連携事案”を削除
**** Done [#A] 採用ページ
SCHEDULED: <2015-10-02 Fri> CLOSED: [2015-10-02 Fri 15:20]
CLOCK: [2015-10-02 Fri 13:12]--[2015-10-02 Fri 13:21] =>  0:09
CLOCK: [2015-10-01 Thu 15:30]--[2015-10-01 Thu 18:58] =>  3:28

#104592136

***** Done 冒頭の是非を削除
***** Done 上段の画像の、周りの赤い枠を消す。
CLOSED: [2015-10-01 Thu 19:00]
***** Done ページの先頭にある代表からのメッセージリンクを削除する。
***** Done 採用情報を表へ
CLOSED: [2015-10-01 Thu 19:00]
　募集職種　　プロジェクトマネージャー　システムエンジニア　プログラマー

　応募資格　　 ""・""が不要
　　　　　　　専門・短大卒以上
　　　　　　　30 代まで（※但し、必要十分以上のスキルのお持ちの場合は40代も可）

　勤務地　　　本社（秋葉原）、仙台、大阪、福岡及び取引先

　勤務時間　　9:00～18:00（プロジェクトによりフレックスタイム制あり）
　　　　　　　在宅勤務制度あり
　　　　　　　職種、階級により裁量労働制選択可能（出社・退社時間自由）

　給与　　　　月給制または、年俸制
　　　　　　　中途採用の場合　月給24万～52万（月給制）、420万～720万（年俸制）
　　　　　　　新卒の場合　　　月給20万5千円（大卒）

　待遇　　　　昇級年１回、賞与年２回
　　　　　　　交通費全額支給（但し上限４万まで）、各種社会保険
　　　　　　　資格取得時の受験代負担、合格時一時金支給
　　　　　　　社員旅行有（2013年札幌・小樽旅行、2014年トップシーズン秋の京都旅行）

　休日休暇　　完全週休２日制（土日祝）、
　　　　　　　有給休暇、慶弔休暇、育児/介護休暇、産前産後休暇
　　　　　　　夏季休暇、年末年始休暇など

福利厚生の項目も表に含める。

***** Done 福利厚生について
CLOSED: [2015-10-01 Thu 19:00]
字下げが大きすぎる。
１行目と２行目の「・」を無くして左に詰める。全体に一文字左にずらす。

**** Done [#A] 採用ページ SP
SCHEDULED: <2015-10-02 Fri> CLOSED: [2015-10-02 Fri 12:18]

***** 上段画像の、「是非弊社に」→「弊社に」にする
***** 採用情報文言
　募集職種　　プロジェクトマネージャー　システムエンジニア　プログラマー

　応募資格　　 ""・""が不要
　　　　　　　専門・短大卒以上
　　　　　　　30 代まで（※但し、必要十分以上のスキルのお持ちの場合は40代も可）

　勤務地　　　本社（秋葉原）、仙台、大阪、福岡及び取引先

　勤務時間　　9:00～18:00（プロジェクトによりフレックスタイム制あり）
　　　　　　　在宅勤務制度あり
　　　　　　　職種、階級により裁量労働制選択可能（出社・退社時間自由）

　給与　　　　月給制または、年俸制
　　　　　　　中途採用の場合　月給24万～52万（月給制）、420万～720万（年俸制）
　　　　　　　新卒の場合　　　月給20万5千円（大卒）

　待遇　　　　昇級年１回、賞与年２回
　　　　　　　交通費全額支給（但し上限４万まで）、各種社会保険
　　　　　　　資格取得時の受験代負担、合格時一時金支給
　　　　　　　社員旅行有（2013年札幌・小樽旅行、2014年トップシーズン秋の京都旅行）

　休日休暇　　完全週休２日制（土日祝）、
　　　　　　　有給休暇、慶弔休暇、育児/介護休暇、産前産後休暇
　　　　　　　夏季休暇、年末年始休暇など

福利厚生の項目も表に含める。

***** Done 福利厚生について
CLOSED: [2015-10-01 Thu 15:45]
字下げが大きすぎる。
１行目と２行目の「・」を無くして左に詰める。全体に一文字左にずらす。

**** Done [#A] rails採用ページ
SCHEDULED: <2015-10-02 Fri> CLOSED: [2015-10-02 Fri 17:52]
CLOCK: [2015-10-02 Fri 15:10]--[2015-10-02 Fri 15:21] =>  0:11
CLOCK: [2015-10-02 Fri 12:19]--[2015-10-02 Fri 13:10] =>  0:51

採用ページと同様の修正
***** 採用情報を表へ
募集職種はそのまま
福利厚生の項目も表に含める。

----------------------------------------------------------------
　募集職種　　プロジェクトマネージャー　システムエンジニア　プログラマー

　応募資格　　 ""・""が不要
　　　　　　　専門・短大卒以上
　　　　　　　30 代まで（※但し、必要十分以上のスキルのお持ちの場合は40代も可）

　勤務地　　　本社（秋葉原）、仙台、大阪、福岡及び取引先

　勤務時間　　9:00～18:00（プロジェクトによりフレックスタイム制あり）
　　　　　　　在宅勤務制度あり
　　　　　　　職種、階級により裁量労働制選択可能（出社・退社時間自由）

　給与　　　　月給制または、年俸制
　　　　　　　中途採用の場合　月給24万～52万（月給制）、420万～720万（年俸制）
　　　　　　　新卒の場合　　　月給20万5千円（大卒）

　待遇　　　　昇級年１回、賞与年２回
　　　　　　　交通費全額支給（但し上限４万まで）、各種社会保険
　　　　　　　資格取得時の受験代負担、合格時一時金支給
　　　　　　　社員旅行有（2013年札幌・小樽旅行、2014年トップシーズン秋の京都旅行）

　休日休暇　　完全週休２日制（土日祝）、
　　　　　　　有給休暇、慶弔休暇、育児/介護休暇、産前産後休暇
　　　　　　　夏季休暇、年末年始休暇など
----------------------------------------------------------------

***** Done 福利厚生について
CLOSED: [2015-10-01 Thu 15:45]
字下げが大きすぎる。
１行目と２行目の「・」を無くして左に詰める。全体に一文字左にずらす。

**** Done [#A] rails採用ページ SP
SCHEDULED: <2015-10-02 Fri> CLOSED: [2015-10-02 Fri 13:10]
CLOCK: [2015-10-02 Fri 12:01]--[2015-10-02 Fri 12:19] =>  0:18
***** 採用情報文言
募集職種はそのまま
福利厚生の項目も表に含める。

----------------------------------------------------------------
　募集職種　　プロジェクトマネージャー　システムエンジニア　プログラマー

　応募資格　　 ""・""が不要
　　　　　　　専門・短大卒以上
　　　　　　　30 代まで（※但し、必要十分以上のスキルのお持ちの場合は40代も可）

　勤務地　　　本社（秋葉原）、仙台、大阪、福岡及び取引先

　勤務時間　　9:00～18:00（プロジェクトによりフレックスタイム制あり）
　　　　　　　在宅勤務制度あり
　　　　　　　職種、階級により裁量労働制選択可能（出社・退社時間自由）

　給与　　　　月給制または、年俸制
　　　　　　　中途採用の場合　月給24万～52万（月給制）、420万～720万（年俸制）
　　　　　　　新卒の場合　　　月給20万5千円（大卒）

　待遇　　　　昇級年１回、賞与年２回
　　　　　　　交通費全額支給（但し上限４万まで）、各種社会保険
　　　　　　　資格取得時の受験代負担、合格時一時金支給
　　　　　　　社員旅行有（2013年札幌・小樽旅行、2014年トップシーズン秋の京都旅行）

　休日休暇　　完全週休２日制（土日祝）、
　　　　　　　有給休暇、慶弔休暇、育児/介護休暇、産前産後休暇
　　　　　　　夏季休暇、年末年始休暇など
----------------------------------------------------------------

***** Done 福利厚生について
CLOSED: [2015-10-01 Thu 12:54]
字下げが大きすぎる。
１行目と２行目の「・」を無くして左に詰める。全体に一文字左にずらす。

**** Done パートナー募集ページの「お問い合わせフォーム」
CLOSED: [2015-10-01 Thu 09:26]
#104495232

「メールの場合 ⇒お問い合わせフォーム」
を
「お問い合わせフォーム」
のみに修正する。

**** Done お問い合わせで存在しないメールアドレスを入力した場合の対策
CLOSED: [2015-10-01 Thu 10:14]
#104492304

メール送信後の送信完了ページの文言に
「お問い合わせいただいた内容と同じ内容のメールをお客様にも送信しています。
　メールが届かない場合には、再度、お問い合わせください。」
を追加する。

※存在しないメールアドレスに送信しているというエラーメールが返ってくることについての対策はしない。

**** [100%] validate
- [X] : model validate : 配列化できないか?
- [X] : model validate : エラーメッセージ追加
- [X] : cssでmaxlenght規定(不可)。htmlに直接記述
- [X] : rspec : 指定文字数を自動生成できないか?
        できそうだけど、やめ。

**** [66%] ポリシー
- [ ] : responsibe
- [X] : title追加
- [X] : 画像
**** [66%] パートナー募集
- [ ] : responsibe
- [X] : title追加
- [X] : 画像

**** [75%] rails採用情報
https://torchpad.com/workspace/wikis/ruby-webpage/pages/%E4%BB%95%E6%A7%98/%E6%8E%A1%E7%94%A8%E6%83%85%E5%A0%B1

- [X] : story取得

- [X] : slim
    - [X] : html to slim
    - [X] : title

    - [X] : アプリケーション開発のお問い合わせ（お問い合わせポップアップ画面）
    - [X] : 代表からのメッセージ（ページ内リンク）
    - [X] : 福利厚生の外部サイトページへのリンク
    - [X] : 社内行事・社員紹介ページ（社内行事・社員紹介ページ）
    - [X] : Ruby/Ruby on Railsエンジニア職の詳細ページ（Ruby on Rail採用情報ページ）

- [-] : scss
    - [X] : 既存scss構造化
    - [ ] : responsibe? (保留と聞いていた気が)

- [X] : rspec
**** [80%] 採用情報
https://torchpad.com/workspace/wikis/ruby-webpage/pages/%E4%BB%95%E6%A7%98/%E6%8E%A1%E7%94%A8%E6%83%85%E5%A0%B1

- [X] : story取得

- [X] : slim
    - [X] : html to slim
    - [X] : title

    - [X] : アプリケーション開発のお問い合わせ（お問い合わせポップアップ画面）
    - [X] : 代表からのメッセージ（ページ内リンク）
    - [X] : 福利厚生の外部サイトページへのリンク
    - [X] : 社内行事・社員紹介ページ（社内行事・社員紹介ページ）
    - [X] : Ruby/Ruby on Railsエンジニア職の詳細ページ（Ruby on Rail採用情報ページ）

- [-] : scss
    - [X] : 既存scss構造化
    - [ ] : responsibe? (保留と聞いていた気が)

- [X] : rspec
    - [X] : 各種linkがあるか
    - [X] : 文言抜粋
    - [X] : 各種linkが開くか

- [X] : mail link修正
    - [X] : メールリンクを廃止→問い合わせフォームへ統一
    - [X] : spec修正

**** [100%] header / footer / sitemap
- [X] : slim : Link修正 rails採用情報 -> エンジニア採用情報
- [X] : spec : 修正　rails採用情報 -> エンジニア採用情報

- [X] :「採用情報」Linkを、「Railsエンジニア採用情報」へ変更。画面遷移先も、Rails採用情報へ
- [X] :「Ruby on Rails 採用募集」Linkを、「各種エンジニア採用情報」へ変更。画面遷移先を、エンジニア採用情報へ
- [X] : rspec
- [X] : top pageのlink確認
- [X] : wiki更新

**** [100%] mobile top
**** [100%] mobile recruiting_rails
**** [100%] mobile partner

**** [100%]スマホ top page
**** [100%]スマホ 事業案内
**** [100%]contactに文字数制限
**** Done mobile home/linkボタン削除
CLOSED: [2015-09-10 Thu 10:22]
**** Done [#F] PC imageフォルダを一階層に
SCHEDULED: <2015-09-10 Thu> CLOSED: [2015-09-10 Thu 12:39]
**** Done [#F] sitemap.xml
SCHEDULED: <2015-09-10 Thu> CLOSED: [2015-09-10 Thu 12:39]
**** Iam [#D] sitemap.xml - gem化
CLOSED: [2015-10-22 Thu 12:07]
要調査
https://github.com/kjvarga/sitemap_generator
http://qiita.com/tsumekoara/items/0864a082a0cee7bfaf93

* Done reviw                                                  :organic_style:
CLOSED: [2015-11-03 Tue 16:11]
Added:      [2015-11-02 Mon 10:43]

*** Done [#A] Coupon for trainer
SCHEDULED: <2015-11-02 Mon> CLOSED: [2015-11-02 Mon 18:01]
- [x] : review and merge

*** Done [#A] Coupon for organizer
SCHEDULED: <2015-11-02 Mon> CLOSED: [2015-11-03 Tue 16:11]
- [X] : review and merge

*** Done [#A] CRON job (whenever gem) の説明を追加
SCHEDULED: <2015-11-02 Mon> CLOSED: [2015-11-03 Tue 16:11]
https://git.ruby-dev.jp/organicstyle/mana2ku/merge_requests/19#note_364

- [X] review and merge
- [X] deploy時にcronが適用されているか
      list作って反映状況を見るか
* Done AWS RDS update                                                :uniqlo:
SCHEDULED: <2015-11-10 Tue> CLOSED: [2015-11-10 Tue 18:49]
Added:      [2015-11-04 Wed 09:34]

*** memo
**** 期限
11/10

**** mail
以下で検索
Re: Influencer RDS メンテナンスについて

*** Done rdsの更新とは? 止まるの? 調査
CLOSED: [2015-11-09 Mon 16:04]
止まるっぽい

*** Done 実作業準備
CLOSED: [2015-11-09 Mon 16:04]
*** Done メンテナンス時間の調整
CLOSED: [2015-11-09 Mon 16:04]
必要か否かも確認
*** Done 本番適用
SCHEDULED: <2015-11-10 Tue : 13:00-16:00> CLOSED: [2015-11-10 Tue 18:49]

- 14:50 - 13:45 | Ruby開発作業
    - 作業開始通知
    - サービス停止 (admin / sns )
    - DB backup (dumpの量によって時間前後)


- 13:45 〜 15:00 | 先方作業
    - master backup
    - master update / reboot
    - masterでの業完了後、read replica update / reboot

    // DB updateは15〜30分程度掛かると想定


- 15:00 〜 15:30 | Ruby開発作業
    - service 起動
    - service 状態確認
    - 作業終了通知

*** mail
To : ユニクロ 石丸様、林様
Cc : エヌネットワーク 成田様

御世話になっております。
Ruby開発 沼沢です。

これより予定しておりましたメンテナンス作業を、下記タイムテーブルにて開始させて頂きます。

----------------------------------------------------------------
- 13:00 - 13:55 | Ruby開発作業
    - 作業開始通知
    - サービス停止 (admin / sns )
    - DB backup

- 13:55 〜 15:10 | エヌネットワークス様作業
    - master backup
    - master update / reboot
    - masterでの作業完了後、read replica update / reboot

- 15:10 〜 15:40 | Ruby開発作業
    - service 起動
    - service 状態確認
    - 作業終了通知
----------------------------------------------------------------

※ メンテナンス中は、管理画面へのアクセスが不可能となります
※ メンテナンス時間中の数十分間、サービス全体が停止致します。

以上となります。
よろしくお願い申し上げます。

*** 手順 [100%]

- [X] admin stop
- [X] admin batch stop
- [X] sns stop
- [X] sns batch stop

- [X] N社

- [X] admin start
- [X] admin batch start
- [X] sns start
- [X] sns batch start

bundle exec unicorn_rails -c /var/rails/influencer/current/config/unicorn.rb -E production -D
* Done 死活監視導入                                           :organic_style:
SCHEDULED: <2015-11-04 Wed> CLOSED: [2015-11-05 Thu 16:32]
Added:      [2015-11-04 Wed 10:01]

mana2ku : 52.69.235.109
monitor : 54.64.99.154

*** Done munin導入
SCHEDULED: <2015-11-04 Wed> CLOSED: [2015-11-05 Thu 09:32]

- [X] server
      - [X] node IP 52.69.235.109

- [X] node
      - [X] server 54.64.99.154
      - [X] port 4949 / 54.64.99.154/32

- [x] munin-node 自動起動設定

- [X] 情報取得可能か

- [ ] 周りへ展開

*** Done cloudwatch導入
SCHEDULED: <2015-11-04 Wed> CLOSED: [2015-11-05 Thu 09:32]

**** memo
prd instan ide  :  i-85f25e20

**** cloud watch設定方法
**** 料金
- ダッシュボード
    - $3 / month

- 詳細モニタリング
    - $3.5 / instance / month

- カスタムメトリックス
    - $0.5 / metrix / month

- アラーム
    - $0.1 / alarm / month

- cloudwatch API
    - $0.01 GetMetricStatistics、ListMetrics、または PutMetricData のリクエスト 1,000 件あたり

- CloudWatch ログ
    - $0.76 : 取り込み GB あたり**
    - $0.033 : GB あたりのアーカイブ/月***
    - CloudWatch ログのデータ転送送信（アウト） はEC2 料金表ページに掲載されている
      "Amazon EC2 からのデータ転送送信（アウト）" および "Amazon EC2 からインターネットへのデータ転送送信（アウト）" と同じ料金です。
**** Done 監視項目設定
SCHEDULED: <2015-11-04 Wed> CLOSED: [2015-11-05 Thu 09:33]

1分間書く

- [X] AWS
    http://dev.classmethod.jp/cloud/aws/ec2-auto-recovery-feature/

    - [X] instance failed : failed 5min
    - [X] system failed   : failed 5min

- [X] server
    - [X] http  : !(200 ok) 10min
    - [X] cpu   : 90%       10min
    - [X] LA    : 4(1min)   15min
    - [X] mem   : 80%       10min / total mem 1.5Gで、80%(300MB)以下
    - [X] hdd   : 80%       10min
    - [x] puma  : down      5min
    - [x] nginx : down      5min


- [X] RDS | manatsuku-production
    - [X] status : fail : 5min
    - [X] cpu    : 80%  : 10min
    - [X] mem    : 20%  : 10min
    - [X] hdd    : 25%  : 10min  (max 100GB)

- [X] ELB
    - [X] health host  5min

- [X] SNS 登録
    - [X] 沼沢
    - [X] 柴田さん
    - [X] head-office-dev@ruby-dev.jp


**** Done 監視項目設定 正常系
SCHEDULED: <2015-11-04 Wed> CLOSED: [2015-11-05 Thu 16:31]

1分間書く

- [X] AWS
    http://dev.classmethod.jp/cloud/aws/ec2-auto-recovery-feature/

    - [X] instance failed : failed 5min
    - [X] system failed   : failed 5min

- [X] server
    - [X] http  : !(200 ok) 10min
    - [X] cpu   : 90%       10min
    - [X] LA    : 4(1min)   15min
    - [X] mem   : 80%       10min / total mem 1.5Gで、80%(300MB)以下
    - [X] hdd   : 80%       10min
    - [X] puma  : down      5min
    - [X] nginx : down      5min


- [X] RDS | manatsuku-production
    - [X] status : fail : 5min
    - [X] cpu    : 80%  : 10min
    - [X] mem    : 20%  : 10min
    - [X] hdd    : 25%  : 10min  (max 100GB)

- [X] ELB
    - [X] health host  5min

- [ ] SNS 登録
    - [ ] 沼沢
    - [ ] 柴田さん
    - [ ] head-office-dev@ruby-dev.jp

**** Done 監視項目設定 データ不足
SCHEDULED: <2015-11-04 Wed> CLOSED: [2015-11-05 Thu 16:31]


- [X] AWS
    http://dev.classmethod.jp/cloud/aws/ec2-auto-recovery-feature/

    - [X] instance failed : failed 5min
    - [X] system failed   : failed 5min

- [X] server
    - [X] http  : !(200 ok) 10min
    - [X] cpu   : 90%       10min
    - [X] LA    : 4(1min)   15min
    - [X] mem   : 80%       10min / total mem 1.5Gで、80%(300MB)以下
    - [X] hdd   : 80%       10min
    - [X] puma  : down      5min
    - [X] nginx : down      5min


- [-] RDS | manatsuku-production
    - [X] status : fail : 5min
    - [ ] cpu    : 80%  : 10min
    - [ ] mem    : 20%  : 10min
    - [ ] hdd    : 25%  : 10min  (max 100GB)

- [X] ELB
    - [X] health host  5min

* Done Landing page  deploy                                   :organic_style:
SCHEDULED: <2015-11-05 Thu> CLOSED: [2015-11-05 Thu 15:20]
Added:      [2015-11-05 Thu 10:06]

*** Done merge
CLOSED: [2015-11-05 Thu 10:22]
*** Done stg up
CLOSED: [2015-11-05 Thu 10:22]
* Done finc 打ち合わせ
SCHEDULED: <2015-11-09 Mon 10:00> CLOSED: [2015-11-09 Mon 11:24]
Added:      [2015-11-09 Mon 09:57]

よくわからんが何するんだべ
* Done AWS notify
  SCHEDULED: <2015-11-09 Mon> CLOSED: [2015-11-09 Mon 12:15]
Added:      [2015-11-09 Mon 09:58]
メール来ていたのでチェック
* Done revie / merge / deploy
  SCHEDULED: <2015-11-09 Mon> CLOSED: [2015-11-09 Mon 11:24]
Added:      [2015-11-09 Mon 10:30]
ruby-webpage
* Done 仙台meating
  SCHEDULED: <2015-11-09 Mon> CLOSED: [2015-11-12 Thu 21:35]
Added:      [2015-11-09 Mon 12:24]
大須賀さんに返信
* Done Ruby Webpage release                                         :insider:
CLOSED: [2015-12-14 Mon 13:22] DEADLINE: <2015-12-07 Mon>
Added:      [2015-11-10 Tue 10:03]

柴田君

HPですが、

12/6になったら
仙台オフィスの最寄駅を以下にしてください。
（１つ追加する形。地下鉄が12/6から開通するため）

・地下鉄東西線「青葉通一番町駅」から徒歩6分
・JR「仙台駅」から徒歩16分
* Done Ruby Webpage release                                         :insider:
SCHEDULED: <2015-11-10 Tue> CLOSED: [2015-11-10 Tue 18:49]
Added:      [2015-11-10 Tue 10:06]


おはよう。芦田です。

HP TOPページの新着・お知らせが間違ってます。

11/02　仙台オフィスオープン

ではなく

11/02　仙台オフィスフロア増床のため移転しました
* Done 休日出勤、代休入力
  SCHEDULED: <2015-11-10 Tue> CLOSED: [2015-11-10 Tue 18:49]
Added:      [2015-11-10 Tue 10:41]

10月分から

代休 : 沼沢
代出 : 沼沢
休み : 沼沢
* Done 代休申請
  SCHEDULED: <2015-11-11 Wed> CLOSED: [2015-11-11 Wed 14:01]
Added:      [2015-11-11 Wed 10:16]
* Done 休暇申請 の注意点
SCHEDULED: <2015-11-11 Wed> CLOSED: [2015-11-12 Thu 21:35]
Added:      [2015-11-11 Wed 15:37]

社員番号を今後つけて
新フォーマットで
* Done Domain設定
  SCHEDULED: <2015-11-13 Fri> CLOSED: [2015-11-13 Fri 14:20]
Added:      [2015-11-13 Fri 09:21]

- [ ] : info.manatuku.com 削除
- [ ] : 証明書発行後、復旧

info.manatuku.com.
CNAME
organicstyleco.mktoweb.com
* Done 住所変更
SCHEDULED: <2015-11-17 Tue> CLOSED: [2015-11-17 Tue 19:54]
:PROPERTIES:
:ATTACH_DIR_INHERIT: t
:END:
Added:      [2015-11-17 Tue 19:05]


https://www.pivotaltracker.com/n/projects/1446854/stories/108307854



- [X] プライバシーポリシー（２箇所記載があります）
      https://manatuku.com/privacy

- [X] 会社概要
       https://manatuku.com/aboutus

- [X] メールのフッタすべて

- [X] signer



*** info
**** ＜修正箇所＞
・プライバシーポリシー（２箇所記載があります）
　https://manatuku.com/privacy

・会社概要
　https://manatuku.com/aboutus

・メールのフッタすべて

**** ＜新住所＞
住所：〒167-0033　東京都杉並区清水1丁目16-5　IWAIビル6階
電話番号：03-6913-7639
FAX番号：03-6913-7166

**** old?
〒167-0053　東京都杉並区西荻南2-24-7
03-5344-3277
03-5344-3278
* Done aws 構造追記
SCHEDULED: <2015-11-18 Wed> CLOSED: [2015-11-18 Wed 18:41]
:PROPERTIES:
:ID: 483722fb-942e-4101-a26b-d0ee0a8fb08c
:END:
Added:      [2015-11-18 Wed 18:40]

static page
* Done load average調整
  SCHEDULED: <2015-11-18 Wed> CLOSED: [2015-11-18 Wed 20:58]
Added:      [2015-11-18 Wed 18:41]

とりあえず、ファイル分割してthreadにした
* Done deploy                                                 :organic_style:
  SCHEDULED: <2015-11-18 Wed> CLOSED: [2015-11-18 Wed 20:59]
Added:      [2015-11-18 Wed 20:58]
done 2times
* Done 監視追加
SCHEDULED: <2015-11-20 Fri> CLOSED: [2015-11-20 Fri 20:59]
Added:      [2015-11-20 Fri 20:58]

delayed job追加
1以外でアラート
* Done 意見書                                                          :finc:
CLOSED: [2015-12-14 Mon 13:23] DEADLINE: <2015-11-27 Fri>
Added:      [2015-11-24 Tue 15:40]

*** 意見書 : 編集
- [ ] DB作成
    - [ ] 不明点確認

- [ ] UI 右列
    - [ ] 面談者情報 読み込みのみ
    - [ ] 面談メモ 読み込みのみ

- [ ] UI左列
    - [ ] 最下部に、プレビュー / 保存 / 編集を表示
         - [ ] 送信 -> どこかに提出?(提出しました画面)
         - [ ] 保存 -> 保存 -> 面談詳細個人メモへ戻る
         - [ ] プレビュー -> プレビュー画面
             - [ ] wordで出力
             - [ ] PDFで出力
             - [ ] 送信ｎ

- [ ] UI上
    - [ ] 日付表示
    - [ ] 表示ボタン

*** 意見書 : 詳細
用途いまいちわからん

*** 疑問
**** 編集画面と詳細画面の違い
恐らく show の部分

**** ストレス反応の程度の評価（点数 / 項目数）
構造が分からない
[項目数]の種類が複数あり、[項目数]ごとに点数が付く?

項目選択 + 点数入力部

**** 1カウンセリングに、複数の意見書を提出可能か?
- 1counseling = 1意見書
- 日付選択はなくなる

**** ストレスチェックを実施する直前1ヶ月の労働時間（時間外・休日労働時間を含む）
上記がUI上には表示されていない、不要か?
fincさんに確認

**** その他のストレス要因となる勤務状況
基本情報となっているが、何処の情報を参照か?
fincさんに確認

* Done google analytics wiki化
SCHEDULED: <2015-07-28 Tue> CLOSED: [2015-09-14 Mon 09:20]
Added: [2015-07-27 Mon 16:35]
* Done AWSへvSphere導入し
SCHEDULED: <2015-08-23 Sun> CLOSED: [2015-08-25 Tue 00:51]

- [ ] : AWS環境へ導入し、仮想OSのinstall
- [ ] : 可能であればchefで上記全てを行う。
* Paused [#A] uniqlo 保守                                            :uniqlo:
DEADLINE: <2015-08-31 Mon> CLOSED: [2015-09-14 Mon 09:43]
Added: [2015-08-19 Wed 20:43]

*** Paused [#E] [66%] uniqlo 資料訂正/作成                     :uniqlo:
CLOSED: [2016-07-05 Tue 10:54] DEADLINE: <2015-11-07 Sat>
CLOCK: [2015-10-09 Fri 15:15]--[2015-10-13 Tue 16:32] => 97:17
Added: [2015-09-14 Mon 15:00]

- [X] 添削 : mail template
      shoko.toyookaさんは不要

- [X] 追記 : mail template
      NTT data中山さんを全templateへ

- [ ] : 資料をGoogle Document化
    - [ ] : まずは全内容を整理
    - [ ] : txt化
    - [ ] : document化

*** Todo [#D] flow作成

**** 懸念点など
- Linux基本packageは、どちらがupdateを行うのか?
- NTT data側でのsecurity update policyはあるか?

**** 脆弱性, update調査
各種relase情報から、脆弱性、重要なupdateの有無を調査。

***** ruby/rails
****** 判断基準
ruby/railsの [patch version] のupdateを対象とする。
minor, majorは対象としない。

******* 補足
- patch version       : bug/securtiy updateを指す。
- minor/major version : 機能追加/api追加など。(影響が大きい)

ruby  : https://www.ruby-lang.org/ja/news/2013/12/21/ruby-version-policy-changes-with-2-1-0/
rails : http://railsguides.jp/maintenance_policy.html

****** minor/major version updateについて
基本、当作業は行わない。、
ただし、security updateを継続するに辺り、version upが必要とするケースが想定される。
# あるversionがsupport対象外になるなど
upgradeする場合、互換性要確認。

この場合、保守契約とは別に工数を頂戴する。
先方へ影響を伝達し、実施可否を判断する。

****** 各種確認方法
******* ruby
# 脆弱性情報
https://www.ruby-lang.org/ja/security/

# release news
# セキュリティメンテナンスの終了/延長などの情報あり
https://www.ruby-lang.org/ja/news/

# policy
https://www.ruby-lang.org/ja/news/2013/12/21/ruby-version-policy-changes-with-2-1-0/

******* rails
# release情報 - 英語
http://weblog.rubyonrails.org/releases/

# twitter
https://twitter.com/rails

# policy
# 現状のsecurity update対象のversion情報あり
# 約1年 versionのsupport期間は、およそ1年との事
http://railsguides.jp/maintenance_policy.html

****** 影響範囲の確認
動作影響、update内容などを確認
# minor/major updateの場合は特に互換性を確認

***** Gems
****** 判断基準
利用Gemsに、脆弱性への対応/重要なupdateがある場合、update対象とする

****** 確認方法
Gemnasiumを用いる。
https://gemnasium.com/dashboard

Statusが「赤」の場合、update対象とする。
他の色は対象外。

# Gemnasiumとは
# 各色の意味も記述あり
http://chocoby.jp/blog/2013/03/02/gemnasium/

****** 影響範囲の確認
動作影響、update内容などを確認

- rubyのversion upが必要となるケースも想定される。
  特に、minor/majorのversion upが必要となる場合、適用可否の判断を行う。
  # 前項の [ruby/rails] 記述の、[minor/major version updateについて] を参照

- 各gemの依存関係など注意。

***** Linux packages
****** 判断基準
脆弱性対応のみ、update対象とする

****** 各種確認方法
Uniqloでは、Amazon linxu(red hat系)を利用。
以下、amazon linux、redhat security情報を参照。

# amazon linux
https://alas.aws.amazon.com/
http://aws.amazon.com/jp/security/security-bulletins/
https://aws.amazon.com/jp/amazon-linux-ami/

# redhat
https://access.redhat.com/security/cve/

# 一般情報
https://cve.mitre.org/
http://jvn.jp/report/index.html
https://www.jpcert.or.jp/
http://www.ipa.go.jp/security/vuln/index.html

****** 確認package例
******* ruby開発導入
git make gcc gcc-c++
openssl gdbm
sqlite sqlite-devel
nodejs npm --enablerepo=epel

libxml2 libxml2-devel
libxslt libxslt-devel

readline-devel openssl-devel zlib-devel
gdbm-devel libffi-devel libyaml-devel libicu-devel
ruby-devel rubygems-devel

# open-sslは、NTT dataが先にinstall

******* NTT Data導入
nginx
openssl openssl-devel
munin-node
dstat
telnet
******* updateコマンド例
# 依存パッケージのupdateに注意

- yum
   # sudo yum list installed | grep [package名]  # 現在のversionを得る
   # yum update [package名]

- apt
   # apt-get update
   # apt-get install [package名]

****** 影響範囲の確認
動作影響、update内容などを確認
依存パッケージのupdateでの影響を考慮。

# uniqloの場合、NTTが導入しているapplicationへの影響も想定される

***** Linux OS
amazon linux support

****** release
https://aws.amazon.com/jp/amazon-linux-ami/

****** Todo [#C] ちょっと考えよう
http://dev.classmethod.jp/cloud/specify-amazon-linux-version/
http://dev.classmethod.jp/cloud/five-confs-of-ec2-linux-sysops/
http://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/AmazonLinuxAMIBasics.html
**** 先方への情報展開、日程調整
***** update作業の通知、日程調整
***** ruby/rails minor,major update
実施可否、日程、今後のメンテナンスについてなど先方と調整

****** mail template
to : kanako.ishimaru@uniqlo.co.jp
cc : shoko.toyooka@uniqlo.co.jp
cc : konomi.hayashi@uniqlo.co.jp

セキュリティアップデートに伴うシステム改修のご相談
----------------------------------------------------------------
石丸様

御世話になっております。
Ruby開発 [sender]と申します。


本日は、セキュリティアップデートに伴うシステム改修のご相談となります。
[経緯]につきましては後述内容をご参照願います。

大変お手数をお掛け致しますが、下記日程にて詳細をご説明させていただくことは
可能でしょうか。

mm/dd（W）　hh:mm以降
mm/dd（W）　hh:mm - hh:mm, hh:mm-hh:mm

[経緯]
--------------------------------
現在、弊社で管理しておりますRuby/Railsは、およそ[xヶ月後]に公式サポートより
セキュリティアップデート対象外となります。
今後セキュリティアップデートを継続するにあたり、サポート対象となる上位Version
への移行が必要となります。

移行時、システム動作へ大きな影響を受けるため、システムの改修・調整が必要となり
ます。
以上から、保守契約内での工数を超過すると想定しております。
--------------------------------


以上となります。
お忙しい中恐縮でございますが、宜しくお願い申し上げます。
----------------------------------------------------------------

***** NTT作業内容の共有、影響確認
# uniqloでは、NTTが導入したapplicationへの影響の判断などのため。

****** mail template
to : nakayamatkb@nttdata.co.jp


uniqlo serverのLinux package updateに伴うご相談
----------------------------------------------------------------
中山様

御世話になっております。
Ruby開発 [sender]と申します。


Linux packageのsecurity updateに伴い、NTT data様にて導入済みの機能への
影響を懸念しております。
付きましては、対象となる下記packageを参照頂き、ご確認頂くことは可能でしょうか?
# なお、下記packageは、全て弊社が導入したものとなります。

--------------------------------
example :
ssh ssh-server
open-ssl
--------------------------------


以上となります。
何卒宜しくお願い申し上げます。
----------------------------------------------------------------

**** development
- 改修作業
- 動作確認
- deploy手順考察
- Backup対象となるソース考察

**** production deploy
***** 作業開始メール送付
mail temp

[作業開始連絡] yyyy/mm/dd Productionへのdeploy
----------------------------------------------------------------
関係者各位

お世話になっております。
Ruby開発 [Sender]です。

これより、prodution環境へのdeploy作業を開始致します。
よろしくお願い申し上げます。


deploy スケジュール
----------------------------------------------------------------
    - 作業時間帯
        mm/dd hh時mm分 〜 hh時mm分

    - 対象server
        - prd01-a-tky-admin-***-***
        - prd01-a-tky-***-***
        - prd01-a-tky-batch-***-***

    - 大まかな作業内容
        - DB backup
        - 各種deploy
        - 各種サーバー連携確認
        - 全サーバーへ各種設定(rails, nginx, ..etc)

補足
----------------------------------------------------------------
    - インフルエンサー登録画面 - アクセス不可時間帯
        mm/dd hh時mm分 〜 hh時mm分


以上となります。
宜しくお願い申し上げます。
----------------------------------------------------------------

***** Backup
- DB backup

***** update作業
簡易手順のみ

****** ruby update
- rbenv update
- ruby install

- deploy # bundle installはcapistranoで行われる

****** rails/gem update
- deploy # bundle install はcapistranoで行われる

****** Linux package
# 事前調査と日時が開いている場合、packageの状態が異なるため注意

- connect to server
- do yum list installed | grep [package名]  # 現在のversionを得る
- yum update [package名]
  # update対象のdaemonは要再起動

***** 動作チェック
現在、チェック内容を整理中。
# rspecでの網羅が可能か

***** 作業終了メール送付
mail temp

[作業終了連絡] yyyy/mm/dd Productionへのdeploy
----------------------------------------------------------------
関係者各位

お世話になっております。
Ruby開発 [Sender]です。

下記deploy作業は完了致しました。
ご協力有難う御座いました。

以上となります。
宜しくお願い致します。

# 開始連絡引用
----------------------------------------------------------------
**** 元ネタ
----------------------------------------------------------------------------
- flow
    - security update確認 / 実施可否確認
        - 月一(毎週?)確認し、問題があれば
    - NTT / Uniqloへの確認
        - NTT dataへ確認
           - 基本packageであれば、どちらが実施するのか?
           - ruby社がinstallしたもの
        - uniqloへ連絡
    - security update
    - update後のdeploy
    - 動作テスト
        - rspecの現状が不明
        -
    - uniqloへの連絡






資料作り - 以下を元に大体flow作成
----------------------------------------------------------------------------
- security情報収集
    - 一般的なlinuxのsecurity情報
    - rails, ruby
        - patch versionは基本対応。
        - support切れ(minor versionでもsupport切れ有り)の前にupgrade(互換性要確認)
        - minor/major version update時は要確認(minorでも仕様変更ある)
            料金uniqlo様と別途対応
    - gem
        - gemnasium
            - 赤のみ対象
            - 黄色が未対象



- patch version updateとは
    security対策

- minor version udpate
    http://railsguides.jp/maintenance_policy.html
    https://www.ruby-lang.org/ja/security/


    - api追加、機能追加など
    - 現状、4.2 / 4.1のみ対応している
        - 恐らく、2 minor versionのみ対応?
        - 期間は?


- ruby/rails support切れは1年前に通知される。
    - それみて計画的に考える
    - EUにアナウンス
        updateに関してはEU次第。
    - support切れになるので、versionを上げないとうちではsecurity対応できません
    ------ mail templateの作成。 ------

*** Todo [#D] 残作業
- [ ] : update手順の基本的な部分の確認(何するんだよ)
- [ ] : sub domainをソースコードに記述
        # ELB廃止に辺り、global IPが流動化。
        # これの対処として、都度domainへIP紐付けで対応する。
- [ ] : sub domainとpublic IPの紐付けのtext化
- [ ] : cloud formationで全体をコード化し、全体
- [ ] : ssh keyの整理
        全員共通keyは微妙だろうとの事で

*** Todo [#D] 機能確認
**** for
NTT dataに確認を行うか判断するための確認。
状況によって、当情報を質問に追加する。

僕は、いずれにせよ、確認が必要だと思うが、不要との声も。
そもそも、質問する気なのかな?
さっぱりわからん。

**** 自動update
- [ ] : 自動updateで、package全てupdateされるのか
- [ ] : NTT data serverでは、自動update設定がなされているのか?

*** done
**** 要件
- [X] uniqloの料金算定
  可能な限り0にしたい

- [X] 資料作成
  保守用の資料作成

- [X] 具体的な作業の内容
  実作業の具体的な内容

**** installed
***** 手動build
ruby, rbenv, Ruby on Rails, Gem

***** 手動install from yum
git make gcc gcc-c++
openssl gdbm
sqlite sqlite-devel
ruby-devel
nodejs npm --enablerepo=epel

libxml2 libxml2-devel
libxslt libxslt-devel

readline-devel openssl-devel zlib-devel gdbm-devel libffi-devel libyaml-devel libicu-devel rubygems-devel

***** NTTがinstallした(と思われるもの含む)
nginx
openssl openssl-devel
munin-node
dstat
telnet

***** RDS
RDSの特性上、MySQLの管理はAWS側となる。(設定変更にはAWSアクセス権限が必要)
マイナーアップデートは自動で可能。(NTT側で設定されていれば)

**** update作業
- 基本は、試験環境で事前確認。
- update基準は? セキュリティホールとなる場合、updateを要する。

***** ruby, rbenv
- .ruby-version修正

- rbenv update (githubからpull)
- ruby build

- deploy
- bundle install

***** Ruby on Rails, Gem
- Gemfile update
- deploy
- bundle install

***** linux packages
NTT dataのinstalled packageと競合する可能性があるため、
package個別にupdateするのが良いと思われる。
(事前確認は必須。)

競合する場合は、NTTへ要相談。

***** RDS
マイナーアップデートは自動で可能。(NTT側で設定されていれば)
メジャーアップデートは、余程の事が無い限りは不要と思われる (NTT側の作業)

※ 権限渡されて、そっちでやれと言われるかもしれないが
※ メジャーの場合、定期作業ではない。マイナーは自動化可能なので、当方で行う必然性は少ない

**** ELB / EIP
subdomainを決めて、DNS側を
***** adm elb - 修正不要
***** usr elb - 要修正
./uniqlo-hashtag-main/config/deploy/settings/development.yml:js_pc_url:  "http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/javascripts/postphotos.js"
./uniqlo-hashtag-main/config/deploy/settings/development.yml:js_sp_url:  "http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/javascripts/postphotos_sp.js"
./uniqlo-hashtag-main/config/deploy/settings/development.yml:css_pc_url: "http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/stylesheets/tag_photo_list.css"
./uniqlo-hashtag-main/config/deploy/settings/development.yml:css_sp_url: "http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/stylesheets/tag_photo_list_sp.css"
./uniqlo-hashtag-main/config/deploy/settings/development.yml:logo_url:   "http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/images/tag_photo_list_logo.png"
./uniqlo-hashtag-view/config/deploy/development/tag_photo_list_sp.html:    <script src='http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/javascripts/postphotos_sp.js'></script>
./uniqlo-hashtag-view/config/deploy/development/tag_photo_list_sp.html:    <link rel='stylesheet' type='text/css' href='http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/stylesheets/tag_photo_list_sp.css' media='all'>
./uniqlo-hashtag-view/config/deploy/development/tag_photo_list_sp.html:      <div class='hash_tag_photo_list_logo'><a href='http://www.uniqlo.com'><img src='http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/images/tag_photo_list_logo.png'></a></div><div class='hash_tag_photo_list_go_back'><a href='http://www.uniqlo.com' class='hash_tag_photo_list_go_back'>> Go back to uniqlo.com</a></div>
./uniqlo-hashtag-view/config/deploy/development/production.html:    <script src='http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/javascripts/postphotos.js'></script>
./uniqlo-hashtag-view/config/deploy/development/tag_photo_list.html:    <script src='http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/javascripts/postphotos.js'></script>
./uniqlo-hashtag-view/config/deploy/development/tag_photo_list.html:    <link rel='stylesheet' type='text/css' href='http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/stylesheets/tag_photo_list.css' media='all'>
./uniqlo-hashtag-view/config/deploy/development/tag_photo_list.html:      <div class='hash_tag_photo_list_logo'><a href='http://www.uniqlo.com'><img src='http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/images/tag_photo_list_logo.png'></a></div><div class='hash_tag_photo_list_go_back'><a href='http://www.uniqlo.com' class='hash_tag_photo_list_go_back'>> Go back to uniqlo.com</a></div>
./uniqlo-hashtag-view/config/deploy/development/javascripts/postphotos_sp_v1.js:DATA_PATH = 'http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/api/v1/media.js?';
./uniqlo-hashtag-view/config/deploy/development/javascripts/postphotos_sp_v1.js:IMAGE_PATH = 'http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/images/';
./uniqlo-hashtag-view/config/deploy/development/javascripts/postphotos.js:DATA_PATH = 'http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/api/v2/media.js?';
./uniqlo-hashtag-view/config/deploy/development/javascripts/postphotos.js:IMAGE_PATH = 'http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/images/';
./uniqlo-hashtag-view/config/deploy/development/javascripts/postphotos_v1.js:DATA_PATH = 'http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/api/v1/media.js?';
./uniqlo-hashtag-view/config/deploy/development/javascripts/postphotos_v1.js:IMAGE_PATH = 'http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/images/';
./uniqlo-hashtag-view/config/deploy/development/javascripts/postphotos_sp.js:DATA_PATH = 'http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/api/v2/media.js?';
./uniqlo-hashtag-view/config/deploy/development/javascripts/postphotos_sp.js:IMAGE_PATH = 'http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/images/';
./uniqlo-hashtag-view/config/deploy/development/production_sp.html:    <script src='http://uniqlo-influencer-usr-lb-667400264.ap-northeast-1.elb.amazonaws.com/javascripts/postphotos_sp.js'></script>

***** 固定IP - 修正不要
sns serverのEIPは、恐らくsns sideからのpushを想定

* Iam [#D] penetration test                                         :insider:
Added: [2015-06-17 Wed 01:18]
ツール見繕って
進入テスト
継続してテストできるように
* Iam [#F] vagrant                                                   :uniqlo:
SCHEDULED: <2015-09-10 Thu> CLOSED: [2015-10-22 Thu 12:07]
Added: [2015-09-10 Thu 10:21]

uniqlo vagrantにて環境構築
* project template
** Project template
*** Meatings
**** [2016-03-16 Wed]

*** road map
*** base
**** road map
https://docs.google.com/spreadsheets/d/1uEiI2SFBPv-Z_WgswEhY24NnGe3Z3THCCzRZhmCDbRk/edit#gid=1069237278

+ [ ] 3/17：feedとcommentのクラス化
    + [ ] 親クラス名の決定
        + [ ] communication
            - [ ] feed
            - [ ] comment
            - [ ] messsage
    + [ ] 親クラスの作成
        - [ ] feedの子クラス化
        - [ ] commentの子クラス化
+ [ ] 3/16〜3/27：テスト
    + [ ] feature
        - [ ] APIテスト
        - [ ] 認証テスト
        - [ ] アクセス制御テスト
    + [ ] モデル
        - [ ] feed
        - [ ] comment
        - [ ] attachment
        - [ ] allinAccount
    + [ ] ルート
        - [ ] WebAPI
+ [ ] 3//22：クライアントとの接続シーケンス（dispatch）の追加
+ [ ] 3/22：DBのインデックス設定
+ [ ] 3/22：AttachmentsController証明書の期限
+ [ ] 3/20〜3/22：セキュリティー
    + [ ] SQLインジェクション対応
        - [ ] create
        - [ ] read
        - [ ] update
        - [ ] delete
    + [ ] helmetの設定
    + [ ] crosの設定
    + [ ] 書籍からその他
+ [ ] WSの再接続
    + [ ] クライアント側
        - [ ] 初回接続時、ELBへ接続
        - [ ] disconnectを検出したら、接続先をELBへ戻して接続
    + [ ] サーバサイド
        - [ ] 必要な処理がないか確認する。
+ [ ] AttachmentsControllerの非同期処理の改善
+ [ ] 運用環境での動作確認
    - [ ] 3/22：ELBを使用すると、AngularJSの動作が変になる調査
    - [ ] 3/22〜3/25：プロダクション環境の構築
    - [ ] 3/28〜3/31：プロダクション環境での動作テスト
    - [ ] 4/1〜4/3：運用環境での負荷試験とセキュリティー試験
    - [ ] DBのバックアップは差分バックアップが可能か？

**** 参考サイト
http://gihyo.jp/dev/serial/01/nodejs

とりあえず、vagrantでのinstall方法を確認しつつ
各versionの固定方法。

*** env
**** deploy
**** 仮想開発環境 apps environment
server : 1.x.x
db     : 1.x.x
bower  : 1.x.x

**** development
**** staging
**** production

*** 疑問
- [ ] title :: msg
- [ ] title :: msg
- [ ] title :: msg
- [ ] title :: msg
- [ ] title :: msg

*** todos
**** sample todo
