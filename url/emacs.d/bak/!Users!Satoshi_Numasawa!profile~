root@raspberrypi:/home/pi/IoT_raspberry_pi/aws-iot-device-sdk-ruby# ruby-prof ./main.rb
#<DhtSensor::Reading:0x55fb53d0 @humidity=42.0, @temperature=26.0>
Measure Mode: wall_time
Thread ID: 719027232
Fiber ID: 719922684
Total: 16.423278
Sort by: self_time

 %self      total      self      wait     child     calls  name
 43.88      7.206     7.206     0.000     0.000       17   <Module::DhtSensor>#readDHT
  1.80      0.403     0.296     0.000     0.107      430  *Kernel#require_relative
  1.77      0.290     0.290     0.000     0.000        1   OpenSSL::SSL::SSLSocket#connect
  1.65      0.271     0.271     0.000     0.000        1   TCPSocket#initialize
  0.10      0.814     0.017     0.000     0.798        1   MQTT::Client#connect
  0.08      0.014     0.013     0.000     0.002        1   Adapters::RubyMqttAdapter#initialize
  0.07      0.551     0.012     0.000     0.539      372  *Array#each
  0.06      0.011     0.011     0.000     0.000     1076   IO#set_encoding
  0.04      0.007     0.007     0.000     0.000     2776   Module#method_added
  0.03      0.781     0.006     0.000     0.776      295  *Kernel#gem_original_require
  0.03      0.008     0.005     0.000     0.003      296   MonitorMixin#mon_enter
  0.02      0.004     0.004     0.000     0.000       17   Module#module_eval
  0.02      0.008     0.004     0.000     0.004      296   MonitorMixin#mon_exit
  0.02      0.003     0.003     0.000     0.000      912   <Class::Thread>#current
  0.02      0.013     0.003     0.000     0.010      291   <Module::Gem>#find_unresolved_default_spec
  0.02      0.003     0.003     0.000     0.000      230   <Class::File>#file?
  0.01      0.002     0.002     0.000     0.000      885   Symbol#to_s
  0.01      0.003     0.002     0.000     0.001      296   MonitorMixin#mon_check_owner
  0.01      0.070     0.002     0.000     0.068      108  *Class#new
  0.01      0.008     0.002     0.000     0.006        1   IO#each_line
  0.01      0.002     0.002     0.000     0.000      344   <Module::Gem>#suffixes
  0.01      0.002     0.002     0.000     0.001      292   Kernel#respond_to?
  0.01      0.002     0.002     0.000     0.000      298   <Class::Gem::Specification>#unresolved_deps
  0.01      0.002     0.002     0.000     0.000      118   String#split
  0.01      0.002     0.002     0.000     0.000       15   Module#instance_methods
  0.01      0.003     0.002     0.000     0.002       65   <Class::Gem::BasicSpecification>#default_specifications_dir
The update request with the token rubyTQgxzgRxwi1tM60m_RasPi_sendai_0_oyFQK has timed out!
  0.01      0.002     0.002     0.000     0.000       59   Module#attr_accessor
Shadow request with token: rubyTQgxzgRxwi1tM60m_RasPi_sendai_0_oyFQK has timed out.
  0.01      0.014     0.001     0.000     0.012       53   Gem::BasicSpecification#contains_requirable_file?
  0.01      0.001     0.001     0.000     0.000      208   String#to_sym
  0.01      0.001     0.001     0.000     0.000      296   Mutex#lock
  0.01      0.001     0.001     0.000     0.000       68   Module#alias_method
  0.01      0.001     0.001     0.000     0.000      296   Mutex#unlock
  0.01      0.002     0.001     0.000     0.001      111   <Module::FFI>#find_type
  0.01      0.001     0.001     0.000     0.000      666   String#==
  0.01      0.001     0.001     0.000     0.000       78   <Class::File>#join
  0.01      0.001     0.001     0.000     0.000      368   BasicObject#singleton_method_added
  0.01      0.001     0.001     0.000     0.000      260   Class#inherited
  0.01      0.001     0.001     0.000     0.000      170   Module#undef_method
  0.01      0.001     0.001     0.000     0.000        1   OpenSSL::SSL::SSLSocket#initialize
  0.01      0.002     0.001     0.000     0.001        8   Hash#each_pair
  0.01      0.001     0.001     0.000     0.000       65   <Module::Gem>#default_dir
  0.01      0.005     0.001     0.000     0.004      137  *Array#any?
  0.00      0.001     0.001     0.000     0.000      210   Symbol#=~
  0.00      0.001     0.001     0.000     0.000       95   Module#private
  0.00      0.001     0.001     0.000     0.000      312   Kernel#respond_to_missing?
  0.00      0.002     0.001     0.000     0.001       17   Gem::Version#<=>
  0.00     10.114     0.001     1.304     8.809        1   <Module::DhtSensor>#read
  0.00      0.005     0.001     0.000     0.004       65   Gem::BasicSpecification#default_gem?
  0.00      0.003     0.001     0.000     0.002      106   <Module::FFI>#typedef
  0.00      0.001     0.001     0.000     0.000       38   Module#attr_reader
  0.00      0.001     0.001     0.000     0.000       66   <Class::File>#dirname
  0.00      0.005     0.001     0.000     0.004       17   Forwardable#def_instance_delegator
  0.00      0.008     0.001     0.000     0.007       33   Module#class_eval
  0.00      0.001     0.001     0.000     0.000        6   OpenSSL::SSL::SSLSocket#syswrite
  0.00      0.001     0.001     0.000     0.000       24   Class#initialize
  0.00      0.001     0.001     0.000     0.001       15   Array#select
  0.00      0.000     0.000     0.000     0.000      132   Hash#[]=
  0.00      0.001     0.000     0.000     0.000       49   Gem::StubSpecification#activated?
  0.00      0.000     0.000     0.000     0.000        1   OpenSSL::X509::Certificate#initialize
  0.00      0.000     0.000     0.000     0.000       92   Gem::StubSpecification#name
  0.00      0.000     0.000     0.000     0.000      216   Kernel#is_a?
  0.00      0.001     0.000     0.000     0.000       51   Module#define_method
  0.00      0.000     0.000     0.000     0.000      104   String#index
  0.00      0.002     0.000     0.000     0.002        6   MQTT::Packet#to_s
  0.00      0.000     0.000     0.000     0.000        1   OpenSSL::SSL::SSLSocket#sysclose
  0.00      0.099     0.000     0.000     0.098       19   PrettyPrint#text
  0.00      0.000     0.000     0.000     0.000       63   String#=~
  0.00      5.686     0.000     5.686     0.000       18   Kernel#sleep
  0.00      0.000     0.000     0.000     0.000       65   Regexp#=~
  0.00      0.000     0.000     0.000     0.000        1   OpenSSL::PKey::RSA#initialize
  0.00      0.000     0.000     0.000     0.000        1   <Class::FFI::DynamicLibrary>#open
  0.00      0.000     0.000     0.000     0.000        3   Thread#initialize
  0.00      0.000     0.000     0.000     0.000      135   String#length
  0.00      0.001     0.000     0.000     0.001        7   OpenSSL::Buffering#do_write
  0.00      0.000     0.000     0.000     0.000      106   String#chomp
  0.00      0.000     0.000     0.000     0.000      119   Kernel#instance_variable_defined?
  0.00      0.000     0.000     0.000     0.000      104   String#slice
  0.00      0.000     0.000     0.000     0.000       29   Module#append_features
  0.00      0.003     0.000     0.000     0.003       22   Gem::Specification#missing_extensions?
  0.00      0.495     0.000     0.495     0.000       24   IO#write
  0.00      0.000     0.000     0.000     0.000       68   Gem::Dependency#type
  0.00      0.000     0.000     0.000     0.000       36   Gem::StubSpecification#full_require_paths
  0.00      0.001     0.000     0.000     0.000       43   Kernel#initialize_dup
  0.00      0.000     0.000     0.000     0.000      138   Fixnum#==
  0.00      0.001     0.000     0.000     0.000        3   <Class::Thread>#new
  0.00      0.000     0.000     0.000     0.000      106   Module#===
  0.00      0.000     0.000     0.000     0.000       29   Module#const_set
  0.00      0.000     0.000     0.000     0.000      106   Fixnum#+
  0.00      0.000     0.000     0.000     0.000      128   Hash#[]
  0.00      0.005     0.000     0.000     0.005       36   Gem::StubSpecification#missing_extensions?
  0.00      0.000     0.000     0.000     0.000       60   Gem::BasicSpecification#full_require_paths
  0.00      0.000     0.000     0.000     0.000       74   Kernel#class
  0.00      0.000     0.000     0.000     0.000        1   Gem::Requirement#initialize
  0.00      0.000     0.000     0.000     0.000        5   Array#join
  0.00      0.000     0.000     0.000     0.000      170   Module#method_undefined
  0.00      0.001     0.000     0.000     0.000       72   Kernel#!~
  0.00      0.000     0.000     0.000     0.000       11   Module#protected
  0.00      0.001     0.000     0.000     0.000       29   Kernel#dup
  0.00      0.001     0.000     0.000     0.000       29   Module#include
  0.00      0.000     0.000     0.000     0.000       22   Array#pack
  0.00      0.000     0.000     0.000     0.000       10   Regexp#===
  0.00      0.001     0.000     0.000     0.001       11  *Array#map
  0.00      0.000     0.000     0.000     0.000        1   FFI::Function#attach
  0.00      0.000     0.000     0.000     0.000      111   Hash#has_key?
  0.00      0.000     0.000     0.000     0.000        1   Integer#times
  0.00      0.000     0.000     0.000     0.000       43   Kernel#nil?
  0.00      0.000     0.000     0.000     0.000       64   Array#include?
  0.00      0.782     0.000     0.000     0.782      291  *Kernel#require
  0.00      0.000     0.000     0.000     0.000       29   BasicObject#!
  0.00      0.000     0.000     0.000     0.000       33   Module#method_defined?
  0.00      4.093     0.000     0.000     4.093       15  *Mutex#synchronize
  0.00      0.000     0.000     0.000     0.000        1   OpenSSL::X509::Store#set_default_paths
  0.00      0.000     0.000     0.000     0.000       11   Regexp#to_s
  0.00      0.000     0.000     0.000     0.000       10   <Class::File>#exist?
  0.00      0.000     0.000     0.000     0.000       35   Gem::Version#segments
  0.00      0.000     0.000     0.000     0.000       43   String#+
  0.00      0.000     0.000     0.000     0.000        7   PrettyPrint::GroupQueue#enq
  0.00      0.000     0.000     0.000     0.000       14   Hash#initialize_copy
  0.00      0.004     0.000     0.000     0.004        7  *Gem::Specification#activate
  0.00      0.000     0.000     0.000     0.000        1   TokenCreator#create_next_token
  0.00      0.000     0.000     0.000     0.000       60   Array#[]
  0.00      0.000     0.000     0.000     0.000       14   Hash#merge
  0.00      0.000     0.000     0.000     0.000        1   Kernel#caller
  0.00      0.000     0.000     0.000     0.000       13   Gem::StubSpecification#to_spec
  0.00      0.000     0.000     0.000     0.000        1   <Class::Thread>#start
  0.00      0.000     0.000     0.000     0.000       62   Fixnum#>
  0.00      0.000     0.000     0.000     0.000       21   PrettyPrint#break_outmost_groups
  0.00      0.001     0.000     0.000     0.001        7   Gem::Specification#add_self_to_load_path
  0.00      0.000     0.000     0.000     0.000       19   String#encode
  0.00      0.000     0.000     0.000     0.000        6   Exception#backtrace
  0.00      0.000     0.000     0.000     0.000       36   Array#last
  0.00      0.000     0.000     0.000     0.000        6   String#upto
  0.00      0.000     0.000     0.000     0.000        3   MQTT::Packet::Subscribe#topics=
  0.00      0.000     0.000     0.000     0.000       18   Module#module_function
  0.00      0.000     0.000     0.000     0.000        2   BasicObject#instance_eval
  0.00      0.000     0.000     0.000     0.000        7   Array#flatten
  0.00      0.000     0.000     0.000     0.000       17   PrettyPrint::Text#add
  0.00      0.000     0.000     0.000     0.000       13   Array#index
  0.00      0.001     0.000     0.000     0.001       14   Gem::Specification#runtime_dependencies
  0.00      0.102     0.000     0.000     0.102        1   PP::PPMethods#guard_inspect_key
  0.00      0.001     0.000     0.000     0.001        6   Proc#call
  0.00      0.000     0.000     0.000     0.000       30   Hash#delete
  0.00      0.000     0.000     0.000     0.000       53   Fixnum#<
  0.00      0.000     0.000     0.000     0.000        8   Module#extend_object
  0.00      0.000     0.000     0.000     0.000       26   String#to_s
  0.00      0.000     0.000     0.000     0.000        6   MQTT::Packet#encode_string
  0.00      0.000     0.000     0.000     0.000       13  *Kernel#extend
  0.00      0.000     0.000     0.000     0.000       41   Array#<<
  0.00      0.000     0.000     0.000     0.000       41   Array#empty?
  0.00      0.000     0.000     0.000     0.000       11   <Class::Gem::Version>#new
  0.00      0.002     0.000     0.000     0.002        7   MQTT::Packet#initialize
  0.00      0.000     0.000     0.000     0.000        3   MqttManager::TopicBuilder#initialize
  0.00      0.000     0.000     0.000     0.000       17   Gem::Version#version
  0.00      0.000     0.000     0.000     0.000       25   Array#length
  0.00      0.230     0.000     0.230     0.000        1   OpenSSL::SSL::SSLSocket#sysread
  0.00      0.000     0.000     0.000     0.000        1   <Class::Dir>#[]
  0.00      0.000     0.000     0.000     0.000        4   String#gsub
  0.00      0.000     0.000     0.000     0.000       30   Fixnum#-
  0.00      0.019     0.000     0.000     0.019        5   <Module::Gem>#try_activate
  0.00      0.000     0.000     0.000     0.000       70   Symbol#to_sym
  0.00      0.000     0.000     0.000     0.000        8   MQTT::Client#connected?
  0.00      0.495     0.000     0.000     0.495       24   IO#<<
  0.00      0.000     0.000     0.000     0.000        1   JSON::Ext::Generator::GeneratorMethods::Hash#to_json
  0.00     16.423     0.000     0.000    16.423        2   Global#[No method]
  0.00      0.000     0.000     0.000     0.000       12   Array#delete
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet::Connect#encode_body
  0.00      0.000     0.000     0.000     0.000       10   MQTT::Packet#encode_short
  0.00      0.001     0.000     0.000     0.000        1   MQTT::Client#initialize
  0.00      0.000     0.000     0.000     0.000        1   <Class::IO>#read
  0.00      0.000     0.000     0.000     0.000        6   MQTT::Packet#type_id
  0.00      0.000     0.000     0.000     0.000        7   Exception#initialize
  0.00      0.000     0.000     0.000     0.000        1   OpenSSL::SSL::SSLContext#initialize
  0.00      0.000     0.000     0.000     0.000        1   PrettyPrint#initialize
  0.00      0.000     0.000     0.000     0.000       51   String#===
  0.00      0.003     0.000     0.000     0.003        7  *Gem::Specification#activate_dependencies
  0.00      0.000     0.000     0.000     0.000        3   FFI::AbstractMemory#read_float
  0.00      0.003     0.000     0.000     0.002        3   Gem::Dependency#matching_specs
  0.00      0.102     0.000     0.100     0.001        1   MQTT::Client#disconnect
  0.00      0.000     0.000     0.000     0.000       20   String#initialize_copy
  0.00      0.000     0.000     0.000     0.000        2   Array#initialize
  0.00      0.000     0.000     0.000     0.000       19   Gem::StubSpecification#extensions
  0.00      0.000     0.000     0.000     0.000       21   String#bytesize
  0.00      0.000     0.000     0.000     0.000       17   Array#push
  0.00      0.001     0.000     0.000     0.001       14   Comparable#<
  0.00      0.000     0.000     0.000     0.000        6   Module#attr
  0.00      0.000     0.000     0.000     0.000        7   <Module::Gem>#load_path_insert_index
  0.00      0.097     0.000     0.000     0.097        4   PrettyPrint::Breakable#output
  0.00     15.686     0.000     0.000    15.686        1   Object#run
  0.00      0.000     0.000     0.000     0.000        7   Range#each
  0.00      0.000     0.000     0.000     0.000        4   Gem::Version#prerelease?
  0.00     10.614     0.000     0.000    10.614        1   Object#generate_json
  0.00      0.000     0.000     0.000     0.000        1   ShadowActionManager#initialize
  0.00      0.000     0.000     0.000     0.000        3   PP::PPMethods#check_inspect_key
  0.00      0.004     0.000     0.000     0.004        6   MQTT::Client#send_packet
  0.00      0.000     0.000     0.000     0.000        7   PrettyPrint::Group#initialize
  0.00      0.000     0.000     0.000     0.000       10   <Module::JSON>#deep_const_get
  0.00      0.000     0.000     0.000     0.000       12   Module#const_defined?
  0.00      0.000     0.000     0.000     0.000       28   Module#included
  0.00      0.000     0.000     0.000     0.000        2   String#scan
  0.00      0.011     0.000     0.000     0.011        5   <Class::Gem::Specification>#find_inactive_by_path
  0.00      0.001     0.000     0.000     0.000        7   Gem::Specification#conflicts
  0.00      0.000     0.000     0.000     0.000       10   String#[]=
  0.00      0.000     0.000     0.000     0.000       14   Gem::Specification#dependencies
  0.00      0.000     0.000     0.000     0.000       10   Gem::Specification#gem_build_complete_path
  0.00      0.000     0.000     0.000     0.000       14   String#force_encoding
  0.00     10.614     0.000     0.000    10.614        1   Object#dht
  0.00      0.231     0.000     0.000     0.231        3   OpenSSL::Buffering#read
  0.00      0.000     0.000     0.000     0.000       31   Fixnum#|
  0.00      0.000     0.000     0.000     0.000        4   PrettyPrint#breakable
  0.00      0.000     0.000     0.000     0.000       17   String#<<
  0.00      0.000     0.000     0.000     0.000       12   Array#shift
  0.00      0.000     0.000     0.000     0.000        8   Array#insert
  0.00      0.000     0.000     0.000     0.000        2   IO#close
  0.00      0.000     0.000     0.000     0.000        8   <Class::Gem::Specification>#stubs
  0.00      0.101     0.000     0.000     0.101        1   PP::ObjectMixin#pretty_print
  0.00      0.000     0.000     0.000     0.000        2   File#initialize
  0.00      0.000     0.000     0.000     0.000       16   Gem::Specification#extensions
  0.00      0.015     0.000     0.000     0.015        8   Enumerable#find
  0.00      0.000     0.000     0.000     0.000       16   Kernel#rand
  0.00      0.000     0.000     0.000     0.000        1   Thread#join
  0.00      0.232     0.000     0.000     0.232        1   <Module::Kernel>#catch
  0.00      0.000     0.000     0.000     0.000        2   FFI::MemoryPointer#initialize
  0.00      0.001     0.000     0.000     0.001        7   Gem::Specification#raise_if_conflicts
  0.00      0.000     0.000     0.000     0.000        1   OpenSSL::SSL::Nonblock#initialize
  0.00      0.000     0.000     0.000     0.000        7   UnboundMethod#bind
  0.00      0.000     0.000     0.000     0.000        4   PrettyPrint::Breakable#initialize
  0.00      0.001     0.000     0.000     0.001        6   OpenSSL::Buffering#write
  0.00      0.101     0.000     0.000     0.101        6  *PrettyPrint#group_sub
  0.00      0.000     0.000     0.000     0.000       10   Gem::Specification#installed_by_version
  0.00      0.000     0.000     0.000     0.000       21   Module#const_get
  0.00      0.000     0.000     0.000     0.000        2   Array#uniq
  0.00      0.000     0.000     0.000     0.000       26   Kernel#hash
  0.00      0.000     0.000     0.000     0.000       18   Integer#to_i
  0.00      0.008     0.000     0.000     0.008        1   <Module::JSON>#generator=
  0.00      0.000     0.000     0.000     0.000        1   JSON::Ext::Parser#parse
  0.00      0.000     0.000     0.000     0.000        2   Kernel#autoload
  0.00      0.000     0.000     0.000     0.000       21   Thread#[]
  0.00      0.000     0.000     0.000     0.000        2   Thread#kill
  0.00      0.000     0.000     0.000     0.000        7   OpenSSL::SSL::SocketForwarder#closed?
  0.00      0.102     0.000     0.000     0.102        3  *PP::PPMethods#pp
  0.00      0.232     0.000     0.000     0.232        1   <Class::MQTT::Packet>#read
  0.00      0.000     0.000     0.000     0.000        3   Enumerable#sort_by
  0.00      2.090     0.000     0.000     2.090        1   ShadowActionManager#shadow_update
  0.00      0.000     0.000     0.000     0.000        5   FFI::Library#find_type
  0.00      0.000     0.000     0.000     0.000       10   Gem::StubSpecification#version
  0.00      0.000     0.000     0.000     0.000        7   Method#call
  0.00      0.101     0.000     0.000     0.101        1   PP::PPMethods#object_address_group
  0.00      0.000     0.000     0.000     0.000        7   MQTT::Packet#version=
  0.00      0.000     0.000     0.000     0.000       18   Module#private_method_defined?
  0.00      0.000     0.000     0.000     0.000        7   MQTT::Packet#body_length=
  0.00      0.000     0.000     0.000     0.000        3   PP::PPMethods#push_inspect_key
  0.00      0.001     0.000     0.000     0.000        3   MQTT::Packet::Subscribe#encode_body
  0.00      0.000     0.000     0.000     0.000        1   Method#inspect
  0.00      0.002     0.000     0.000     0.002        7   MQTT::Packet#update_attributes
  0.00      0.000     0.000     0.000     0.000       11   Array#first
  0.00      0.001     0.000     0.000     0.001        4   Gem::Requirement#satisfied_by?
  0.00      0.000     0.000     0.000     0.000       10   Exception#message
  0.00      0.000     0.000     0.000     0.000        5   MqttManager::TopicBuilder#is_delta?
  0.00      0.000     0.000     0.000     0.000        3   OpenSSL::Buffering#consume_rbuff
  0.00      0.000     0.000     0.000     0.000       35   Symbol#==
  0.00      0.001     0.000     0.000     0.001        6   MQTT::Client#ssl_context
  0.00      0.000     0.000     0.000     0.000       13   NilClass#nil?
  0.00      0.000     0.000     0.000     0.000        7   Array#pop
  0.00      0.002     0.000     0.000     0.002        1   Kernel#gem
  0.00      0.003     0.000     0.000     0.003        3   MQTT::Client#subscribe
  0.00      0.000     0.000     0.000     0.000        3   JSON::Ext::Generator::State#initialize
  0.00      0.000     0.000     0.000     0.000        7   Kernel#Array
  0.00      0.000     0.000     0.000     0.000        1   JSON::Ext::Parser#initialize
  0.00      0.001     0.000     0.000     0.001        1   FFI::Library#attach_function
  0.00      0.000     0.000     0.000     0.000        3   Array#reject!
  0.00      0.060     0.000     0.000     0.060        1   MqttManager::MqttManager#initialize
  0.00      0.000     0.000     0.000     0.000        1   OpenSSL::X509::Store#initialize
  0.00      0.000     0.000     0.000     0.000       17   Fixnum#<=>
  0.00      0.000     0.000     0.000     0.000        1   TokenCreator#random_token_string
  0.00      0.000     0.000     0.000     0.000        1   String#camelcase
  0.00      0.000     0.000     0.000     0.000       19   String#empty?
  0.00      0.000     0.000     0.000     0.000        6   PrettyPrint::GroupQueue#delete
  0.00      0.000     0.000     0.000     0.000       10   BasicObject#!=
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet::Connack#parse_body
  0.00      0.000     0.000     0.000     0.000        9   String#[]
  0.00      0.000     0.000     0.000     0.000       10   Enumerable#inject
  0.00      0.000     0.000     0.000     0.000        1   Adapters::RubyMqttAdapter#generate_client_id
  0.00      0.500     0.000     0.000     0.500        1   <Class::PP>#pp
  0.00      0.300     0.000     0.000     0.300        4   PrettyPrint::Text#output
  0.00      4.088     0.000     0.000     4.088        2   MqttManager::TopicManager#shadow_topic_subscribe
  0.00      0.000     0.000     0.000     0.000       21   Array#sample
  0.00      0.000     0.000     0.000     0.000        1   Hitimes::Interval#start
  0.00      0.000     0.000     0.000     0.000        1   Gem::Dependency#initialize
  0.00      0.000     0.000     0.000     0.000        3   Module#instance_method
  0.00      0.000     0.000     0.000     0.000       16   Fixnum#&
  0.00      0.000     0.000     0.000     0.000        2   FFI::DataConverter#native_type
  0.00      0.005     0.000     0.000     0.005        3   Forwardable#def_instance_delegators
  0.00      0.000     0.000     0.000     0.000       10   Gem::BasicSpecification#extension_dir
  0.00      0.000     0.000     0.000     0.000        1   Kernel#to_s
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet::Publish#encode_body
  0.00      0.101     0.000     0.000     0.101        6  *PrettyPrint#nest
  0.00      0.045     0.000     0.000     0.045        1   MqttAdapterLib#adapter=
  0.00      0.000     0.000     0.000     0.000       11   String#<=>
  0.00      0.008     0.000     0.000     0.008        2   <Class::IO>#open
  0.00      0.000     0.000     0.000     0.000        3   <Class::Regexp>#quote
  0.00      0.000     0.000     0.000     0.000        4   <Class::Gem::Platform>#match
  0.00      0.001     0.000     0.000     0.001        1   MQTT::Client#publish
  0.00      0.003     0.000     0.000     0.003        3   Gem::Dependency#to_specs
  0.00      0.231     0.000     0.000     0.231        2   <Class::MQTT::Packet>#read_byte
  0.00      0.000     0.000     0.000     0.000        4   MQTT::Client#next_packet_id
  0.00      0.000     0.000     0.000     0.000        6   Enumerable#to_a
  0.00      0.000     0.000     0.000     0.000        2   Float#inspect
  0.00      0.101     0.000     0.000     0.101        1   PP::PPMethods#pp_object
  0.00      0.000     0.000     0.000     0.000        2   Array#sort
  0.00      0.000     0.000     0.000     0.000        3   <Class::File>#basename
  0.00      0.000     0.000     0.000     0.000        5   String#start_with?
  0.00      0.000     0.000     0.000     0.000       10   Exception#to_s
  0.00      0.000     0.000     0.000     0.000        8   Array#initialize_copy
  0.00      0.501     0.000     0.000     0.500        1   Kernel#pp
  0.00      0.000     0.000     0.000     0.000        1   <Class::MQTT::Packet>#create_from_header
  0.00      0.000     0.000     0.000     0.000        1   <Class::File>#expand_path
  0.00      0.000     0.000     0.000     0.000        1   Array#map!
  0.00      0.000     0.000     0.000     0.000        8   Fixnum#/
  0.00      0.002     0.000     0.000     0.001        1   MqttManager::TopicManager#shadow_topic_publish
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet::Publish#qos=
  0.00      0.000     0.000     0.000     0.000        1   Timers::Group#initialize
  0.00      0.000     0.000     0.000     0.000        3   PP::PPMethods#pop_inspect_key
  0.00      0.000     0.000     0.000     0.000        7   BasicObject#initialize
  0.00      0.003     0.000     0.000     0.003        3   MqttManager::MqttManager#subscribe
  0.00      0.000     0.000     0.000     0.000        1   FFI::FunctionType#initialize
  0.00      0.000     0.000     0.000     0.000        4   <Module::Gem>#platforms
  0.00      0.000     0.000     0.000     0.000        5   MQTT::Packet#encode_bytes
  0.00      0.000     0.000     0.000     0.000        3   Kernel#lambda
  0.00      0.000     0.000     0.000     0.000        8   Module#public
  0.00      0.001     0.000     0.000     0.001        3   MQTT::Packet::Subscribe#initialize
  0.00      0.000     0.000     0.000     0.000        9   IO#closed?
  0.00      0.000     0.000     0.000     0.000        8   Mutex#initialize
  0.00      0.000     0.000     0.000     0.000        4   Hash#initialize
  0.00      0.000     0.000     0.000     0.000        6   Comparable#==
  0.00      0.000     0.000     0.000     0.000        4   String#unpack
  0.00      0.000     0.000     0.000     0.000        1   String#sub
  0.00      0.232     0.000     0.000     0.232        1   Timeout#timeout
  0.00      0.000     0.000     0.000     0.000        4   Module#autoload
  0.00      0.000     0.000     0.000     0.000       14   Hash#key?
  0.00      0.000     0.000     0.000     0.000        4   <Class::Proc>#new
  0.00      0.101     0.000     0.000     0.101        6  *PrettyPrint#group
  0.00      0.002     0.000     0.000     0.002        1   Adapters::RubyMqttAdapter#set_tls_ssl_context
  0.00      0.000     0.000     0.000     0.000        5   Gem::Dependency#requirement
  0.00      0.000     0.000     0.000     0.000       16   Integer#chr
  0.00      0.000     0.000     0.000     0.000        7   <Module::FFI::Platform>#is_os
  0.00      0.000     0.000     0.000     0.000        1   Timers::Timer#reset
  0.00      0.000     0.000     0.000     0.000        1   Kernel#method
  0.00      0.000     0.000     0.000     0.000        7   NilClass#to_i
  0.00      0.000     0.000     0.000     0.000        1   Hash#merge!
  0.00      0.000     0.000     0.000     0.000        3   Adapters::RubyMqttAdapter#add_callback_filter_topic
  0.00      0.000     0.000     0.000     0.000        4   Gem::Specification#sort_obj
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet::Connect#initialize
  0.00      0.000     0.000     0.000     0.000        6   String#to_i
  0.00      0.000     0.000     0.000     0.000        6   Exception#exception
  0.00      0.000     0.000     0.000     0.000        1   DhtSensor::Reading#initialize
  0.00      0.000     0.000     0.000     0.000        1   OpenSSL::Buffering#initialize
  0.00      0.000     0.000     0.000     0.000        7   Fixnum#%
  0.00      0.815     0.000     0.000     0.815        1   MqttManager::MqttManager#connect
  0.00      0.001     0.000     0.000     0.001        1   Gem::Dependency#to_spec
  0.00      0.000     0.000     0.000     0.000        5   Array#+
  0.00      0.000     0.000     0.000     0.000        1   Timers::Timer#initialize
  0.00      0.003     0.000     0.000     0.003        3   MqttAdapterLib::MqttAdapter#subscribe
  0.00      0.000     0.000     0.000     0.000        1   Kernel#instance_variables
  0.00      0.003     0.000     0.000     0.003        3   Adapters::RubyMqttAdapter#subscribe
  0.00      0.000     0.000     0.000     0.000        1   Module#attr_writer
  0.00      0.001     0.000     0.000     0.001        1   FFI::Library#ffi_lib
  0.00      0.000     0.000     0.000     0.000        7   Fixnum#<<
  0.00      0.000     0.000     0.000     0.000        1   PrettyPrint::GroupQueue#initialize
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet::Connack#initialize
  0.00      0.000     0.000     0.000     0.000        5   Comparable#>=
  0.00      0.000     0.000     0.000     0.000        9   Kernel#kind_of?
  0.00      0.000     0.000     0.000     0.000        4   Float#to_s
  0.00      0.000     0.000     0.000     0.000        1   MqttAdapterLib::MqttAdapter#host=
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Client#key_file=
  0.00      0.000     0.000     0.000     0.000        1   MqttManager::MqttManager#config_endpoint
  0.00      0.000     0.000     0.000     0.000        2   Set#initialize
  0.00      0.000     0.000     0.000     0.000        3   MqttAdapterLib::MqttAdapter#add_callback_filter_topic
  0.00      0.000     0.000     0.000     0.000        1   Gem::Specification#files
  0.00      0.000     0.000     0.000     0.000        4   PrettyPrint::Text#initialize
  0.00      0.000     0.000     0.000     0.000        8   PrettyPrint::Group#break?
  0.00      0.000     0.000     0.000     0.000        7   Module#extended
  0.00      0.000     0.000     0.000     0.000        3   Kernel#object_id
  0.00      0.000     0.000     0.000     0.000        4   PrettyPrint#current_group
  0.00      0.232     0.000     0.000     0.232        1   <Class::Timeout::Error>#catch
  0.00      0.000     0.000     0.000     0.000        2   MQTT::Packet::Publish#qos
  0.00      0.000     0.000     0.000     0.000        1   Timers::Events#schedule
  0.00      0.000     0.000     0.000     0.000        5   String#end_with?
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet::Publish#initialize
  0.00      0.000     0.000     0.000     0.000        1   Hash#==
  0.00      0.001     0.000     0.000     0.001        1   OpenSSL::Buffering#close
  0.00      0.000     0.000     0.000     0.000        4   Gem::Specification#platform
  0.00      0.000     0.000     0.000     0.000        1   Gem::Specification#add_bindir
  0.00      0.000     0.000     0.000     0.000        1   <Module::FFI>#map_library_name
  0.00      0.000     0.000     0.000     0.000        1   Gem::Version#bump
  0.00      0.002     0.000     0.000     0.002        3   Enumerable#find_all
  0.00      0.000     0.000     0.000     0.000        2   Numeric#pretty_print
  0.00      0.000     0.000     0.000     0.000        1   ShadowClient#create_shadow_handler_with_name
  0.00      0.000     0.000     0.000     0.000        2   Array#uniq!
  0.00      0.000     0.000     0.000     0.000        2   FFI::Library#ffi_convention
  0.00      0.000     0.000     0.000     0.000        1   JSONPayloadParser#set_message
  0.00      0.000     0.000     0.000     0.000        1   Module#constants
  0.00      0.000     0.000     0.000     0.000        1   MqttManager::TopicManager#initialize
  0.00      0.000     0.000     0.000     0.000        1   <Class::Gem::Requirement>#create
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Client#ca_file=
  0.00      0.002     0.000     0.000     0.002        1   MqttManager::MqttManager#config_ssl_context
  0.00      0.000     0.000     0.000     0.000        1   OpenSSL::Buffering#flush
  0.00      0.102     0.000     0.000     0.102        1   ShadowClient#disconnect
  0.00      0.815     0.000     0.000     0.815        1   Adapters::RubyMqttAdapter#connect
  0.00      0.000     0.000     0.000     0.000        1   <Module::FFI::Library>#extended
  0.00      0.000     0.000     0.000     0.000        2   Array#==
  0.00      0.060     0.000     0.000     0.060        1   MqttAdapterLib::MqttAdapter#initialize
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet#shift_bits
  0.00      0.102     0.000     0.000     0.102        1   Adapters::RubyMqttAdapter#disconnect
  0.00      0.000     0.000     0.000     0.000        3   Symbol#to_proc
  0.00      0.002     0.000     0.000     0.002        1   PP::PPMethods#seplist
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet#validate_flags
  0.00      0.000     0.000     0.000     0.000        2   <Class::Time>#now
  0.00      0.398     0.000     0.000     0.398        1   PrettyPrint#flush
  0.00      0.000     0.000     0.000     0.000        1   MqttManager::MqttManager#client_id
  0.00      0.271     0.000     0.000     0.271        1   <Class::IO>#new
  0.00      0.000     0.000     0.000     0.000        3   Hash#include?
  0.00      2.002     0.000     0.000     2.002        1   ShadowClient#register_delta_callback
  0.00      0.230     0.000     0.000     0.230        1   OpenSSL::Buffering#fill_rbuff
  0.00      0.000     0.000     0.000     0.000        1   Gem::Version#initialize
  0.00      0.001     0.000     0.000     0.001        4   Enumerable#all?
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet::Disconnect#initialize
  0.00      0.000     0.000     0.000     0.000        1   Array#delete_if
  0.00      0.001     0.000     0.000     0.001        1   MqttManager::MqttManager#publish
  0.00      0.000     0.000     0.000     0.000        4   Hash#keys
  0.00      0.000     0.000     0.000     0.000        1   PP::ObjectMixin#pretty_print_instance_variables
  0.00      0.000     0.000     0.000     0.000        2   IO#fcntl
  0.00      0.815     0.000     0.000     0.815        1   ShadowClient#connect
  0.00      0.001     0.000     0.000     0.001        1   MQTT::Client#cert=
  0.00      0.000     0.000     0.000     0.000        1   Thread::Queue#initialize
  0.00      2.090     0.000     0.000     2.090        1   ShadowClient#update_shadow
  0.00      0.000     0.000     0.000     0.000        4   BasicObject#==
  0.00      0.000     0.000     0.000     0.000        1   Adapters::RubyMqttAdapter#loop_start
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet#encode_body
  0.00      0.000     0.000     0.000     0.000        1   JSON#parse
  0.00      0.000     0.000     0.000     0.000        1   Array#size
  0.00      0.000     0.000     0.000     0.000        2   Kernel#taint
  0.00      0.045     0.000     0.000     0.045        1   MqttAdapterLib#adapter
  0.00      0.000     0.000     0.000     0.000        1   <Module::JSON::Ext::Generator::GeneratorMethods::String>#included
  0.00      0.000     0.000     0.000     0.000        1   <Class::Encoding>#find
  0.00      0.000     0.000     0.000     0.000        1   <Module::Gem>#remove_unresolved_default_spec
  0.00      0.000     0.000     0.000     0.000        1   OpenSSL::X509::Store#flags=
  0.00      0.000     0.000     0.000     0.000        1   FFI::Pointer#initialize
  0.00      0.232     0.000     0.000     0.232        1   MQTT::Client#receive_connack
  0.00      0.000     0.000     0.000     0.000        5   Fixnum#*
  0.00      0.000     0.000     0.000     0.000        1   JSONPayloadParser#set_attribute_value
  0.00      0.000     0.000     0.000     0.000        2   Kernel#instance_variable_set
  0.00      0.000     0.000     0.000     0.000        1   <Class::MQTT::Client>#generate_client_id
  0.00      0.000     0.000     0.000     0.000        3   String#upcase
  0.00      0.060     0.000     0.000     0.060        1   MqttManager::MqttManager#create_mqtt_adapter
  0.00      0.060     0.000     0.000     0.060        1   ShadowClient#initialize
  0.00      0.000     0.000     0.000     0.000        2   <Object::Object>#[]
  0.00      0.000     0.000     0.000     0.000        1   FFI::Library#function_names
  0.00      0.102     0.000     0.000     0.102        1   MqttAdapterLib::MqttAdapter#disconnect
  0.00      0.102     0.000     0.000     0.102        1   MqttManager::MqttManager#disconnect
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet::Publish#retain=
  0.00      0.000     0.000     0.000     0.000        1   String#chomp!
  0.00      0.000     0.000     0.000     0.000        1   ShadowClient#topic_manager
  0.00      0.000     0.000     0.000     0.000        3   Array#compact
  0.00      0.000     0.000     0.000     0.000        1   Kernel#raise
  0.00      0.000     0.000     0.000     0.000        5   Fixnum#<=
  0.00      0.001     0.000     0.000     0.001        1   MQTT::Client#cert_file=
  0.00      0.000     0.000     0.000     0.000        1   <Module::JSON>#parser=
  0.00      0.000     0.000     0.000     0.000        1   FFI::Type::Mapped#initialize
  0.00      0.001     0.000     0.000     0.001        1   MqttAdapterLib::MqttAdapter#publish
  0.00      0.000     0.000     0.000     0.000        1   JSONPayloadParser#get_json
  0.00      0.000     0.000     0.000     0.000        2   String#slice!
  0.00      0.000     0.000     0.000     0.000        1   ShadowClient#configure_endpoint
  0.00      0.000     0.000     0.000     0.000        1   FFI::Function#initialize
  0.00      0.000     0.000     0.000     0.000        1   FFI::DynamicLibrary#find_function
  0.00      0.000     0.000     0.000     0.000        1   FFI::Library#ffi_libraries
  0.00      0.000     0.000     0.000     0.000        1   MqttManager::TopicBuilder#get_topic_general
  0.00      0.000     0.000     0.000     0.000        1   MqttManager::TopicBuilder#get_topic_rejected
  0.00      0.000     0.000     0.000     0.000        1   Set#add
  0.00      0.000     0.000     0.000     0.000        3   Array#[]=
  0.00      0.000     0.000     0.000     0.000        1   Timers::Group#after
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet#shift_byte
  0.00      0.002     0.000     0.000     0.002        1   ShadowClient#configure_credentials
  0.00      0.000     0.000     0.000     0.000        4   Integer#next
  0.00      0.001     0.000     0.000     0.001        1   Adapters::RubyMqttAdapter#publish
  0.00      0.000     0.000     0.000     0.000        1   Timers::Events#bisect_left
  0.00      0.000     0.000     0.000     0.000        1   TokenCreator#initialize
  0.00      0.000     0.000     0.000     0.000        1   MqttAdapterLib::MqttAdapter#client_id
  0.00      0.000     0.000     0.000     0.000        1   Enumerable#map
  0.00      0.000     0.000     0.000     0.000        4   String#size
  0.00      0.000     0.000     0.000     0.000        1   Functor#initialize
  0.00      0.000     0.000     0.000     0.000        2   Kernel#freeze
  0.00      0.004     0.000     0.000     0.004        1   <Class::Gem::Specification>#find_by_path
  0.00      0.000     0.000     0.000     0.000        2   Fixnum#to_s
  0.00      0.815     0.000     0.000     0.815        1   MqttAdapterLib::MqttAdapter#connect
  0.00      0.002     0.000     0.000     0.002        1   MqttAdapterLib::MqttAdapter#set_tls_ssl_context
  0.00      0.004     0.000     0.000     0.004        1   <Class::Gem::Specification>#each
  0.00      0.000     0.000     0.000     0.000        1   Timers::Events::Handle#initialize
  0.00      0.000     0.000     0.000     0.000        1   Timers::Events#initialize
  0.00      0.000     0.000     0.000     0.000        1   Array#clear
  0.00      2.002     0.000     0.000     2.002        1   ShadowActionManager#register_shadow_delta_callback
  0.00      0.000     0.000     0.000     0.000        1   MqttManager::MqttManager#need_ssl_configure?
  0.00      0.000     0.000     0.000     0.000        1   Hitimes::Interval#to_f
  0.00      0.000     0.000     0.000     0.000        1   MqttManager::TopicManager#client_id
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet#parse_body
  0.00      0.000     0.000     0.000     0.000        2   Time#initialize
  0.00      0.000     0.000     0.000     0.000        1   Array#<=>
  0.00      0.000     0.000     0.000     0.000        1   Timers::Group#current_offset
  0.00      0.000     0.000     0.000     0.000        2   Float#/
  0.00      0.000     0.000     0.000     0.000        1   MqttManager::TopicBuilder#get_topic_accepted
  0.00      0.000     0.000     0.000     0.000        1   Float#==
  0.00      0.000     0.000     0.000     0.000        1   Kernel#proc
  0.00      0.000     0.000     0.000     0.000        2   String#downcase
  0.00      0.000     0.000     0.000     0.000        1   Adapters::RubyMqttAdapter#port=
  0.00      0.000     0.000     0.000     0.000        1   MqttAdapterLib::MqttAdapter#on_message=
  0.00      0.000     0.000     0.000     0.000        1   JSON::Ext::Generator::State#initialize_copy
  0.00      0.000     0.000     0.000     0.000        1   JSONPayloadParser#initialize
  0.00      0.000     0.000     0.000     0.000        1   <Class::Gem::Specification>#_all
  0.00      0.000     0.000     0.000     0.000        1   Gem::Dependency#prerelease?
  0.00      0.000     0.000     0.000     0.000        1   <Class::Gem::Version>#correct?
  0.00      0.000     0.000     0.000     0.000        1   Float#to_f
  0.00      0.000     0.000     0.000     0.000        1   MqttManager::TopicBuilder#get_topic_delta
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#zero?
  0.00      0.000     0.000     0.000     0.000        3   Bignum#|
  0.00      0.000     0.000     0.000     0.000        2   Kernel#block_given?
  0.00      0.000     0.000     0.000     0.000        1   Gem::Version#release
  0.00      0.000     0.000     0.000     0.000        1   Adapters::RubyMqttAdapter#client_id
  0.00      0.000     0.000     0.000     0.000        1   Array#concat
  0.00      0.000     0.000     0.000     0.000        1   MqttAdapterLib::MqttAdapter#port=
  0.00      0.000     0.000     0.000     0.000        1   Adapters::RubyMqttAdapter#host=
  0.00      0.000     0.000     0.000     0.000        1   Gem::Requirement#prerelease?
  0.00      0.000     0.000     0.000     0.000        1   Bignum#&
  0.00      0.000     0.000     0.000     0.000        1   String#strip
  0.00      0.000     0.000     0.000     0.000        1   Thread#alive?
  0.00      0.000     0.000     0.000     0.000        1   Symbol#<=>
  0.00      0.000     0.000     0.000     0.000        4   Fixnum#**
  0.00      0.000     0.000     0.000     0.000        3   Fixnum#>=
  0.00      0.000     0.000     0.000     0.000        1   Array#compact!
  0.00      0.000     0.000     0.000     0.000        1   Symbol#===
  0.00      0.000     0.000     0.000     0.000        1   IO#sync
  0.00      0.000     0.000     0.000     0.000        1   Adapters::RubyMqttAdapter#on_message=
  0.00      0.000     0.000     0.000     0.000        1   Float#+
  0.00      0.000     0.000     0.000     0.000        1   Module#==
  0.00      0.000     0.000     0.000     0.000        1   Float#-@
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#~
  0.00      0.000     0.000     0.000     0.000        1   Kernel#Float
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#>>

* indicates recursively called methods
Measure Mode: wall_time
Thread ID: 721290744
Fiber ID: 721290624
Total: 15.040946
Sort by: self_time

 %self      total      self      wait     child     calls  name
  1.53      0.232     0.230     0.001     0.000        1   Kernel#sleep
  0.00     15.041     0.000    14.809     0.232        1   Timeout#timeout
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#to_s

* indicates recursively called methods
Measure Mode: wall_time
Thread ID: 721289304
Fiber ID: 721272744
Total: 14.808811
Sort by: self_time

 %self      total      self      wait     child     calls  name
  0.01     14.802     0.001    14.801     0.000       28   <Class::IO>#select
  0.00      0.002     0.001     0.000     0.002       27   MQTT::Client#keep_alive!
  0.00     14.808     0.000     0.000    14.807       28   MQTT::Client#receive_packet
  0.00      0.001     0.000     0.000     0.000        4   Hash#each_pair
  0.00      0.001     0.000     0.000     0.000       29   MQTT::Client#connected?
  0.00      0.000     0.000     0.000     0.000       54   <Class::Time>#now
  0.00      0.000     0.000     0.000     0.000        3   OpenSSL::SSL::SSLSocket#sysread
  0.00      0.001     0.000     0.000     0.001        9   OpenSSL::Buffering#read
  0.00     14.809     0.000     0.000    14.809        1   MQTT::Client#connect
  0.00      0.000     0.000     0.000     0.000       53   Time#+
  0.00      0.000     0.000     0.000     0.000       54   Time#initialize
  0.00      0.000     0.000     0.000     0.000       29   OpenSSL::SSL::SocketForwarder#closed?
  0.00      0.000     0.000     0.000     0.000       59   BasicObject#!
  0.00      0.003     0.000     0.000     0.003        3   <Class::MQTT::Packet>#read
  0.00      0.000     0.000     0.000     0.000        9   OpenSSL::Buffering#consume_rbuff
  0.00      0.000     0.000     0.000     0.000       27   Comparable#>=
  0.00      0.000     0.000     0.000     0.000       53   Time#<=>
  0.00      0.000     0.000     0.000     0.000        3   Range#each
  0.00      0.000     0.000     0.000     0.000       26   Comparable#>
  0.00      0.000     0.000     0.000     0.000       27   Float#ceil
  0.00      0.000     0.000     0.000     0.000       42   Kernel#nil?
  0.00      0.001     0.000     0.000     0.001        6   <Class::MQTT::Packet>#read_byte
  0.00      0.000     0.000     0.000     0.000        1   OpenSSL::SSL::SSLSocket#syswrite
  0.00      0.000     0.000     0.000     0.000       21   BasicObject#!=
  0.00      0.000     0.000     0.000     0.000        3   MQTT::Packet::Suback#parse_body
  0.00      0.000     0.000     0.000     0.000       33   Fixnum#*
  0.00      0.000     0.000     0.000     0.000       38   Fixnum#>
  0.00      0.001     0.000     0.000     0.001        3   <Class::MQTT::Packet>#create_from_header
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet#to_s
  0.00      0.000     0.000     0.000     0.000       33   Kernel#is_a?
  0.00      0.000     0.000     0.000     0.000       13   Kernel#initialize_dup
  0.00      0.000     0.000     0.000     0.000        7   Hash#initialize_copy
  0.00      0.000     0.000     0.000     0.000        3   MQTT::Client#handle_packet
  0.00      0.000     0.000     0.000     0.000       24   NilClass#nil?
  0.00      0.000     0.000     0.000     0.000       29   IO#closed?
  0.00      0.001     0.000     0.000     0.001        4   MQTT::Packet#initialize
  0.00      0.000     0.000     0.000     0.000       18   Symbol#to_s
  0.00      0.000     0.000     0.000     0.000       12   String#unpack
  0.00      0.000     0.000     0.000     0.000       27   Fixnum#==
  0.00      0.000     0.000     0.000     0.000        7   Hash#merge
  0.00      0.000     0.000     0.000     0.000        1   OpenSSL::Buffering#do_write
  0.00      0.000     0.000     0.000     0.000       10   String#[]=
  0.00      0.000     0.000     0.000     0.000       10   String#[]
  0.00      0.001     0.000     0.000     0.001        4   Class#new
  0.00      0.000     0.000     0.000     0.000       22   Fixnum#&
  0.00      0.000     0.000     0.000     0.000       18   String#empty?
  0.00      0.001     0.000     0.000     0.001        3   MQTT::Packet::Suback#initialize
  0.00      0.000     0.000     0.000     0.000       12   Array#first
  0.00      0.000     0.000     0.000     0.000        3   OpenSSL::Buffering#fill_rbuff
  0.00      0.000     0.000     0.000     0.000        6   String#slice!
  0.00      0.000     0.000     0.000     0.000        3   MQTT::Packet#shift_short
  0.00      0.000     0.000     0.000     0.000        3   MQTT::Packet#validate_flags
  0.00      0.000     0.000     0.000     0.000       12   String#size
  0.00      0.000     0.000     0.000     0.000        4   MQTT::Packet#body_length=
  0.00      0.000     0.000     0.000     0.000        3   MQTT::Packet#shift_byte
  0.00      0.001     0.000     0.000     0.001        4   MQTT::Packet#update_attributes
  0.00      0.000     0.000     0.000     0.000        6   Kernel#dup
  0.00      0.000     0.000     0.000     0.000        3   MQTT::Packet::Suback#return_codes=
  0.00      0.000     0.000     0.000     0.000        4   MQTT::Packet#version=
  0.00      0.000     0.000     0.000     0.000        3   MQTT::Packet#parse_body
  0.00      0.000     0.000     0.000     0.000        3   Kernel#instance_variable_set
  0.00      0.000     0.000     0.000     0.000        3   Array#==
  0.00      0.000     0.000     0.000     0.000       12   Fixnum#<=
  0.00      0.000     0.000     0.000     0.000       11   String#bytesize
  0.00      0.000     0.000     0.000     0.000        4   String#<<
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#to_s
  0.00      0.000     0.000     0.000     0.000        1   Array#index
  0.00      0.000     0.000     0.000     0.000       12   Fixnum#**
  0.00      0.000     0.000     0.000     0.000        3   Enumerable#map
  0.00      0.000     0.000     0.000     0.000       10   Kernel#class
  0.00      0.000     0.000     0.000     0.000        7   Fixnum#+
  0.00      0.000     0.000     0.000     0.000        6   Array#initialize_copy
  0.00      0.000     0.000     0.000     0.000        1   Mutex#synchronize
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet#type_id
  0.00      0.000     0.000     0.000     0.000        7   Array#[]
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Client#send_packet
  0.00      0.000     0.000     0.000     0.000        9   Module#==
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet::Pingreq#initialize
  0.00      0.000     0.000     0.000     0.000        4   String#to_s
  0.00      0.000     0.000     0.000     0.000        1   OpenSSL::Buffering#write
  0.00      0.000     0.000     0.000     0.000        1   Array#pack
  0.00      0.000     0.000     0.000     0.000        4   NilClass#to_i
  0.00      0.000     0.000     0.000     0.000        1   MQTT::Packet#encode_body
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#-
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#/
  0.00      0.000     0.000     0.000     0.000        3   Array#<<
  0.00      0.000     0.000     0.000     0.000        3   Fixnum#>>
  0.00      0.000     0.000     0.000     0.000        4   Fixnum#|
  0.00      0.000     0.000     0.000     0.000        1   String#+
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#%
  0.00      0.000     0.000     0.000     0.000        1   String#force_encoding
  0.00      0.000     0.000     0.000     0.000        1   Array#push
  0.00      0.000     0.000     0.000     0.000        1   Integer#to_i
  0.00      0.000     0.000     0.000     0.000        1   String#length
  0.00      0.000     0.000     0.000     0.000        1   Thread#[]=
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#<<
  0.00      0.000     0.000     0.000     0.000        1   <Class::Thread>#current

* indicates recursively called methods
Measure Mode: wall_time
Thread ID: 721290456
Fiber ID: 721271160
Total: 14.806609
Sort by: self_time

 %self      total      self      wait     child     calls  name
 16.78     14.001     2.485     1.279    10.237   274469   Adapters::RubyMqttAdapter#mqtt_loop
 11.66      9.466     1.726     5.949     1.791   274469   Adapters::RubyMqttAdapter#loop_read
  6.88      1.397     1.018     0.000     0.379   274469   MQTT::Client#queue_empty?
  5.44     14.807     0.805     0.000    14.001        1   Kernel#loop
  2.66      0.394     0.394     0.000     0.000   274468   BasicObject#!
  2.62      0.388     0.388     0.000     0.000   274468   Adapters::RubyMqttAdapter#loop_misc
  2.59      0.383     0.383     0.000     0.000   274468   Adapters::RubyMqttAdapter#loop_write
  2.56      0.379     0.379     0.000     0.000   274469   Thread::Queue#empty?
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#to_s
  0.00     14.807     0.000     0.000    14.807        1   Adapters::RubyMqttAdapter#loop_forever
  0.00     14.807     0.000     0.000    14.807        1   Adapters::RubyMqttAdapter#loop_start

* indicates recursively called methods
Measure Mode: wall_time
Thread ID: 721232616
Fiber ID: 721232484
Total: 0.001643
Sort by: self_time

 %self      total      self      wait     child     calls  name
  2.19      0.000     0.000     0.000     0.000        1   Fixnum#to_s
  1.70      0.000     0.000     0.000     0.000        1   Timers::Group#wait_interval
  1.65      0.002     0.000     0.000     0.002        1   Timers::Group#wait
  1.57      0.001     0.000     0.001     0.000        1   Kernel#sleep
  0.97      0.000     0.000     0.000     0.000        1   Timers::Events#first
  0.68      0.000     0.000     0.000     0.000        1   Timers::Events::Handle#cancelled?
  0.61      0.000     0.000     0.000     0.000        1   Kernel#nil?
  0.61      0.002     0.000     0.000     0.002        1   ShadowActionManager#shadow_update
  0.59      0.000     0.000     0.000     0.000        1   Hitimes::Interval#to_f
  0.57      0.000     0.000     0.000     0.000        1   Timers::Group#current_offset
  0.42      0.000     0.000     0.000     0.000        1   Float#>
  0.30      0.000     0.000     0.000     0.000        1   Float#-
  0.30      0.000     0.000     0.000     0.000        1   Kernel#Float
  0.30      0.000     0.000     0.000     0.000        1   Kernel#block_given?
  0.29      0.000     0.000     0.000     0.000        1   Array#last
